---
layout: ue
title: Linux系统文件相关的命令
category: Linux系统与应用
tags: Linux
keywords: "linux,文件命令"
---

<div><p><br/></p><p><strong><span style="font-size: 20px;">查看目录大小</span></strong></p><p>du -h --max-depth=1 /home/tomcat</p><p>（查看 包括.开头的隐藏文件在内的所有文件大小）</p><p>du -sh .[!.]* *（参见：<a href="https://blog.csdn.net/rav009/article/details/53049441">https://blog.csdn.net/rav009/article/details/53049441</a>）</p><p>查看时按size排序：后面加上&nbsp; “| sort -hr”</p><p><br/></p><p style="line-height: 32.4px; white-space: normal;"><strong><span style="font-size: 20px;">查看磁盘使用率</span></strong></p><p style="line-height: 32.4px; white-space: normal;">df -h</p><p><br/></p><p><span style="font-size: 20px;"><strong><span style="line-height: 32.4px;">以尺寸大小排列文件和目录&nbsp;</span></strong></span></p><p><span style="line-height: 32.4px;"><span style="line-height: 32.4px;">ls -lSr |more</span><span style="line-height: 32.4px;">&nbsp;</span></span></p><p><span style="line-height: 32.4px;"><br/></span></p><p><strong><span style="font-size: 20px;">动态查看文件内容</span></strong></p><p>tail -f FILE_NAME</p><hr/><p><strong><span style="font-size: 20px;">文件的新建、删除、拷贝、移动</span></strong></p><p><strong>1）删除文件使用实例：</strong></p><p>rm -f /var/log/httpd/access.log<br/> 将会强制删除/var/log/httpd/access.log这个文件</p><p><br/></p><p><strong>2）删除文件夹实例：</strong><br/> rm -rf /var/log/httpd/access<br/> 将会删除/var/log/httpd/access目录以及其下所有文件、文件夹</p><p><br/></p><p><span style="color: rgb(0, 176, 80);">使用这个rm -rf的时候一定要格外小心，linux没有回收站的</span></p><p><br/></p><p style="line-height: 32.4px; white-space: normal;"><strong><span style="color: rgb(255, 0, 0);">Linux删除文件时</span></strong><span style="color: rgb(255, 0, 0);">报错Argument list too long</span></p><p style="line-height: 32.4px; white-space: normal;"><span style="color: rgb(255, 0, 0);">unable to execute /bin/rm: Argument list too long</span></p><p style="line-height: 32.4px; white-space: normal;">解决方法：</p><p style="line-height: 32.4px; white-space: normal;">ls | xargs -n 10 rm -fr ls</p><p style="line-height: 32.4px; white-space: normal;">就解决了，这句解释为：输出所有的文件名(用空格分割) xargs就是将ls的输出，每10个为一组(以空格为分隔符)，作为rm -rf的参数也就是说将所有文件名10个为一组，由rm -rf删除，这样就不会超过命令行的长度了。</p><p><br/></p><p><strong>3）新建文件 或 文件夹</strong><br/></p><p>touch test.txt</p><p>mkdir -pv /opt/lib/jvm&nbsp;&nbsp; -p代表递归创建文件夹 -v代表显示创建文件夹的过程<br/></p><p><br/></p><p><strong>4）拷贝文件/文件夹</strong></p><p>单个文件：cp -u -v lib/report.jar /tmp/report.jar</p><p>多个文件至一个目录： cp -u -v lib/*.jar /tmp</p><p>目录到目录：cp -r /lib/plugins/* &nbsp;/tmp/plugins</p><hr/><br/><p><strong>5、查看文件夹下面的文件个数：</strong></p><p>find ./ -type f | wc -l</p><p><br/></p><p style="line-height: 32.4px; white-space: normal;"><strong>6、Linux统计文件行数</strong></p><p style="line-height: 32.4px; white-space: normal;">wc -lcw</p><p style="line-height: 32.4px; white-space: normal;">行数、字数、字节数、文件名 如果命令行中没有文件名，则输出中不出现文件名。&nbsp;</p><p style="line-height: 32.4px; white-space: normal;">例如： $ wc - lcw file1.log file2.log</p><p style="line-height: 32.4px; white-space: normal;">&nbsp;34106 &nbsp; 655146 &nbsp; &nbsp;17831207 file1.log</p><p style="line-height: 32.4px; white-space: normal;">&nbsp;7 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 52 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5445212 &nbsp;file2.log</p><p><br/></p><div><strong>7、查找文件</strong><div><p><span style="color: rgb(0, 176, 80);">在当前目录下，递归深度为2，寻找*est文件或文件夹，</span></p><p>find <strong>.</strong> <strong>-maxdepth 2</strong> -name &quot;*est&quot;</p><br/> <p><span style="color: rgb(0, 176, 80);">查找*.ps文件，列出其完整路径：&nbsp;</span></p><p>locate \*.ps</p><p><br/></p><p style="line-height: 32.4px; white-space: normal;"><span style="font-weight: 700;">查看文件的指定行</span></p><p style="line-height: 32.4px; white-space: normal;">&nbsp;sed -n &#39;5,10p&#39; filename</p><p style="line-height: 32.4px; white-space: normal;"><br/></p><p style="line-height: 32.4px; white-space: normal;"><span style="font-weight: 700;">vim字符串查找</span></p><p style="line-height: 32.4px; white-space: normal;">直接输入 斜杠/ 然后输入查找的字符串</p><p style="line-height: 32.4px; white-space: normal;">下一个，<span style="line-height: 1.8;">n是向前找,N是向后找</span></p><br/> <span style="color: rgb(0, 176, 80);">查找某个文件，并删除</span>：</div><div>/bin/find /opt/app/tmp/ -maxdepth 2 -name &quot;aaa.war&quot; <strong>-exec</strong> /bin/rm -rf {} \;</div><div>等价于</div><div>find /opt/app/tmp/ -maxdepth 2 -name &quot;aaa.war&quot; <strong> | xargs</strong> rm -rf <br/> <br/> <span style="color: rgb(0, 176, 80);">按文件名称找出所有文件，并将每个文件的上一级目录删除掉。</span></div><div>比如，在 &nbsp; /opt/app/tmp/ &nbsp;目录下，有如下一些文件夹</div><div><span style="background-color:#FFFFFF;line-height:1.5;">/3j001-tokmza-i5ezsq6t-1-i5ezsxa7-v/amps-dcm.war</span></div><div><span style="background-color:#FFFFFF;line-height:1.5;">/3j001-txjxsz-i5ezkjrf-1-i5ezl2h8-9q/</span><span style="background-color:#FFFFFF;line-height:1.5;">amps-dcm.war</span></div><div><span style="background-color:#FFFFFF;line-height:1.5;">/3j001-5woh4c-i5f0eruz-1-i5f0fbhg-9r/admin-console.war</span></div><div><span style="background-color:#FFFFFF;line-height:1.5;">.......</span></div><div>我们的目标是把所有包含 <span style="background-color:#FFFFFF;line-height:1.5;">amps-dcm.war的临时目录全部删除</span></div><div>find /opt/app/tmp/ -maxdepth 2 -name &quot; <span style="background-color:#FFFFFF;">amps-dcm.war</span>&quot; &nbsp; <strong>| xargs</strong> echo <strong>| sed -r &#39;s/^(\/.*\/)[^/]+\/?/\1/g&#39; | xargs</strong> rm -rf</div><div>其中&nbsp; <strong style="line-height:1.5;background-color:#FFFFFF;">| sed -r &#39;s/^(\/.*\/)[^/]+\/?/\1/g&#39;&nbsp;</strong> <span style="line-height:1.5;">的意思是 字符串截取，路径中最后一个目录后面的字符，例如</span></div><div><span style="line-height:1.5;">echo &quot;<strong>/etc/</strong>rc.d/&quot; | sed -r &#39;s/^(\/.*\/)[^/]+\/?/\1/g&#39;</span></div><div><span style="line-height:1.5;">结果 是&nbsp;</span> <span style="background-color:#FFFFFF;line-height:1.5;"><strong>/etc/</strong></span></div><p><br/></p><p><br/></p><p><span style="font-size: 20px;"><strong>从linux上传文件到linux服务器的命令如下：</strong></span></p><p>scp local_file remote_user@host:remote_folder</p><p>例如：</p><p>scp 下载/kafka_2.11-0.9.0.1.tgz kafka@172.16.1.170:/home/kafka</p><br/> <strong><span style="font-size:18px;">9、tar命令</span></strong> <br/><p>解压<br/> 语法：tar [主选项+辅选项] 文件或者目录</p><p>使用该命令时，主选项是必须要有的，它告诉tar要做什么事情，辅选项是辅助使用的，可以选用。<br/> <br/> <span style="text-decoration:underline;"><strong>主选项：</strong></span><br/> <br/> <span style="color:#000000;">c 创建新的档案文件。如果用户想备份一个目录或是一些文件，就要选择这个选项。相当于打包。</span></p><p><span style="color:#000000;">x 从档案文件中释放文件。相当于拆包。</span></p><p>t 列出档案文件的内容，查看已经备份了哪些文件。</p><p><span style="color:#ff0000;">特别注意，在参数的下达中， c/x/t 仅能存在一个！不可同时存在！因为不可能同时压缩与解压缩。</span><br/> <br/> <span style="text-decoration:underline;"><strong>辅助选项：</strong></span></p><p><span style="text-decoration:underline;"></span>-z ：是否同时具有 gzip 的属性？亦即是否需要用 gzip 压缩或解压？ 一般格式为xx.tar.gz或xx. tgz</p><p>-j ：是否同时具有 bzip2 的属性？亦即是否需要用 bzip2 压缩或解压？一般格式为xx.tar.bz2&nbsp;&nbsp;</p><p>-v ：压缩的过程中显示文件！这个常用</p><p>-f ：使用档名，请留意，在 f 之后要立即接档名喔！不要再加其他参数！</p><p>-p ：使用原文件的原来属性（属性不会依据使用者而变）</p><p>--exclude FILE：在压缩的过程中，不要将 FILE 打包！</p><p>&nbsp;</p><p><span style="text-decoration:underline;"><strong>范例：</strong></span></p><br/><p style="text-indent:2em;"><span style="text-decoration:underline;">范例一：将整个 /etc&nbsp; 打包 成为 /tmp/etc.tar </span></p><p style="text-indent:2em;"><br/></p><p style="text-indent:2em;">[root@linux ~]# tar -cvf /tmp/etc.tar /etc　　　　&lt;==仅打包，不压缩！</p><p style="text-indent:2em;">[root@linux ~]# tar -zcvf /tmp/etc.tar.gz /etc　　&lt;==打包后，以 gzip 压缩</p><p style="text-indent:2em;">[root@linux ~]# tar -jcvf /tmp/etc.tar.bz2 /etc　　&lt;==打包后，以 bzip2 压缩</p><p style="text-indent:2em;"># 特别注意，在参数 f 之后的文件档名是自己取的，我们习惯上都用 .tar 来作为辨识。</p><p style="text-indent:2em;"># 如果加 z 参数，则以 .tar.gz 或 .tgz 来代表 gzip 压缩过的 tar file ～</p><p style="text-indent:2em;"># 如果加 j 参数，则以 .tar.bz2 来作为附档名啊～</p><p style="text-indent:2em;"># 上述指令在执行的时候，会显示一个警告讯息：</p><p style="text-indent:2em;"># 『tar: Removing leading `/&quot; from member names』那是关於绝对路径的特殊设定。</p><p><br/></p><p style="text-indent:2em;"><br/></p><p style="text-indent:2em;"><span style="text-decoration:underline;">范例二：查阅上述 /tmp/etc.tar.gz 文件内有哪些文件？ </span></p><p style="text-indent:2em;">[root@linux ~]# tar -ztvf /tmp/etc.tar.gz</p><p style="text-indent:2em;"># 由於我们使用 gzip 压缩，所以要查阅该 tar file 内的文件时，</p><p style="text-indent:2em;"># 就得要加上 z 这个参数了！这很重要的！</p><p style="text-indent:2em;">&nbsp;</p><p style="text-indent:2em;"><span style="text-decoration:underline;">范例三：将 /tmp/etc.tar.gz 文件解压缩在 /usr/local/src 底下</span></p><p style="text-indent:2em;">[root@linux ~]# cd /usr/local/src</p><p style="text-indent:2em;">[root@linux src]# tar -zxvf /tmp/etc.tar.gz</p><p style="text-indent:2em;"># 在预设的情况下，我们可以将压缩档在任何地方解开的！以这个范例来说</p><p style="text-indent:2em;"># 我先将工作目录变换到 /usr/local/src 底下，并且解开 /tmp/etc.tar.gz</p><p style="text-indent:2em;"># 则解开的目录会在 /usr/local/src/etc ，另外，如果您进入 /usr/local/src/etc</p><p style="text-indent:2em;"># 则会发现，该目录下的文件属性与 /etc/ 可能会有所不同喔！</p><p style="text-indent:2em;">&nbsp;</p><p style="text-indent:2em;"><span style="text-decoration:underline;">范例四：在 /tmp 底下，我只想要将 /tmp/etc.tar.gz 内的 etc/passwd 解开而已 </span></p><p style="text-indent:2em;">[root@linux ~]# cd /tmp</p><p style="text-indent:2em;">[root@linux tmp]# tar -zxvf /tmp/etc.tar.gz etc/passwd</p><p style="text-indent:2em;"># 我可以透过 tar -ztvf 来查阅 tarfile 内的文件名称，如果单只要一个文件，</p><p style="text-indent:2em;"># 就可以透过这个方式来下达！注意到！ etc.tar.gz 内的根目录 / 是被拿掉了！</p><div><div><br/><div>-C命令指定路径： <br/></div></div><div><br/> <strong>$ tar -cvf file2.tar -C&nbsp;/home/usr2 file2<br/> </strong> 该命令中的-C dir参数，将tar的工作目录从当前目录改为/home/usr2，将file2文件（不带绝对路径）压缩到file2.tar中。注意 <span style="color:#ff0000;">：-C dir参数的作用在于改变工作目录，其有效期为该命令中下一次-C dir参数之前</span>。 <br/> 使用tar的-C dir参数，同样可以做到在当前目录/home/usr1下将文件解压缩到其他目录，例如： <br/> <strong> $ tar -xvf file2.tar -C /home/usr2</strong></div></div></div></div><p><br/></p>