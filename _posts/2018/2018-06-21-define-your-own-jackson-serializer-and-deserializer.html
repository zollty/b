---
layout: ue
title: jackson自定义对象的序列化和反序列化
category: Java框架和组件
tags: Jackson,序列化
keywords: "Jackson,序列化"
---

<p>Jackson的序列化和反序列化的基类为：<br/></p><p>com.fasterxml.jackson.databind.JsonSerializer&lt;T&gt;</p><p>com.fasterxml.jackson.databind.JsonDeserializer&lt;T&gt;</p><p><br/></p><p>先查看Jackson自己实现的一些类，比如：</p><p>MapSerializer</p><p><br/></p><p>然后根据这些标准的实现，来改写就行了。</p><p><br/></p><p>例如，我将&nbsp;MapSerializer 源码拷贝一份，重命名为 MyMapSerilizer</p><p>然后改写其中的代码，找到关键位置，如下（红色部分为我添加的）：</p><p style="margin: 0;"><span style="font-size: 14px;">@Override</span></p><p style="margin: 0;"><span style="font-size: 14px;">public void serialize(Result value, JsonGenerator gen,&nbsp;</span></p><p style="margin: 0;"><span style="font-size: 14px;">&nbsp; &nbsp; SerializerProvider provider) throws IOException{</span></p><p style="/* margin: -10px; */"><span style="font-size: 14px;">&nbsp; &nbsp; gen.writeStartObject(value);</span></p><p style="margin: 0;"><span style="color: rgb(192, 0, 0); font-size: 14px;">&nbsp; &nbsp; if(value.getData()!=null) {</span></p><p style="margin: 0;"><span style="color: rgb(192, 0, 0); font-size: 14px;">&nbsp; &nbsp; &nbsp; &nbsp; gen.writeObjectField(&quot;data&quot;, value.getData());</span></p><p style="margin: 0;"><span style="color: rgb(192, 0, 0); font-size: 14px;">&nbsp; &nbsp; }</span></p><p style="margin: 0;"><span style="font-size: 14px;">&nbsp; &nbsp; if (!value.isEmpty()) {</span></p><p style="margin: 0;"><span style="font-size: 14px;">&nbsp; &nbsp; &nbsp;...</span></p><p style="margin: 0;"><span style="font-size: 14px;">&nbsp; &nbsp; }</span></p><p style="margin: 0;"><span style="font-size: 14px;">&nbsp; &nbsp; ....</span></p><p style="margin: 0;"><span style="font-size: 14px;">}</span></p><p><br/></p><p>如何使用自定义的</p><p>先new一个SimpleModule，然后注册到objectMapper即可，</p><p>如下所示：</p><p>SimpleModule module = new SimpleModule();</p><p>module.addSerializer(MyObject.class, new MyMapSerilizer);</p><p>objectMapper.registerModule(module);</p><p><br/></p><p>反序列化，亦是如此。</p><p><br/></p>