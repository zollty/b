---
layout: ue
title: 各种开源API网关、微服务网关对比测试
category: 系统架构和设计
tags: API网关,微服务
keywords: "API网关, 微服务网关"
---

<p><br/></p><p>API 网关，是大型分布式系统中，为了保护内部服务而设计的一道屏障，可以提供高性能、高可用的 API托管服务，从而帮助服务的开发者便捷地对外提供服务，而不用考虑安全控制、流量控制、审计日志等问题，统一在网关层将安全认证，流量控制，审计日志，黑白名单等实现。网关的下一层，是内部服务，内部服务只需开发和关注具体业务相关的实现。网关可以提供API发布、管理、维护等主要功能。开发者只需要简单的配置操作即可把自己开发的服务发布出去，同时置于网关的保护之下。</p><p><br/></p><p>开源的API网关，目前最主流的包括kong，spring cloud&nbsp;zuul，spring cloud gateway，zuul2等，下面来对比评测。</p><p><br/></p><table><tbody><tr class="firstRow"><td width="174" valign="top" style="word-break: break-all;">对比项&nbsp; \&nbsp; 名称</td><td width="174" valign="top" style="word-break: break-all;">kong</td><td width="174" valign="top" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">spring cloud&nbsp;</span>zuul</td><td width="174" valign="top" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">zuul2</span></td><td width="174" valign="top" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">spring cloud gateway</span></td></tr><tr><td width="174" valign="top" style="word-break: break-all;">介绍</td><td width="174" valign="top" style="word-break: break-all;">nginx(OpenResty)+lua，插件，高性能</td><td width="174" valign="top" style="word-break: break-all;">java + Servlet + groovy(热更新)</td><td width="174" valign="top" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">java+nio(netty)，zuul全新的升级版</span></td><td width="174" valign="top" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">java+Spring 5.0+Reactor非阻塞</span></td></tr><tr><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">开发方</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">Kong(Mashape)公司</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">Netflix</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">Netflix</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">Pivotal</span></td></tr><tr><td width="174" valign="top" style="word-break: break-all;">网站地址</td><td width="174" valign="top" style="word-break: break-all;"><p><a href="https://github.com/Kong/kong" target="_blank">https://github.com/Kong/kong</a></p></td><td width="174" valign="top" style="word-break: break-all;"><p><a href="https://github.com/Netflix/zuul">https://github.com/Netflix/zuul</a></p></td><td width="174" valign="top" style="word-break: break-all;"><a href="https://github.com/Netflix/zuul" style="background-color: rgb(255, 255, 255); font-size: 16px; white-space: normal;">https://github.com/Netflix/zuul</a></td><td width="174" valign="top" style="word-break: break-all;"><p><a href="https://cloud.spring.io/spring-cloud-gateway">https://cloud.spring.io/spring-cloud-gateway</a></p></td></tr><tr><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">性能对比</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">非常高，是zuul的2~3倍</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">还可以</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">性能比zuul提高20%并且</span><span style="font-size: 16px; background-color: rgb(255, 255, 255);">大幅提高</span><span style="font-size: 16px; background-color: rgb(255, 255, 255);">支持的连接数</span></td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">据说性能比zuul高50%</span></td></tr><tr><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">开发容易度</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">lua脚本语言，容易</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">java+servlet，容易</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">nio异步，比较难</td><td valign="top" colspan="1" rowspan="1" style="word-break: break-all;">reactor异步，比较难</td></tr><tr><td width="174" valign="top" style="word-break: break-all;">成熟时间</td><td width="174" valign="top" style="word-break: break-all;">2016年</td><td width="174" valign="top" style="word-break: break-all;">2014</td><td width="174" valign="top" style="word-break: break-all;"><span style="font-size: 16px; background-color: rgb(255, 255, 255);">2018</span></td><td width="174" valign="top" style="word-break: break-all;">2018</td></tr><tr><td width="174" valign="top" style="word-break: break-all;">发布版本数</td><td width="174" valign="top" style="word-break: break-all;">52</td><td width="174" valign="top" style="word-break: break-all;">51</td><td width="174" valign="top"><br/></td><td width="174" valign="top" style="word-break: break-all;">18</td></tr><tr><td width="174" valign="top" style="word-break: break-all;"><p>社区活跃度</p><p>(issue数量,star数量)</p></td><td width="174" valign="top" style="word-break: break-all;"><p>issues:2000</p><p>stars: 17.3k</p><p>结论：非常活跃</p></td><td width="174" valign="top" style="word-break: break-all;">issues:300<p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;">stars: 5.5k</p><p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;">结论：还算活跃</p></td><td width="174" valign="top" style="word-break: break-all;"><p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;">issues:</p><p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;">stars:&nbsp;</p><p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;"><br/></p></td><td width="174" valign="top" style="word-break: break-all;"><p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;">issues:</p><p style="margin-bottom: 0px; padding: 0px; font-size: 16px; white-space: normal;">stars: 819</p></td></tr></tbody></table><p>zuul和zuul2的分析对比：</p><p><a href="http://ju.outofmemory.cn/entry/362416">http://ju.outofmemory.cn/entry/362416</a> </p><p><br/></p><p>个人比较倾向于&nbsp; kong，很多人不选它的理由只有一个: 不会lua编程，二次开发不方便。实际上，这都不是问题。一方面，lua语言很简单，花一两天看看cookbook就会了；另一方面kong社区活跃，用户量大，无论是官方插件，还是第三方插件，都非常丰富，很少直接二次开发，即便有一点特殊需求，也可以找到类似的插件，改一改就行了，不精通lua，但是改一改应该没问题吧。</p><p><br/></p><p>当然，我个人还是比较期待能有Java或者Go语言的更强大的、社区更活跃API网关面世，如果对网关的稳定性和性能要求不是很高，反而是对扩展性有较高要求，则目前建议临时用zuul，并等待zuul2和spring cloud gateway的成熟。</p><p><br/></p>