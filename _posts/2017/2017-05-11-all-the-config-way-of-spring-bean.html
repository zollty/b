---
layout: ue
title: Spring Bean配置大全
category: Spring专题
tags: Spring
keywords: "Spring"
---

<p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例一：组合配置</span><br/></p><p>（1）枚举类型的属性</p><p>（2）使用构造函数赋值</p><p>（3）property结点下面用bean作为value</p><div style="line-height: 1.75; font-size: 14px;"><p>&lt;bean id=&quot;jacksonMapper&quot; class=&quot;org...Jackson2ObjectMapperFactoryBean&quot;&gt;</p><p>&nbsp; <span style="color: rgb(192, 0, 0);">&lt;property</span> name=&quot;<span style="color: rgb(192, 0, 0);">objectMapper</span>&quot;&gt;</p><p>&nbsp; &nbsp; &lt;!-- <span style="color: rgb(192, 0, 0);"><strong>bean标签嵌套在property标签内部</strong></span> --&gt;</p><p>&nbsp; &nbsp; <span style="color: rgb(192, 0, 0);">&lt;bean</span> class=&quot;com.fasterxml.jackson.databind.<span style="color: rgb(192, 0, 0);">ObjectMapper</span>&quot;&gt;</p><p>&nbsp; &nbsp; &nbsp; &lt;property name=&quot;serializationInclusion&quot;&gt;</p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- <strong>枚举类型值</strong> --&gt;</span></p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &nbsp; &lt;value type=&quot;com...JsonInclude.Include&quot;&gt;NON_EMPTY&lt;/value&gt;</span></p><p>&nbsp; &nbsp; &nbsp; &lt;/property&gt;</p><p>&nbsp; &nbsp; &nbsp; &lt;property name=&quot;dateFormat&quot;&gt;</p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &nbsp; &lt;bean class=&quot;java.text.SimpleDateFormat&quot;&gt;</span></p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- <strong>构造函数</strong> --&gt;</span></p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;yyyy-MM-dd&quot; /&gt;</span></p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/bean&gt;</span></p><p>&nbsp; &nbsp; &nbsp; &lt;/property&gt;</p><p>&nbsp; &nbsp; &lt;/bean&gt;</p><p>&nbsp; &lt;/property&gt;</p><p>&nbsp; &lt;property name=&quot;featuresToDisable&quot;&gt;</p><p>&nbsp; &nbsp; &lt;array&gt;</p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &lt;!--<strong> 注入静态常量</strong> --&gt;</span></p><p><span style="color: rgb(192, 0, 0);">&nbsp; &nbsp; &nbsp; &lt;util:constant static-field=&quot;com...DeserializationFeature.UNKNOWN_PROP&quot; /&gt;</span></p><p>&nbsp; &nbsp; &lt;/array&gt;</p><p>&nbsp; &lt;/property&gt;</p><p>&lt;/bean&gt;</p></div><div style="line-height: 1.75; font-size: 14px;">包含枚举类型属性：</div><div style="line-height: 1.75; font-size: 14px;">&lt;property name=&quot;serializationInclusion&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;value type=&quot;<span style="color: rgb(255, 0, 0);">com.fasterxml.jackson.annotation.JsonInclude.Include</span>&quot;&gt;NON_EMPTY&lt;/value&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;/property&gt;</div><p style="line-height: 1; font-size: 14px;">public enum <span style="color: rgb(192, 0, 0);">Include </span>{</p><p style="line-height: 1; font-size: 14px;">&nbsp; &nbsp; ALWAYS,</p><p style="line-height: 1; font-size: 14px;">&nbsp; &nbsp; NON_NULL,</p><p style="line-height: 1; font-size: 14px;">&nbsp; &nbsp; NON_EMPTY;</p><p style="line-height: 1; font-size: 14px;">}</p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例二：指定 init-method和destroy-method</span></p><div style="line-height: 1.75; font-size: 14px;">&lt;bean id=&quot;database&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;</div><p style="line-height: 1.75; font-size: 14px;">&nbsp; init-method=&quot;init&quot; destroy-method=&quot;close&quot;&gt;</p><div style="line-height: 1.75; font-size: 14px;">&lt;/bean&gt;</div><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例三：使用 p-schema 给属性赋值</span></p><div style="line-height: 1.75; font-size: 14px;">&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.spring..CommonsMultipartResolver&quot;&nbsp;<span style="color: rgb(255, 0, 0);">p:defaultEncoding</span>=&quot;utf-8&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &lt;property name=&quot;maxUploadSize&quot; value=&quot;52428800&quot;/&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &lt;property name=&quot;maxInMemorySize&quot; value=&quot;52428800&quot;/&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;/bean&gt;</div><div style="line-height: 1.75; font-size: 14px;">需要声明如下：（红色部分）</div><div style="line-height: 1.75; font-size: 14px;">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div style="line-height: 1.75; font-size: 14px;">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div style="line-height: 1.75; font-size: 14px;"><span style="color: rgb(255, 0, 0);">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span></div><div style="line-height: 1.75; font-size: 14px;"><span style="color: rgb(0, 176, 80);">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span></div><div style="line-height: 1.75; font-size: 14px;">xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;</div><div style="line-height: 1.75; font-size: 14px;"><span style="color: rgb(0, 176, 240);">xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</span></div><div style="line-height: 1.75; font-size: 14px;"><span style="color: rgb(112, 48, 160);">xmlns:aop=&quot;http://www.springframework.org/schema/aop</span>&quot;</div><div style="line-height: 1.75; font-size: 14px;">xsi:schemaLocation=&quot;<span style="color: rgb(255, 0, 0);">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;<span style="color: rgb(0, 176, 80);">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;	http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</div><div style="line-height: 1.75; font-size: 14px;"><span style="color: rgb(0, 176, 240);">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd </span></div><div style="line-height: 1.75; font-size: 14px;"><span style="color: rgb(112, 48, 160);"> http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span>&quot;&gt;</div><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例四：（1）使用 factory-bean &amp; factory-method 构造对象</span></p><div style="line-height: 1.75; font-size: 14px;">&lt;!-- httpclient对象构建器 --&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;bean id=&quot;httpClientBuilder&quot; class=&quot;org.apache.http.impl.client.HttpClientBuilder&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;/bean&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;bean id=&quot;httpClient&quot; class=&quot;org...client.CloseableHttpClient&quot;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;<span style="color: rgb(255, 0, 0);">factory-bean=&quot;httpClientBuilder&quot; factory-method=&quot;build&quot;</span> destroy-method=&quot;close&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;/bean&gt;</div><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例五：使用scope=protoype定义bean，每次使用都创建新对象</span></p><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;	&lt;!-- 每次都会创建一个 --&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;	&lt;bean id=&quot;httpClient&quot; class=&quot;org.zollty.client.HttpClient&quot; &nbsp;scope=&quot;prototype&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;	&lt;/bean&gt;</div><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例六：混合构造函数和setter给属性赋值</span></p><div style="line-height: 1.75; font-size: 14px;">&lt;bean class=&quot;com.zollty.lightning.push.HttpConnectionMonitorThread&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;&lt;<span style="color: rgb(255, 0, 0);">constructor-arg index=&quot;0&quot; ref=&quot;httpClientConnectionManager&quot;</span> /&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;&lt;<span style="color: rgb(255, 0, 0);">property name=&quot;connectionIdleTimeout&quot; value=&quot;${idle.timeout}</span>&quot;/&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;/bean&gt;</div><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例七：给Properties类型的属性赋值</span></p><p style="line-height: 1.75; font-size: 14px;">&lt;bean id=&quot;exceptionResolver&quot; class=&quot;org...SimpleMappingResolver&quot;&gt;</p><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;		&lt;property name=&quot;<span style="color: rgb(255, 0, 0);">exceptionMappings</span>&quot;&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;			&lt;<span style="color: rgb(255, 0, 0);">props</span>&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp; &nbsp; &lt;prop key=&quot;java.lang.RuntimeException&quot;&gt;exception/exception&lt;/prop&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp; &nbsp; &lt;prop key=&quot;java.lang.Exception&quot;&gt;exception/exception&lt;/prop&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;			&lt;/<span style="color: rgb(255, 0, 0);">props</span>&gt;</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;		&lt;/property&gt;</div><div style="line-height: 1.75; font-size: 14px;">&lt;/bean&gt;</div><div style="line-height: 1.75; font-size: 14px;">private <span style="color: rgb(255, 0, 0);">Properties</span> exceptionMappings;</div><div style="line-height: 1.75; font-size: 14px;">public void setExceptionMappings(Properties mappings) {</div><div style="line-height: 1.75; font-size: 14px;">&nbsp; &nbsp;	this.exceptionMappings = mappings;</div><div style="line-height: 1.75; font-size: 14px;">}</div><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;"><br/></span></p><p style="line-height: 1.75; font-size: 14px;"><span style="font-size: 20px;">案例八：指定 在当前bean初始化之前，先初始化 其非直接依赖的beans</span></p><div style="line-height: 1.75; font-size: 14px;"></div><div style="line-height: 1.75; font-size: 14px;"><pre class="brush:xml;toolbar:false">&lt;bean&nbsp;id=&quot;lifecycle&quot;&nbsp;class=&quot;org.apache.shiro.spring.LifecycleBeanPostProcessor&quot;/&gt;
&lt;!--&nbsp;使用depends-on，指定在当前bean初始化之前，先初始化lifecycle
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;，注意当前bean实际上并没有注入lifecycle对象&nbsp;--&gt;
&lt;bean&nbsp;class=&quot;org...DefaultAdvisorAutoProxyCreator&quot;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;depends-on=&quot;lifecycleBeanPostProcessor&quot;&gt;
&nbsp;&nbsp;&lt;property&nbsp;name=&quot;proxyTargetClass&quot;&nbsp;value=&quot;true&quot;&nbsp;/&gt;
&lt;/bean&gt;</pre></div><div style="line-height: 1.75; font-size: 14px;">备注：如果有多个非直接依赖的beans，则在depends-on可以用逗号分隔开。</div><p><br/></p><p><br/></p>