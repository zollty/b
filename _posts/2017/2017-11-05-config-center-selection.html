---
layout: ue
title: 开源分布式配置中心选型
category: 中间件技术
tags: 配置中心
keywords: "配置中心"
---

<p><br/></p><p>热门的开源分布式配置中心对比如下：</p><div style="margin-bottom: 20px; word-break: break-word; font-family: 微软雅黑; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);"><p style="line-height: 1.5; margin: 10px auto;"><br/></p><table><colgroup><col width="96"/><col width="333"/><col width="324"/><col width="324"/></colgroup><tbody><tr class="firstRow"><td class="xl67" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">对比项目</td><td class="xl68" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">Diamond（阿里2011年）</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">Disconf（百度个人2015）</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">Apollo（携程2016）</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">配置存储</td><td class="xl66" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">存储在mysql上</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">存储在mysql上</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">mysql</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">推拉模型</td><td class="xl66" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">拉模型，每隔15s拉一次全量数据</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">基于Zookeeper的推模型，实时推送</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">基于http长连接，实时推送</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">配置读写</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">支持实例对配置读写。支持某台实例写配置数据，并广播到其它实例上</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">只支持实例对配置读。通过在disconf-web上更新配置到达到广播写到所有应用实例</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><p><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">同disconf</span></p></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">容灾</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">多级容灾模式，配置数据会dump在本地，避免中心服务挂机时无法使用&nbsp;&nbsp;</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">多级容灾模式，优先读取本地配置文件</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">多级容灾模式，本地有缓存。</span></td></tr><tr><td class="xl64" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">配置<br/>数据模型</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">只支持KV结构的数据，非配置文件模式</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">支持传统的配置文件模式（配置文件），亦支持KV结构数据(配置项)</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">集中配置，本地缓存。</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">功能特性</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">需要地址服务器，客户端连接到地址服务器，取回diamond服务器的地址列表<br/></td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;"><span style="font-size: 12px;">1、对配置进行持久化管理并对外提供restful接<br/>2、注解式编程，需要Spring编程环境<br/>3、支持配置的上传、下载<br/>4、支持分布式环境下的主备竞争</span></td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><p><span style="font-size: 12px;">统一管理不同环境、不同集群的配置</span><br/></p><p><span style="font-size: 12px;">配置修改实时生效（热发布）</span></p><p><span style="font-size: 12px;">版本发布管理</span></p><p><span style="font-size: 12px;">灰度发布</span></p><p><span style="font-size: 12px;">权限管理、发布审核、操作审计</span></p><p><span style="font-size: 12px;">客户端配置信息监控</span></p><p><span style="font-size: 12px;">提供Java和.Net原生客户端</span></p><p><span style="font-size: 12px;">提供开放平台API</span></p><p><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"></span></p></td></tr><tr><td class="xl64" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">集群<br/>数据同步</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">基于数据库和本地文件<br/>1、server写数据时，先将数据写入mysql，然后写入本地文件<br/>2、client订阅数据时，访问的是本地文件，不查询数据库，这样即使数据库出问题了，仍然不影响client的订阅<br/>3、通过比较client和server的数据的MD5值感知数据变化</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">基于zookeeper实现对配置更改的实时推送<br/>全局分布式一致性锁来实现主备统一部署、系统异常时的主备自主切换</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">全局分布式，基于Eureka作为服务注册中心</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">优点</td><td class="xl66" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">简单、可靠、易用</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">基于分布式的Zookeeper来实时推送稳定性、实效性、易用性上均优于diamond</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">携程开源巨作，功能强大，设计周到，Web界面美观实用，文档比较全。</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">缺点</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">1、无访问修改权限控制<br/>2、对于未来可能要做的基于SOA架构的服务注册发现，功能上有所欠缺</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">源码较多，阅读和使用起来相对较复杂</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">较新</span></td></tr><tr><td class="xl63" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="158">使用案例</td><td class="xl65" width="158" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">淘宝内部绝大多数系统的配置，由diamond来进行统一管理。</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="228.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px; word-break: break-all;">包括 百度、滴滴出行、银联、网易、拉勾网、苏宁易购、顺丰科技 等知名互联网公司正在使用!</td><td class="xl68" colspan="1" rowspan="1" valign="null" width="233.99999999999997" style="border-left-color: silver; border-top-color: silver; word-break: break-all;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">携程、转转、网易严选、航旅纵横、沪江网、5173、海航等</span></td></tr></tbody></table><p style="line-height: 1.5; margin: 10px auto;"><img src="{{site.assets_url}}img/20171224/1514121668514028415.png" title="1514121668514028415.png" alt="2017-12-24_212027.png"/>&nbsp;</p><p style="line-height: 1.5; margin: 10px auto;">详细对比，参见官方文档：</p><p style="white-space: normal;">1、<a href="https://github.com/ctripcorp/apollo/wiki/Apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%BB%8B%E7%BB%8D" target="_blank">https://github.com/ctripcorp/apollo/wiki/</a></p><p style="white-space: normal;">2、<a href="https://github.com/knightliao/disconf" target="_blank">https://github.com/knightliao/disconf</a></p><p style="white-space: normal;"><br/></p><h2 style="margin-top: 10px; margin-right: 0px; margin-left: 0px; font-size: 21px; background: rgb(32, 55, 95); color: rgb(255, 255, 255); text-indent: 15px; font-weight: bold; line-height: 1.5;">其他开源配置管理中间件</h2><table><colgroup><col width="96"/><col width="333"/></colgroup><tbody><tr class="firstRow"><td class="xl67" width="131.33333333333334" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">名称</td><td class="xl67" width="340.3333333333333" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">特性</td></tr><tr><td class="xl65" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="55.000000000000014">Xdiamond</td><td class="xl66" width="340.3333333333333" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">1、基于数据库做配置存储<br/>2、相对于diamond增加了权限设计，结合Secret key，保证配置的安全<br/>3、配置缓存在本地，防止应用因为网络问题而不能启动</td></tr><tr><td class="xl65" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="55.000000000000014">Qconf</td><td class="xl66" width="340.3333333333333" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">1、奇虎 360 内部分布式配置管理工具<br/>2、用C/C++编写，支持c/c++、shell、php、python 等语言<br/>3、应用Zookeeper做集群管理<br/>4、多进程的情况下，QPS 能够达到百万</td></tr><tr><td style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;" width="55.000000000000014">etcd</td><td width="340.3333333333333" style="font-size: 12px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; border-color: silver; border-collapse: collapse; padding: 3px;">1、使用Go语言编写，并通过Raft一致性算法处理日志复制以保证强一致性</td></tr><tr><td class="xl65" colspan="1" rowspan="1" style="border-left-color: silver; border-top-color: silver;" width="55.000000000000014"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">Spring Cloud Config Server</span></td><td class="xl65" colspan="1" rowspan="1" style="border-left-color: silver; border-top-color: silver;" width="320.3333333333333"><span style="font-size: 12px;">主要用于Spring&nbsp;cloud体系</span></td></tr><tr><td class="xl65" colspan="1" rowspan="1" style="border-left-color: silver; border-top-color: silver;" width="55.000000000000014"><span style="font-size: 12px;">CFG4J</span></td><td class="xl65" colspan="1" rowspan="1" style="border-left-color: silver; border-top-color: silver;" width="320.3333333333333"><p style="white-space: normal;"><a href="http://www.cfg4j.org/" style="font-size: 12px; text-decoration: underline;"><span style="font-size: 12px;">http://www.cfg4j.org/</span></a></p><p style="white-space: normal;"><span style="font-size: 12px;">只支持java，容易和spring集成。</span></p></td></tr><tr><td class="xl65" colspan="1" rowspan="1" style="border-left-color: silver; border-top-color: silver;" width="55.000000000000014"><span style="font-size: 12px;">OWNER</span></td><td class="xl65" colspan="1" rowspan="1" style="border-left-color: silver; border-top-color: silver;" width="320.3333333333333"><p style="white-space: normal;"><a href="http://owner.aeonbits.org/docs/loading-strategies/" style="font-size: 12px; text-decoration: underline;"><span style="font-size: 12px;">http://owner.aeonbits.org/docs/loading-strategies/</span></a></p><p style="white-space: normal;"><span style="font-size: 12px;">只支持java，容易和spring集成。</span></p></td></tr></tbody></table></div><p><br/></p><p>综合对比，我觉得&nbsp;携程的Apollo&nbsp;是最先进的，功能最强大和完善，文档也写得清楚。其次是 Disconf，它比Apollo早诞生一年，可能要比Apollo成熟一点，但是Apollo的人气有超越Disconf的趋势，GitHub上的watch和star数量已经接近Disconf了。</p><p><br/></p>