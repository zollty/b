---
layout: ue
title: MySQL 5.7安装和初始化
category: 数据库技术_综合
tags: MySQL
keywords: "MySQL"
---

<div style="white-space: pre-wrap;"><span style="font-size: 22px;">一、WINDOWS下安装</span></div><div style="white-space: pre-wrap;">详细步骤，参见这个文档：</div><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-install-archive.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/windows-install-archive.html</span></a></div><p style="white-space: pre-wrap;">文档中，涉及以下几个小结：</p><p style="white-space: pre-wrap;"><br/></p><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-extract-archive.html"><span style="color: rgb(223, 64, 42);">2.3.5.1 Extracting the Install Archive</span></a></div><p style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">——解压，然后配置环境变量（也可以不配置，配置只是为了方便执行命令）</span></p><p style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);"><br/></span></p><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-create-option-file.html"><span style="color: rgb(223, 64, 42);">2.3.5.2 Creating an Option File</span></a></div><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">——创建my.ini配置文件，可以放到安装目录下，也可以放到</span><span style="background-color: rgb(255, 255, 255);">C:\WINDOWS或者C:\，内容如下：</span></div><div style="white-space: pre-wrap;">[mysqld]</div><div style="white-space: pre-wrap;"># set basedir to your installation path</div><div style="white-space: pre-wrap;"><span style="color: rgb(223, 64, 42);">basedir</span>=D:/C/dev-solft/mysql-5.7.18-winx64</div><div style="white-space: pre-wrap;"># set datadir to the location of your data directory</div><div style="white-space: pre-wrap;"><span style="color: rgb(223, 64, 42);">datadir</span>=D:/C/dev-solft/mydata/data</div><div style="white-space: pre-wrap;"># add by zollty</div><p style="white-space: pre-wrap;">explicit_defaults_for_timestamp=true</p><p style="white-space: pre-wrap;"><br/></p><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-select-server.html"><span style="color: rgb(0, 116, 163);">2.3.5.3 Selecting a MySQL Server Type</span></a></div><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-initialize-data-directory.html"><span style="color: rgb(223, 64, 42);">2.3.5.4 Initializing the Data Directory</span></a></div><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">——以管理员身份运行cmd.exe，执行如下命令：</span></div><div style="white-space: pre-wrap;">mysqld --initialize-insecure</div><p style="white-space: pre-wrap;">至此，安装结束，下面是启动。</p><p style="white-space: pre-wrap;"><br/></p><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-server-first-start.html"><span style="color: rgb(223, 64, 42);">2.3.5.5 Starting the Server for the First Time</span></a></div><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">——以管理员身份运行cmd.exe，执行如下命令：</span></div><div style="white-space: pre-wrap;">mysqld --console</div><div style="white-space: pre-wrap;">输入一堆东西，只要没错就行了，查看进程，多了一个<span style="color: rgb(223, 64, 42);">mysqld.exe的进程</span></div><div style="white-space: pre-wrap;">（加上--console是为了在console中显示log）</div><p style="white-space: pre-wrap;">如果不加--console，则为后台启动，可以关掉cmd窗口</p><p style="white-space: pre-wrap;"><br/></p><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-start-command-line.html"><span style="color: rgb(223, 64, 42);">2.3.5.6 Starting MySQL from the Windows Command Line</span></a></div><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">运行如下命令：</span></div><div style="white-space: pre-wrap;">mysql -u root --skip-password</div><div style="white-space: pre-wrap;">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;新密码&#39;;</div><div style="white-space: pre-wrap;">注意：5.7.6之前版本修改密码的方式不一样：</div><div style="white-space: pre-wrap;">As of MySQL 5.7.6, use ALTER USER:</div><div style="white-space: pre-wrap;">mysql&gt; <span style="color: rgb(223, 64, 42);">ALTER USER user IDENTIFIED BY &#39;new_password&#39;;</span></div><div style="white-space: pre-wrap;">Before 5.7.6, use SET PASSWORD:</div><div style="white-space: pre-wrap;">mysql&gt; <span style="color: rgb(223, 64, 42);">SET PASSWORD FOR user = PASSWORD(&#39;new_password&#39;);</span></div><div style="white-space: pre-wrap;"><span style="color: rgb(223, 64, 42);">关闭mysqld.exe进程：</span></div><p style="white-space: pre-wrap;">mysqladmin -u root -p shutdown</p><p style="white-space: pre-wrap;"><br/></p><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-installation-windows-path.html"><span style="color: rgb(0, 116, 163);">2.3.5.7 Customizing the PATH for MySQL Tools</span></a></div><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-start-service.html"><span style="color: rgb(223, 64, 42);">2.3.5.8 Starting MySQL as a Windows Service</span></a></div><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">——命令如下：</span></div><div style="white-space: pre-wrap;">mysqld --install（随windows启动）</div><div style="white-space: pre-wrap;">mysqld --install-manual（手动启动，作用不大，手动启动直接mysqld即可，没必要安装服务）</div><p style="white-space: pre-wrap;">mysqld --remove（移除服务）</p><p style="white-space: pre-wrap;"><br/></p><p style="white-space: pre-wrap;"><span style="color: rgb(0, 116, 163);"><a href="https://dev.mysql.com/doc/refman/5.7/en/windows-testing.html">2.3.5.9 Testing The MySQL Installation</a></span></p><p style="white-space: pre-wrap;"><br/></p><div style="white-space: pre-wrap;"><span style="font-size: 22px;">二、Debian/Ubuntu Linux下安装</span></div><div style="white-space: pre-wrap;">参见：</div><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/linux-installation-debian.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/linux-installation-debian.html</span></a></div><p style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);"><br/></span></p><p style="white-space: pre-wrap;"><strong><span style="color: rgb(57, 57, 57);">方式一</span></strong><span style="color: rgb(57, 57, 57);">：apt-get</span></p><p style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">参见：</span></p><p style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);"><a href="https://dev.mysql.com/downloads/repo/apt/">https://dev.mysql.com/downloads/repo/apt/</a>（下载地址：</span><span style="color: rgb(57, 57, 57);"><a href="https://repo.mysql.com//mysql-apt-config_0.8.9-1_all.deb">https://repo.mysql.com//mysql-apt-config_0.8.9-1_all.deb</a></span><span style="color: rgb(57, 57, 57);"> </span><span style="color: rgb(57, 57, 57);">）</span></p><p style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);"><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/">https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/</a></span><span style="color: rgb(57, 57, 57);"> </span></p><p style="white-space: pre-wrap;"><strong><span style="color: rgb(57, 57, 57);"><br/></span></strong></p><p style="white-space: pre-wrap;"><strong><span style="color: rgb(57, 57, 57);">方式二</span></strong><span style="color: rgb(57, 57, 57);">： 下载 对应系统的tar包：</span>mysql-server_MVER-DVER_CPU.deb-bundle.tar</p><p style="white-space: pre-wrap;">下载地址：<a href="https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-server_5.7.20-1ubuntu16.04_amd64.deb">https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-community-server_5.7.20-1ubuntu16.04_amd64.deb</a> </p><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">执行以下命令即可：</span></div><div style="white-space: pre-wrap;">tar -xvf mysql-server_MVER-DVER_CPU.deb-bundle.tar</div><div style="white-space: pre-wrap;">sudo apt-get install libaio1</div><div style="white-space: pre-wrap;">sudo apt-get install libnuma1</div><div style="white-space: pre-wrap;">sudo dpkg-preconfigure mysql-community-server_*.deb</div><div style="white-space: pre-wrap;">sudo dpkg -i mysql-{common,community-client,client,community-server,server}_*.deb</div><div style="white-space: pre-wrap;">如果有报错，执行：</div><div style="white-space: pre-wrap;">sudo apt-get -f install</div><div style="white-space: pre-wrap;">然后再次执行上一次的安装命令即可。</div><div style="white-space: pre-wrap;">解疑：mysql-client和mysql-server是什么关系，可以不安装mysql-client吗？</div><div style="white-space: pre-wrap;">回答：mysql-client用于使用命令行方式连接mysql服务器，其实是一个CLI Client，建议安装。</div><div style="white-space: pre-wrap;">The mysql-client package allows you to connect to a MySQL server. It will give you the &quot;mysql&quot; command-line program.</div><div style="white-space: pre-wrap;">The mysql-server package allows you to run a MySQL server which can host multiple databases and process queries on those databases. It will give you the MySQL daemon, a.k.a. mysqld.</div><div style="white-space: pre-wrap;">The &quot;MySQL&quot; package probably includes both of the above.</div><div style="white-space: pre-wrap;">If you just need to connect to a remote server and run queries, install just mysql-client. If you need to host a database, install the client and server.</div><p style="white-space: pre-wrap;"><span style="font-size: 22px;"><br/></span></p><p style="white-space: pre-wrap;"><span style="font-size: 22px;">三、rpm包安装</span></p><p style="white-space: pre-wrap;"><br/></p><p style="white-space: pre-wrap;">下载 mysql***.tar 包，例如：MySQL-5.6.42-1.el6.x86_64.rpm-bundle.tar</p><p style="white-space: pre-wrap;">然后 tar xf 解压，只需依次 使用rpm -ivh命令 安装 server、devel、client、shared即可。<br/></p><p style="white-space: pre-wrap;">安装好之后，service mysql start 启动服务。注意，安装server时，会初始化root密码，安装信息里面会有如下提示：</p><p>A RANDOM PASSWORD HAS BEEN SET FOR THE MySQL root USER !</p><p>You will find that password in &#39;/root/.mysql_secret&#39;.</p><p style="white-space: pre-wrap;"><br/></p><p style="white-space: pre-wrap;"><span style="font-size: 22px;">四、初始化</span></p><div style="white-space: pre-wrap;">参见：<a href="https://dev.mysql.com/doc/refman/5.7/en/tutorial.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/tutorial.html</span></a></div><div style="white-space: pre-wrap;"><span style="color: rgb(57, 57, 57);">1、创建数据库</span></div><div style="white-space: pre-wrap;">CREATE DATABASE mydb</div><div style="white-space: pre-wrap;">DEFAULT CHARACTER SET utf8</div><div style="white-space: pre-wrap;">DEFAULT COLLATE utf8_general_ci;</div><div style="white-space: pre-wrap;">2、创建用户，并授权</div><div style="white-space: pre-wrap;">参见：</div><div style="white-space: pre-wrap;"><a href="https://dev.mysql.com/doc/refman/5.7/en/adding-users.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/adding-users.html</span></a></div><div style="white-space: pre-wrap;">CREATE USER &#39;zollty&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123456&#39;;</div><div style="white-space: pre-wrap;">GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER,INDEX,REFERENCES ON mydb.* TO &#39;zollty&#39;@&#39;localhost&#39;;</div><p>注意，localhost只能在本地使用，如果想不限制hostname，可以设置为 %，例如：</p><p>SET PASSWORD FOR &#39;root&#39;@&#39;%&#39; = PASSWORD(&#39;new_password&#39;);</p><p><br/></p><p><br/></p><p>四、MySQL 5.6版本 在Linux下安装后root登录</p><p>安装过程省略。在安装结束后会有这么一段提示：</p><p>A RANDOM PASSWORD HAS BEEN SET FOR THE MySQL root USER !</p><p>You will find that password in &#39;/root/.mysql_secret&#39;.</p><p>打开这个文件查看root的密码。</p><p>然后登录：</p><p>$ mysql -u root -p</p><p>输入密码即可。</p><p>然后修改root的密码：</p><p>mysql &gt;&nbsp;SET PASSWORD = PASSWORD(&#39;123456&#39;);</p><p>详见官方文档：<a href="https://dev.mysql.com/doc/refman/5.6/en/default-privileges.html#default-privileges-assigning-root-account-passwords">https://dev.mysql.com/doc/refman/5.6/en/default-privileges.html#default-privileges-assigning-root-account-passwords</a> </p><p><br/></p><p><br/></p><p><br/></p>