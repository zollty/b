---
layout: ue
title: NodeJS下的包管理npm的安装、更新和发布
category: 前端技术_JS、CSS等
tags: NodeJS,npm
keywords: "npm更新,npm发布"
---

<p><span style="font-size: 20px;">npm官方教程</span><br/></p><p>很详细，看一遍就懂了：</p><p><a href="https://docs.npmjs.com/getting-started/what-is-npm">https://docs.npmjs.com/getting-started/what-is-npm</a> </p><p><br/></p><p>package.json属性的详细说明：</p><p><a href="https://docs.npmjs.com/files/package.json">https://docs.npmjs.com/files/package.json</a></p><p><br/></p><p>临时使用淘宝镜像：</p><p>npm xxxxxxx --registry=https://registry.npm.taobao.org</p><p><br/></p><p><span style="font-size: 20px;">npm 关于 --save-dev 和 --save 的区别</span></p><p>--save 会把依赖包 添加到 package.json 文件 <strong>dependencies </strong>键下；<br/>--save-dev 则添加到 package.json 文件 <strong>devDependencies </strong>键下</p><p><br/></p><p><span style="font-size: 20px;">yarn安装并使用淘宝源：</span></p><p>&gt;&nbsp;<strong>cnpm install -g yarn</strong></p><p>....</p><p>&gt; <strong>yarn config get registry</strong></p><p>https://registry.yarnpkg.com</p><p>&gt; <strong>yarn config set registry https://registry.npm.taobao.org</strong></p><p>yarn config v1.7.0</p><p>success Set &quot;registry&quot; to &quot;https://registry.npm.taobao.org&quot;.</p><p>Done in 0.06s.</p><p><br/></p><p><br/></p><p><span style="font-size: 20px;">1、npm更新已安装的包</span></p><p>首先，检查更新：</p><p>$&nbsp;cnpm install -g npm-check-updates</p><p># 查看更新</p><p>$ ncu -g</p><p># 结果如下</p><p>&nbsp;@vue/cli&nbsp; 3.0.0-rc.2&nbsp; →&nbsp; 3.0.0-rc.3</p><p>&nbsp;webpack&nbsp; &nbsp; &nbsp; &nbsp;4.12.0&nbsp; →&nbsp; &nbsp; &nbsp; 4.15.0</p><p>然后更新 webpack，即重新安装就行了：</p><p>$ cnpm install -g webpack</p><p><br/></p><p><strong>在项目下更新模块：</strong></p><p>1、方式一，检查并自动更新</p><p># 查看哪些需要更新</p><p>$ ncu</p><p># 执行更新，更新所有包</p><p>$ ncu -a</p><p>2、方式二，手动更新版本</p><p>手动修改package.json里的版本号，然后执行</p><p>$ npm update</p><p>或者</p><p>$ npm update &lt;指定模块&gt;</p><p style="white-space: normal;">或者</p><p style="white-space: normal;">$ npm update &lt;指定模块@指定版本&gt;</p><p>$ npm update webpack@2.3.3</p><p># 重新安装，最新版本<br/></p><p>$ npm install webpack@latest -S</p><p><br/></p><p>注意，这种手动更新的方式，package.json, package-lock.json等地方都可能要修改，update并不会自动更新这些文件里面的版本号。</p><p><br/></p><p><span style="font-size: 20px;">2、安装和强制安装</span></p><p>$ npm install &lt;packageName&gt;</p><p>安装之前，npm install会先检查，node_modules目录之中是否已经存在指定模块。</p><p>如果存在，就不再重新安装了，即使远程仓库已经有了一个新版本，也是如此。</p><p><br/></p><p>如果你希望，一个模块不管是否安装过，npm 都要强制重新安装，可以使用-f或--force参数。</p><p>$ npm install &lt;packageName&gt; --force</p><p><br/></p><p><span style="font-size: 20px;">3、将 自己写的js 包发布到npm仓库</span></p><p>参见官方教程：<br/></p><p><a href="https://docs.npmjs.com/getting-started/publishing-npm-packages">https://docs.npmjs.com/getting-started/publishing-npm-packages</a> </p><p><br/></p><p>补充几句：</p><p>先注册账号，然后登陆：</p><p>$&nbsp;npm login</p><p>1）带organization名的模块，发布的时候，如果报错，可以如下：<br/></p><p>$ npm publish --access=public</p><p>2）发布的时候，给版本指导一个tag，例如beta：</p><p>$&nbsp;npm publish --tag beta</p><p>（如果不加tag，默认的tag就是 latest）</p><p>npm install &lt;somepkg&gt;的时候，默认用带latest tag版本，如果想安装其他tag的版本，可以如下：</p><p>$ npm install &lt;somepkg&gt;@&lt;tag&gt;</p><p>3）使用命令行来更新版本号（它最大的好处是和git关联，自动给git打tag并commit）<br/></p><p># patch的意思是最后一位小版本号+1，例如v1.0.0，patch之后就是1.0.1</p><p># -m的作用是在给git打tag的时候，附上commit</p><p>$&nbsp;npm version patch -m &quot;Upgrade&quot;</p><p>详细说明参见：<a href="https://docs.npmjs.com/cli/version">https://docs.npmjs.com/cli/version</a> </p><p><br/></p><p><br/></p>