---
layout: ue
title: Spring中Bean初始化逻辑
category: JavaEE技术
tags: Spring
keywords: "Spring,Bean初始化"
---

<p><br/></p><p><span style="font-size: 16px;">可<span style="line-height: 1.5;">参考文章：</span></span></p><p><span style="font-size: 16px;"><a target="_blank" href="http://997004049-qq-com.iteye.com/blog/1729793" style="color: rgb(188, 42, 77); text-decoration-line: underline;">Spring Bean 生命周期</a></span></p><p><span style="font-size: 16px;"><a target="_blank" href="http://cache.baiducontent.com/c?m=9f65cb4a8c8507ed4fece7631046893b4c4380143fd3d1027fa3c215cc79080b0035bfed70724b58c4c37e6401ab540cb4ad636f764573f1c0999549deb1972d2a8a2134721e8d4711d81aadcb4d26c62a945af4bb5cbafaa63dd1f39395c855238813582bd7b1ca4d01649a38a44971b4b198384e034bfcb6633ba411246fc47e1ca14788a26f2f4196f7ad1e0c9e7b87205080ae45e06946e853f3081a541ffc0df75b0d606bb3097ca218&p=882a9543d2860af31bbcd02d02148d&newp=8b2a971b898111a058eb90685b5f88231610db2151d6d711218bd1&user=baidu&fm=sc&query=postProcessBeforeInitialization+postProcessBeforeInstantiation&qid=&p1=3" style="color: rgb(16, 138, 198); text-decoration-line: underline;">Spring容器-Bean的生命周期</a>&nbsp;</span></p><p><span style="font-size: 16px;"><a target="_blank" href="http://www.iteye.com/topic/1122859" style="color: rgb(16, 138, 198); text-decoration-line: underline;">Spring开闭原则的表现-BeanPostProcessor扩展点-1</a></span></p><p><br/></p><p>一次调试打印出来的堆栈如下：</p><p><span style="font-size: 14px;">PropertyPlaceholderConfigurer.<strong>afterPropertiesSet</strong>() line: 42<span style="white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).<strong>invokeInitMethods</strong>(String, Object, RootBeanDefinition) line: 1687<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).<strong>initializeBean</strong>(String, Object, RootBeanDefinition) line: 1624<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).doCreateBean(String, RootBeanDefinition, Object[]) line: 555<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).<strong>createBean</strong>(String, RootBeanDefinition, Object[]) line: 483<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">AbstractBeanFactory$1.getObject() line: 306<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(DefaultSingletonBeanRegistry).getSingleton(String, ObjectFactory&lt;?&gt;) line: 230<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(AbstractBeanFactory).doGetBean(String, Class&lt;T&gt;, Object[], boolean) line: 302<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">DefaultListableBeanFactory(AbstractBeanFactory).getBean(String, Class&lt;T&gt;) line: 202<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">PostProcessorRegistrationDelegate.<strong>invokeBeanFactoryPostProcessors</strong>(ConfigurableListableBeanFactory, List&lt;BeanFactoryPostProcessor&gt;) line: <strong>149<span style="font-size: 14px; white-space: pre;">	</span></strong></span></p><p><span style="font-size: 14px;">ClassPathXmlApplicationContext(AbstractApplicationContext).<strong>invokeBeanFactoryPostProcessors</strong>(ConfigurableListableBeanFactory) line: <strong>686<span style="font-size: 14px; white-space: pre;">	</span></strong></span></p><p><span style="font-size: 14px;">ClassPathXmlApplicationContext(AbstractApplicationContext).<strong>refresh</strong>() line: 524<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><br/></p><p><br/></p><p><span style="font-size: 14px;">PropertyPlaceholderConfigurer.loadProperties(Properties) line: 37<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">PropertyPlaceholderConfigurer(PropertiesLoaderSupport).mergeProperties() line: 157<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">PropertyPlaceholderConfigurer(PropertyResourceConfigurer).<strong>postProcessBeanFactory</strong>(ConfigurableListableBeanFactory) line: 80<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">PostProcessorRegistrationDelegate.<strong>invokeBeanFactoryPostProcessors</strong>(Collection&lt;BeanFactoryPostProcessor&gt;, ConfigurableListableBeanFactory) line: <strong>281</strong><span style="font-size: 14px; white-space: pre;">	</span></span></p><p><span style="font-size: 14px;">PostProcessorRegistrationDelegate.<strong>invokeBeanFactoryPostProcessors</strong>(ConfigurableListableBeanFactory, List&lt;BeanFactoryPostProcessor&gt;) line: <strong>161<span style="font-size: 14px; white-space: pre;">	</span></strong></span></p><p><span style="font-size: 14px;">ClassPathXmlApplicationContext(AbstractApplicationContext).<strong>invokeBeanFactoryPostProcessors</strong>(ConfigurableListableBeanFactory) line: <strong>686<span style="font-size: 14px; white-space: pre;">	</span></strong></span></p><p><span style="font-size: 14px;">ClassPathXmlApplicationContext(AbstractApplicationContext).<strong>refresh</strong>() line: 524<span style="font-size: 14px; white-space: pre;">	</span></span></p><p><br/></p><p>&nbsp;根据上面的堆栈信息，可以得知，调用顺序如下：</p><p><br/></p><p><span style="font-weight: 700; font-size: 14px;">refresh --&nbsp;<span style="font-weight: 700; font-size: 14px;">invokeBeanFactoryPostProcessors（0） --&nbsp;<span style="font-weight: 700; font-size: 14px;">invokeBeanFactoryPostProcessors（0,1）line:149 --&nbsp;<span style="font-weight: 700; font-size: 14px;">createBean --&nbsp;<span style="font-weight: 700; font-size: 14px; color: rgb(192, 0, 0);">initializeBean </span><span style="font-weight: 700; font-size: 14px;">--&nbsp;<span style="font-weight: 700; font-size: 14px;">invokeInitMethods --&nbsp;<span style="font-weight: 700; font-size: 14px; color: rgb(192, 0, 0);">afterPropertiesSet </span><span style="font-weight: 700; font-size: 14px;">--&nbsp;<span style="font-weight: 700; font-size: 14px;">invokeBeanFactoryPostProcessors（0,1）line:161 <span style="font-weight: 700; font-size: 14px;">--&nbsp;<span style="font-weight: 700; font-size: 14px; color: rgb(192, 0, 0);">postProcessBeanFactory</span></span></span></span></span></span></span></span></span></span></p><p><br/></p><p><br/></p><p><strong><span style="font-size: 16px; font-family: verdana, geneva;"><span style="color: rgb(128, 0, 128);">容器启动时</span>：</span></strong></p><p><strong><span style="font-size: 16px; font-family: verdana, geneva;">最先调用</span></strong></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: verdana, geneva; font-size: 16px;">&nbsp; &nbsp; BeanFactoryPostProcessor</span></p><p><span style="font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;<strong>postProcessBeanFactory</strong>()&nbsp;</span></p><p>&nbsp;</p><p><span style="font-size: 16px; font-family: verdana, geneva;"><strong><span style="color: rgb(128, 0, 128);">getBean时</span>：</strong></span></p><p><span style="font-size: 16px; font-family: verdana, geneva;"><strong><span style="color: rgb(128, 0, 128);">实例化之后</span>调用</strong>：</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; InstantiationAwareBeanPostProcessor</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;<strong>postProcessPropertyValues()</strong></span></p><p>&nbsp;</p><p><span style="font-family: verdana, geneva; font-size: 16px; line-height: 1.5;"><strong>初始化时</strong>：</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<strong>属性注入（setter）</strong></span></p><p>&nbsp;</p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; BeanNameAware</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;setBeanName()&nbsp;</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; BeanFactoryAware</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;setBeanFactory()&nbsp;</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; ApplicationContextAware</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;setApplicationContext()</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp;&nbsp;</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; BeanPostProcessor</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt;<strong>postProcessBeforeInitialization()</strong></span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; InitializingBean</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;afterPropertiesSet()</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp;<strong>&nbsp;init-method</strong>属性</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; BeanPostProcessor</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;<strong>postProcessAfterInitialization()</strong></span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp;</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; DiposibleBean</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;destory()&nbsp;</span></p><p><span style="font-size: 16px; font-family: verdana, geneva;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<strong>destroy-method</strong>属性</span></p><pre class="brush:java;toolbar:false">BeanFactoryPostProcessor&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//Spring&nbsp;IoC容器允许BeanFactoryPostProcessor在容器实际实例化任何其它的bean之前读取配置元数据，并有可能修改它。&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//同时BeanFactoryPostProcessor的回调比BeanPostProcessor要早&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;postProcessBeanFactory(ConfigurableListableBeanFactory&nbsp;arg)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
InstantiationAwareBeanPostProcessorAdapter&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;其适配器类：InstantiationAwareBeanPostProcessor&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//实例化Bean之前调用&nbsp;（Bean构造函数前）&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;postProcessBeforeInstantiation(Class&lt;?&gt;&nbsp;beanClass,&nbsp;String&nbsp;beanName)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//实例化Bean之后调用&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;postProcessAfterInstantiation(Object&nbsp;bean,&nbsp;String&nbsp;beanName)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;PropertyValues&nbsp;postProcessPropertyValues(PropertyValues&nbsp;pvs,&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PropertyDescriptor[]&nbsp;pds,&nbsp;Object&nbsp;bean,&nbsp;String&nbsp;beanName)&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
BeanPostProcessor&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//实例化、依赖注入完毕，在初始化之前调用，完成一些定制的初始化任务&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;postProcessBeforeInitialization(Object&nbsp;bean,&nbsp;String&nbsp;beanName)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//实例化、依赖注入、初始化完毕时执行&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;postProcessAfterInitialization(Object&nbsp;bean,&nbsp;String&nbsp;beanName)</pre><p><span style="font-size: large; line-height: 27px;">BeanFactoryPostProcessor和BeanPostProcessor都是Spring初始化bean的扩展点。两个接口非常相似。</span></p><p><span style="font-size: large; line-height: 27px;">BeanFactoryPostProcessor可以在postProcessBeanFactory()中对bean的定义（配置元数据）进行处理，而BeanPostProcessor不可以。</span></p><p><span style="font-size: large; line-height: 27px;">同时BeanFactoryPostProcessor的回调比BeanPostProcessor要早。</span></p><p>&nbsp;<a target="_blank" href="http://blog.csdn.net/mn11201117/article/details/24986325" style="color: rgb(16, 138, 198); text-decoration-line: underline;">http://blog.csdn.net/mn11201117/article/details/24986325</a></p><p><a target="_blank" href="http://blog.csdn.net/xiao_jun_0820/article/details/7242379" style="color: rgb(16, 138, 198); text-decoration-line: underline;">http://blog.csdn.net/xiao_jun_0820/article/details/7242379</a></p><p>&nbsp;</p><p><strong><span style="font-size: 18px;">实例1：</span></strong></p><p><span style="font-size: 16px;">百度文库：</span></p><p><span style="font-size: 16px;"><a target="_blank" href="http://jingyan.baidu.com/article/17bd8e521f7af385ab2bb8f3.html" style="color: rgb(16, 138, 198); text-decoration-line: underline;">spring bean的生命周期是怎样的</a></span></p><p>&nbsp;&nbsp;</p><p><strong><span style="font-size: 18px;">实例2（重要）：</span></strong></p><p>Bean的完整生命周期经历了各种方法调用，这些方法可以划分为以下几类：&nbsp;</p><p>1、Bean自身的方法：</p><p>　　这个包括了Bean本身调用的方法和通过配置文件中&lt;bean&gt;的init-method和destroy-method指定的方法</p><p>&nbsp;</p><p>2、Bean级生命周期接口方法：</p><p>　　这个包括了BeanNameAware、BeanFactoryAware、InitializingBean和DiposableBean这些接口的方法</p><p>&nbsp;</p><p>3、容器级生命周期接口方法：</p><p>　　这个包括了InstantiationAwareBeanPostProcessor 和 BeanPostProcessor 这两个接口实现，一般称它们的实现类为“后处理器”。</p><p>&nbsp;</p><p>4、工厂后处理器接口方法：</p><p>　　这个包括了AspectJWeavingEnabler, ConfigurationClassPostProcessor, CustomAutowireConfigurer等等非常有用的工厂后处理器　　接口的方法。工厂后处理器也是容器级的。在应用上下文装配配置文件之后立即调用。</p><p>&nbsp;</p><p>我们用一个简单的Spring Bean来演示一下Spring Bean的生命周期。&nbsp;</p><p>1、首先是一个简单的Spring Bean，调用Bean自身的方法和Bean级生命周期接口方法，</p><p>为了方便演示，它<span style="color: rgb(128, 0, 128); font-size: 16px;"><strong>实现了BeanNameAware、BeanFactoryAware、InitializingBean和DiposableBean这4个接口，</strong></span></p><p><span style="line-height: 24px;">【对于BeanFactoryAware和BeanNameAware接口，第一个接口让bean感知容器（即BeanFactory实例，从而以此获取该容器配置的其他bean对象），而后者让bean获得配置文件中对应的配置名称。<span style="color: rgb(128, 0, 128);">在一般情况下用户不需要关心这两个接口。如果bean希望获得容器中的其他bean，可以通过属性注入的方式引用这些bean。如果bean希望在运行期获知在配置文件中的Bean名称，可以简单的将名称作为属性注入</span></span></p><p>综上所述，我们认为除非编写一个基于spring之上的扩展框架插件或者子项目之类的东西，否则用户完全可以抛开以上4个bean生命周期的接口类</p><p>&nbsp;</p><p>但BeanPostProcessor接口却不一样，它不要求bean去继承它，它可以完全像插件一样注册到spring容器中，为容器提供额外的功能。<span style="color: rgb(128, 0, 128);">spring充分利用了BeanPostProcessor对bean进行加工处理（SpringAOP以此为基础)</span>】<br/></p><p>&nbsp;</p><p>同时有2个方法，对应配置文件中&lt;bean&gt;的init-method和destroy-method。如下：</p><pre class="brush:java;toolbar:false">package&nbsp;springBeanTest;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;import&nbsp;org.springframework.beans.BeansException;&nbsp;&nbsp;
&nbsp;&nbsp;import&nbsp;org.springframework.beans.factory.BeanFactory;&nbsp;&nbsp;
&nbsp;&nbsp;import&nbsp;org.springframework.beans.factory.BeanFactoryAware;&nbsp;&nbsp;
&nbsp;&nbsp;import&nbsp;org.springframework.beans.factory.BeanNameAware;&nbsp;&nbsp;
&nbsp;&nbsp;import&nbsp;org.springframework.beans.factory.DisposableBean;&nbsp;&nbsp;
&nbsp;&nbsp;import&nbsp;org.springframework.beans.factory.InitializingBean;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;public&nbsp;class&nbsp;Person&nbsp;implements&nbsp;BeanFactoryAware,&nbsp;BeanNameAware,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InitializingBean,&nbsp;DisposableBean&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;name;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;address;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;int&nbsp;phone;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BeanFactory&nbsp;beanFactory;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;beanName;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Person()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【构造器】调用Person的构造器实例化&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getName()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;name;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setName(String&nbsp;name)&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【注入属性】注入属性name&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.name&nbsp;=&nbsp;name;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getAddress()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;address;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setAddress(String&nbsp;address)&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【注入属性】注入属性address&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.address&nbsp;=&nbsp;address;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getPhone()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;phone;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setPhone(int&nbsp;phone)&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【注入属性】注入属性phone&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.phone&nbsp;=&nbsp;phone;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;Person&nbsp;[address=&quot;&nbsp;+&nbsp;address&nbsp;+&nbsp;&quot;,&nbsp;name=&quot;&nbsp;+&nbsp;name&nbsp;+&nbsp;&quot;,&nbsp;phone=&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;phone&nbsp;+&nbsp;&quot;]&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这是BeanFactoryAware接口方法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setBeanFactory(BeanFactory&nbsp;arg)&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.println(&quot;【BeanFactoryAware接口】调用BeanFactoryAware.setBeanFactory()&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.beanFactory&nbsp;=&nbsp;arg;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这是BeanNameAware接口方法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setBeanName(String&nbsp;arg)&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【BeanNameAware接口】调用BeanNameAware.setBeanName()&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.beanName&nbsp;=&nbsp;arg;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这是InitializingBean接口方法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;afterPropertiesSet()&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.println(&quot;【InitializingBean接口】调用InitializingBean.afterPropertiesSet()&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;这是DiposibleBean接口方法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;destroy()&nbsp;throws&nbsp;Exception&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【DiposibleBean接口】调用DiposibleBean.destory()&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;通过&lt;bean&gt;的init-method属性指定的初始化方法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;myInit()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【init-method】调用&lt;bean&gt;的init-method属性指定的初始化方法&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;通过&lt;bean&gt;的destroy-method属性指定的初始化方法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;myDestory()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;【destroy-method】调用&lt;bean&gt;的destroy-method属性指定的初始化方法&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;}</pre><p>2、接下来是演示BeanPostProcessor接口的方法，如下：</p><pre class="brush:java;toolbar:false">package&nbsp;springBeanTest;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.BeansException;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.factory.config.BeanPostProcessor;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;public&nbsp;class&nbsp;MyBeanPostProcessor&nbsp;implements&nbsp;BeanPostProcessor&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MyBeanPostProcessor()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super();&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;这是BeanPostProcessor实现类构造器！！&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Object&nbsp;postProcessAfterInitialization(Object&nbsp;arg,&nbsp;String&nbsp;arg)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;BeanPostProcessor接口方法postProcessAfterInitialization对属性进行更改！&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;arg;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Object&nbsp;postProcessBeforeInitialization(Object&nbsp;arg,&nbsp;String&nbsp;arg)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;BeanPostProcessor接口方法postProcessBeforeInitialization对属性进行更改！&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;arg;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
}</pre><p>如上，BeanPostProcessor接口包括2个方法postProcessAfterInitialization和postProcessBeforeInitialization，这两个方法的第一个参数都是要处理的Bean对象，第二个参数都是Bean的name。返回值也都是要处理的Bean对象。这里要注意。</p><p><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; ">3、</span><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;  font-size: 16px;"><strong><span style="color: rgb(128, 0, 128);">InstantiationAwareBeanPostProcessor 接口本质是BeanPostProcessor的子接口，一般我们继承Spring为其提供的适配器类InstantiationAwareBeanPostProcessorAdapter来使用它</span></strong></span><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; ">，如下：</span></p><pre class="brush:java;toolbar:false">package&nbsp;springBeanTest;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;import&nbsp;java.beans.PropertyDescriptor;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.BeansException;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.PropertyValues;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.factory.config.InstantiationAwareBeanPostProcessorAdapter;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;public&nbsp;class&nbsp;MyInstantiationAwareBeanPostProcessor&nbsp;extends&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InstantiationAwareBeanPostProcessorAdapter&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MyInstantiationAwareBeanPostProcessor()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super();&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;这是InstantiationAwareBeanPostProcessorAdapter实现类构造器！！&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;接口方法、实例化Bean之前调用&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Object&nbsp;postProcessBeforeInstantiation(Class&nbsp;beanClass,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;beanName)&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;InstantiationAwareBeanPostProcessor调用postProcessBeforeInstantiation方法&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;接口方法、实例化Bean之后调用&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Object&nbsp;postProcessAfterInitialization(Object&nbsp;bean,&nbsp;String&nbsp;beanName)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;InstantiationAwareBeanPostProcessor调用postProcessAfterInitialization方法&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bean;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;接口方法、设置某个属性时调用&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;PropertyValues&nbsp;postProcessPropertyValues(PropertyValues&nbsp;pvs,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PropertyDescriptor[]&nbsp;pds,&nbsp;Object&nbsp;bean,&nbsp;String&nbsp;beanName)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;InstantiationAwareBeanPostProcessor调用postProcessPropertyValues方法&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;pvs;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
}</pre><p>这个有3个方法，其中第二个方法postProcessAfterInitialization就是重写了BeanPostProcessor的方法。<span style="font-size: 16px;"><strong><span style="color: rgb(128, 0, 128);">第三个方法postProcessPropertyValues用来操作属性</span></strong></span>，返回值也应该是PropertyValues对象。</p><p>&nbsp;&nbsp;</p><p>4、演示工厂后处理器接口方法，如下：</p><pre class="brush:java;toolbar:false">package&nbsp;springBeanTest;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.BeansException;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.factory.config.BeanDefinition;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.factory.config.BeanFactoryPostProcessor;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.beans.factory.config.ConfigurableListableBeanFactory;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;public&nbsp;class&nbsp;MyBeanFactoryPostProcessor&nbsp;implements&nbsp;BeanFactoryPostProcessor&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MyBeanFactoryPostProcessor()&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super();&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;这是BeanFactoryPostProcessor实现类构造器！！&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;@Override&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;postProcessBeanFactory(ConfigurableListableBeanFactory&nbsp;arg)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;BeansException&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.println(&quot;BeanFactoryPostProcessor调用postProcessBeanFactory方法&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BeanDefinition&nbsp;bd&nbsp;=&nbsp;arg.getBeanDefinition(&quot;person&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bd.getPropertyValues().addPropertyValue(&quot;phone&quot;,&nbsp;&quot;&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}</pre><p>5、配置文件如下beans.xml，很简单，使用ApplicationContext,处理器不用手动注册：</p><pre class="brush:xml;toolbar:false;">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&lt;beans&nbsp;xmlns=&quot;http://www.springframework.org/schema/beans&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&nbsp;xmlns:p=&quot;http://www.springframework.org/schema/p&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;&nbsp;xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.2.xsd&quot;&gt;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;beanPostProcessor&quot;&nbsp;class=&quot;springBeanTest.MyBeanPostProcessor&quot;&gt;&lt;/bean&gt;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;instantiationAwareBeanPostProcessor&quot;&nbsp;class=&quot;springBeanTest.MyInstantiationAwareBeanPostProcessor&quot;&gt;&lt;/bean&gt;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;beanFactoryPostProcessor&quot;&nbsp;class=&quot;springBeanTest.MyBeanFactoryPostProcessor&quot;&gt;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bean&gt;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;person&quot;&nbsp;class=&quot;springBeanTest.Person&quot;&nbsp;init-method=&quot;myInit&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy-method=&quot;myDestory&quot;&nbsp;scope=&quot;singleton&quot;&nbsp;p:name=&quot;张三&quot;&nbsp;p:address=&quot;广州&quot;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p:phone=&quot;15900000000&quot;&nbsp;/&gt;&nbsp;&nbsp;&nbsp;
&lt;/beans&gt;</pre><p>6.测试</p><pre class="brush:java;toolbar:false">package&nbsp;springBeanTest;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.context.ApplicationContext;&nbsp;&nbsp;
&nbsp;import&nbsp;org.springframework.context.support.ClassPathXmlApplicationContext;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;public&nbsp;class&nbsp;BeanLifeCycle&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;现在开始初始化容器&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;ctx&nbsp;=&nbsp;new&nbsp;ClassPathXmlApplicationContext(&quot;springBeanTest/beans.xml&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;容器初始化成功&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//得到Preson，并使用&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;person&nbsp;=&nbsp;ctx.getBean(&quot;person&quot;,Person.class);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(person);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;现在开始关闭容器！&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((ClassPathXmlApplicationContext)ctx).registerShutdownHook();&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
}</pre><p>结果如下：</p><p>现在开始初始化容器</p><p>2014-5-18 15:46:20 org.springframework.context.support.AbstractApplicationContext prepareRefresh</p><p>信息: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@19a0c7c: startup date [Sun May 18 15:46:20 CST 2014]; root of context hierarchy</p><p>2014-5-18 15:46:20 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions</p><p>信息: Loading XML bean definitions from class path resource [springBeanTest/beans.xml]</p><p><span style="color: rgb(128, 0, 128);">&nbsp;</span></p><p><span style="color: rgb(128, 0, 128);">这是BeanFactoryPostProcessor实现类构造器!</span></p><p><span style="color: rgb(128, 0, 128);">BeanFactoryPostProcessor调用postProcessBeanFactory方法</span></p><p><span style="color: rgb(128, 0, 128);">这是BeanPostProcessor实现类构造器!!</span></p><p><span style="color: rgb(128, 0, 128);">这是InstantiationAwareBeanPostProcessorAdapter实现类构造器!!</span></p><p>&nbsp;</p><p>2014-5-18 15:46:20 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons</p><p>信息: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@9934d4: defining beans [beanPostProcessor,instantiationAwareBeanPostProcessor,beanFactoryPostProcessor,person]; root of factory hierarchy</p><p>&nbsp;</p><p><span style="color: rgb(128, 0, 128);">InstantiationAwareBeanPostProcessor调用postProcessBeforeInstantiation方法</span></p><p>【构造器】调用Person的构造器实例化</p><p><span style="color: rgb(128, 0, 128);">InstantiationAwareBeanPostProcessor调用postProcessPropertyValues方法</span></p><p>【注入属性】注入属性address</p><p>【注入属性】注入属性name</p><p>【注入属性】注入属性phone</p><p>【BeanNameAware接口】调用BeanNameAware.setBeanName()</p><p>【BeanFactoryAware接口】调用BeanFactoryAware.setBeanFactory()</p><p>BeanPostProcessor接口方法postProcessBeforeInitialization对属性进行更改!</p><p>【InitializingBean接口】调用InitializingBean.afterPropertiesSet()</p><p>【init-method】调用&lt;bean&gt;的init-method属性指定的初始化方法</p><p>BeanPostProcessor接口方法postProcessAfterInitialization对属性进行更改!</p><p><span style="color: rgb(128, 0, 128);">InstantiationAwareBeanPostProcessor调用postProcessAfterInitialization方法（这个位置感觉有问题，待解决）</span></p><p>容器初始化成功</p><p>Person [address=广州, name=张三, phone=110]</p><p>现在开始关闭容器!</p><p>【DiposibleBean接口】调用DiposibleBean.destory()</p><p>【destroy-method】调用&lt;bean&gt;的destroy-method属性指定的初始化方法&nbsp;</p><p>&nbsp;</p><p>图示如下：</p><p><img src="{{site.assets_url}}img/20171011/1507705906496063225.jpg" alt="1507705906496063225.jpg"/></p><p><br/></p>