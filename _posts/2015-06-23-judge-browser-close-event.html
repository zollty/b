---
layout: ue
title: 判断用户关闭浏览器-beforeunload事件
category: Web前端技术_JS、CSS等
tags: 浏览器
keywords: "判断关闭浏览器"
---

<p><span style="line-height: 1.8;">用beforeunload事件，在某些浏览器上（chrome、ie、firefox）可以监听到浏览器关闭操作，能够在关闭之前，弹出一个对话框，让用户选择是否关闭。代码如下：</span><br/></p><pre class="brush:js;toolbar:false">//提示用户是否离开此页面（关闭、刷新或者点击后退等）
window.addEventListener(&quot;beforeunload&quot;,&nbsp;function&nbsp;(e)&nbsp;{
&nbsp;&nbsp;var&nbsp;confirmationMessage&nbsp;=&nbsp;&#39;确定离开此页吗？本页不需要刷新或后退&#39;;

&nbsp;&nbsp;(e&nbsp;||&nbsp;window.event).returnValue&nbsp;=&nbsp;confirmationMessage;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Gecko&nbsp;and&nbsp;Trident
&nbsp;&nbsp;return&nbsp;confirmationMessage;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Gecko&nbsp;and&nbsp;WebKit
});</pre><p><br/></p><p>注意：该对话框只能起到提示、阻止关闭作用，如果用户选择 “YES” 关闭浏览器，我们无法在js中获得回调值。</p><p>参见mozilla官方文档：https://developer.mozilla.org/zh-CN/docs/Web/Events/beforeunload</p><p><br/></p><p>End.</p>
