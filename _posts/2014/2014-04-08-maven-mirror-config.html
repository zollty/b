---
layout: ue
title: Maven镜像（mirror）
category: Maven专题
tags: Maven
keywords: "Maven mirror,Maven镜像"
---

<p><span style="color: inherit; font-family: 黑体, SimHei; font-size: 22px; font-weight: 600;">1. Maven镜像（mirror）的概念、作用</span><br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;mirror相当于一个拦截器，它会拦截maven对remote repository的相关请求，把请求里的remote repository地址，重定向到mirror里配置的地址。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;如果仓库X可以提供仓库Y存储的所有内容，那么就可以认为X是Y的一个镜像。换句话说，任何一个可以从仓库Y获得的构件，都能够从它的镜像中获取。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Some reasons to use a mirror are:</strong></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p>There is a synchronized mirror on the internet that is geographically closer and faster<br/></p></li><li><p>You want to replace a particular repository with your own internal repository which you have greater control over</p></li><li><p>You want to run a repository manager to provide a local cache to a mirror and need to use its URL instead.</p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;例如， 有一个项目，需要在公司和住所都编码，并在项目pom.xml配置了A Maven库。在公司，是电信网络，访问A库很快，所以maven管理依赖和插件都从A库下载；在住所，是网通网络，访问A库很慢，但是访问B库很快。这时，在住所的setting.xml里，只要配置一下&lt;mirrors&gt;&lt;mirror&gt;....&lt;/mirror&gt;&lt;/mirrors&gt;，<span style="color: rgb(192, 0, 0);">让B库成为A库的mirror，即可不用更改项目pom.xml里对于A库的相关配置</span>。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;如果该镜像仓库需要认证，则配置setting.xml中的&lt;server&gt;&lt;/server&gt;即可。</p><p><br/></p><h3>2. 镜像配置<br/></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&lt;mirrorOf&gt;&lt;/mirrorOf&gt;标签里面放置的是要被镜像的Repository ID。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;为了满足一些复杂的需求，Maven还支持更高级的镜像配置：&nbsp;</p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p>&lt;mirrorOf&gt;*&lt;/mirrorOf&gt; 匹配所有远程仓库。&nbsp;</p></li><li><p>&lt;mirrorOf&gt;repo1,repo2&lt;/mirrorOf&gt; 匹配仓库repo1和repo2，使用逗号分隔多个远程仓库。&nbsp;</p></li><li><p>&lt;mirrorOf&gt;external:*,!repo1&lt;/miiroOf&gt; 匹配所有远程仓库，repo1除外，使用感叹号将仓库从匹配中排除。&nbsp;</p></li></ul><p>具体参见：<a href="http://maven.apache.org/guides/mini/guide-mirror-settings.html">http://maven.apache.org/guides/mini/guide-mirror-settings.html</a><br/></p><p><br/></p>