---
layout: ue
title: 我的Docker学习笔记
category: 程序员风采_技术人生
tags: Docker
keywords: "Docker学习笔记"
---

<p><br/> <span style="font-size: 20px;">Docker学习资料：</span><br/></p><div><div><div><div><br/><div><div>官方：http://docs.docker.com/userguide/<br/><div><div>中文：http://yeasy.gitbooks.io/docker_practice/content/introduction/what.html<br/><div><br/><div>一、Ubuntu下安装docker<br/><div><div>安装教程：http://docs.docker.com/installation/#installation<br/><div><br/> 系统安装好后<br/> vi /etc/environment<br/> 追加下面两行<br/> export http_proxy=&quot;http://172.17.18.84:8080&quot;<br/> export https_proxy=&quot;https://172.17.18.84:8080&quot;<br/> 保存<br/> sudo apt-get install docker.io（等待执行完成，装完后网络会因冲突中断）<br/> sudo service docker.io stop<br/> ip link del docker0 （网络恢复）<br/> vim /etc/default/docker.io<br/> 追加下面两行<br/> DOCKER_OPTS=&quot;--bip=10.0.42.1/20&quot;<br/> export http_proxy=&quot;http://172.17.18.84:8080&quot;<br/> 保存<br/> sudo service docker.io start<br/> ————————————————————————————————————————————————————<br/> 安装nsenter<br/> docker run --rm -v /usr/local/bin:/target jpetazzo/nsenter<br/> 验证安装是否成功<br/> which nsenter<br/> which docker-enter<br/> —————————————————————————————————————————————————————<br/></div></div><div><br/><div><div><br/><div><div>二、Docker基本操作<br/><div><div><br/><div><p>例如：</p><p>sudo docker run ...</p><p>$ sudo docker stop insane_babbage</p><br/> Commands:<br/> &nbsp;&nbsp;&nbsp; attach&nbsp;&nbsp;&nbsp; Attach to a running container<br/> &nbsp;&nbsp;&nbsp; <strong>build</strong>&nbsp;&nbsp;&nbsp;&nbsp; Build an image from a Dockerfile<br/> &nbsp;&nbsp;&nbsp; <strong>commit</strong>&nbsp;&nbsp;&nbsp; Create a new image from a container&#39;s changes<br/> &nbsp;&nbsp;&nbsp; cp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Copy files/folders from the containers filesystem to the host path<br/> &nbsp;&nbsp;&nbsp; diff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Inspect changes on a container&#39;s filesystem<br/> &nbsp;&nbsp;&nbsp; events&nbsp;&nbsp;&nbsp; Get real time events from the server<br/> &nbsp;&nbsp;&nbsp; export&nbsp;&nbsp;&nbsp; Stream the contents of a container as a tar archive<br/> &nbsp;&nbsp;&nbsp; history&nbsp;&nbsp; Show the history of an image<br/> &nbsp;&nbsp;&nbsp; <strong>images</strong>&nbsp;&nbsp;&nbsp; List images<br/> &nbsp;&nbsp;&nbsp; import&nbsp;&nbsp;&nbsp; Create a new filesystem image from the contents of a tarball<br/> &nbsp;&nbsp;&nbsp; info&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Display system-wide information<br/> &nbsp;&nbsp;&nbsp; inspect&nbsp;&nbsp; Return low-level information on a container<br/> &nbsp;&nbsp;&nbsp; kill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Kill a running container<br/> &nbsp;&nbsp;&nbsp; load&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Load an image from a tar archive<br/> &nbsp;&nbsp;&nbsp; login&nbsp;&nbsp;&nbsp;&nbsp; Register or Login to the docker registry server<br/> &nbsp;&nbsp;&nbsp; <strong>logs</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fetch the logs of a container<br/> &nbsp;&nbsp;&nbsp; port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lookup the public-facing port which is NAT-ed to PRIVATE_PORT<br/> &nbsp;&nbsp;&nbsp; pause&nbsp;&nbsp;&nbsp;&nbsp; Pause all processes within a container<br/> &nbsp;&nbsp;&nbsp; <strong>ps</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; List containers<br/> &nbsp;&nbsp;&nbsp; pull&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pull an image or a repository from the docker registry server<br/> &nbsp;&nbsp;&nbsp; push&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Push an image or a repository to the docker registry server<br/> &nbsp;&nbsp;&nbsp; restart&nbsp;&nbsp; Restart a running container<br/> &nbsp;&nbsp;&nbsp; rm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remove one or more containers<br/> &nbsp;&nbsp;&nbsp; rmi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remove one or more images<br/> &nbsp;&nbsp;&nbsp; <strong>run</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Run a command in a new container<br/> &nbsp;&nbsp;&nbsp; <strong>save</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Save an image to a tar archive<br/> &nbsp;&nbsp;&nbsp; search&nbsp;&nbsp;&nbsp; Search for an image in the docker index<br/> &nbsp;&nbsp;&nbsp; <strong>start</strong>&nbsp;&nbsp;&nbsp;&nbsp; Start a stopped container<br/> &nbsp;&nbsp;&nbsp; stop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Stop a running container<br/> &nbsp;&nbsp;&nbsp; tag&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Tag an image into a repository<br/> &nbsp;&nbsp;&nbsp; top&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lookup the running processes of a container<br/> &nbsp;&nbsp;&nbsp; unpause&nbsp;&nbsp; Unpause a paused container<br/> &nbsp;&nbsp;&nbsp; version&nbsp;&nbsp; Show the docker version information<br/> &nbsp;&nbsp;&nbsp; wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Block until a container stops, then print its exit code<br/><div><br/><div>1、保持bash运行容器<br/></div></div></div></div></div></div><div><pre class="prettyprint well">$&nbsp;sudo&nbsp;docker&nbsp;run&nbsp;-t&nbsp;-i&nbsp;ubuntu:14.04&nbsp;/bin/bash</pre>The <code><strong><span style="color:red;">-t</span></strong></code> flag assigns a pseudo-tty or terminal inside our new container
and the <code><strong><span style="color:red;">-i</span></strong></code> flag allows us to make an interactive connection by
grabbing the standard in (<code>STDIN</code>) of the container.<br/><div><br/><div><div>退出：<div><pre class="prettyprint well">root@af8bae53bdd3:/#&nbsp;exit</pre></div><div><div><code><span class="pln">2、以守护进程运行</span></code></div><div><code>A Daemonized Hello world<br/> $ sudo docker <strong><span style="color:red;">run -d</span></strong> ubuntu:14.04 /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;<br/> <br/> $ sudo docker ps<br/> CONTAINER ID&nbsp; IMAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMMAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PORTS NAMES<br/> 1e5535038e28&nbsp; ubuntu:14.04&nbsp; /bin/sh -c &#39;while tr&nbsp; 2 minutes ago&nbsp; Up 1 minute&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>insane_babbage</strong><br/> </code><div><div><div><br/><div>$ sudo docker ps -l</div></div><div><br/></div></div><div><code>查看输出</code><br/></div></div><div><code>$ sudo <strong><span style="color:red;">docker logs</span></strong> insane_babbage</code></div><div><code><br/> </code><div>停止容器<br/></div></div><div>$ sudo <strong><span style="color:red;">docker stop</span></strong> insane_babbage<br/><div><br/><div>查看指令的帮助：<br/><div>例如：$ sudo docker attach --help<br/></div></div></div><br/><div>命令详细说明和例子：<br/><div>http://docs.docker.com/reference/commandline/cli/<br/><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>