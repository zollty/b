---
layout: ue
title: 轻量级Java应用开发框架“ZolltyMVC”交流
category: Web服务器端开发技术
tags: ZolltyMVC,Java框架
keywords: "ZolltyMVC,Java框架"
---

<p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">ZolltyMVC</span><span style="font-size: 37px;color:#4F81BD">框架简介</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial"><br/></span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">ZolltyMVC是基于 Java 语言的极速 WEB 框架，核心设计目标是<span style="color:red;font-weight:bold">开发迅速</span>、代码量少、<span style="color:red;font-weight:bold">学习简单</span>、轻量级、易扩展。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">它在传统MVC框架的基础上做了大量优化和创新设计，<span style="color:red;font-weight:bold">以适应软件开发的个性化需求，提升了系统性能，具有更好的可扩展性</span>。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">如同Spring、StrutsMVC、JFinal、Argo（58同城自主开发的框架）一样，ZolltyMVC也完全开源，在Github、Google Code等都能找到。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">ZolltyMVC自从2013年发布第一个稳定版之后，目前已经更新到了 </span><span style="font-family:Arial;color:red;font-weight:bold">1.3.0.RELEASE</span><span style="font-family: Arial"> 版本，在多个项目中运行良好。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">经过长时间的运作与运行，证明ZolltyMVC是一个<span style="color:red;font-weight:bold">可靠的</span><span style="font-weight: bold">、</span><span style="color:red;font-weight:bold">高效的</span><span style="font-family: Arial">web框架。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">示例代码&nbsp; </span><span style="font-size:37px;color:#4F81BD">a controller demo</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">@</span><span style="font-size:19px;font-family:Arial;color:#FF0066">Controller</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">@</span><span style="font-size:19px;font-family:Arial;color:#FF0066">CBefore</span><span style="font-size: 19px;font-family: Arial">({PermissionCheck.class}) // before controller method execution</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">public class HelloWorldController {</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp; // </span><span style="font-size: 19px;font-family: 宋体">属性注入，支持按类型注入</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 19px;font-family: Arial">@</span><span style="font-size: 19px;font-family:Arial;color:#FF0066">Inject</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; private DiService diService;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; @</span><span style="font-size:19px;font-family:Arial;color:#FF0066">RequestMapping</span><span style="font-size: 19px;font-family: Arial">(&quot;/lesson1/hello-jsp&quot;)</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; public </span><span style="font-size:19px;font-family:Arial;color:blue">View</span><span style="font-size: 19px;font-family: Arial"> helloJsp() {</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Return a JSP View</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new </span><span style="font-size:19px;font-family:Arial;color:#FF0066">JspView</span><span style="font-size: 19px;font-family: Arial">(&quot;/lesson1/hello.jsp&quot;);</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; }</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; @</span><span style="font-size:19px;font-family:Arial;color:#FF0066">RequestMapping</span><span style="font-size: 19px;font-family: Arial">(&quot;</span><span style="font-size:19px;font-family:Arial;color:purple">POST</span><span style="font-size: 19px;font-family: Arial">:/user/{</span><span style="font-size:19px;font-family:Arial;color:blue">userName</span><span style="font-size: 19px;font-family: Arial">}&quot;) // Only allow POSTmethod </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; public </span><span style="font-size:19px;font-family:Arial;color:blue">View</span><span style="font-size: 19px;font-family: Arial"> helloSomeOne(@</span><span style="font-size:19px;font-family:Arial;color:#FF0066">URIParam</span><span style="font-size: 19px;font-family: Arial">(&quot;userName&quot;) String userName) {</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Get userName from URI</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new </span><span style="font-size:19px;font-family:Arial;color:#FF0066">JsonView</span><span style="font-size: 19px;font-family: Arial">(&quot;{\&quot;name\&quot;: \&quot;&quot;+</span><span style="font-size:19px;font-family:Arial;color:blue">userName</span><span style="font-size: 19px;font-family: Arial">+&quot;\&quot;}&quot;);</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">&nbsp;&nbsp;&nbsp; }</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 19px;font-family: Arial">}</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">ZolltyMVC</span><span style="font-size: 37px;color:#4F81BD">功能和特点</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">1. Web层：它是一个通用</span><span style="color:red">纯Servlet请求控制转发器</span>（<span style="font-family: Arial;color:red;font-weight:bold">RESTful URL 路由</span>，代码简洁、效率非常高），基于原生RESTful设计，且<span style="color:red">支持各种定制化URL方案</span>。扩展功能<span style="color:red">支持拦截器</span>配置，支持ModelDriven（视图层<span style="font-family:Arial;color:red;font-weight:bold">VO自动封装</span>），支持<span style="color:red">多视图模板</span>（Jsp View、<span style="font-family:Arial;color:red">JSON View等</span>）。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">2. Bean：它是一个轻量级</span><span style="font-family:Arial;color:red;font-weight:bold">IOC/DI框架</span>，可以独立应用于<span style="font-family:Arial;color:red">Standard Java</span>，强大的<span style="color:red">支持各种形式加载Bean</span>，强大的<span style="color:red">可扩展性和可集成性</span>。（只支持单实例，功能比Spring的要精简很多，但是一般够用了）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">3. 对于</span><span style="color:red">中小型项目，</span>它完全<span style="color:red">可以替代SpringMVC</span>、<span style="font-family: Arial;color:red">Spring+Struts</span>，已经经过多个企业级生产项目的考验，<span style="color:red">高效稳定运行于Tomcat、Jetty、WebSphere、JBOSS服务器</span>。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">4. 小巧，代码量少。只有</span><span style="color:red">几百kb</span>，比Spring要精简很多，而且<span style="color:red">常用功能一应俱全</span>，<span style="color:red">并增加了一些nice的功能</span>。</p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">与</span><span style="font-size:37px;color:#4F81BD">Spring</span><span style="font-size:37px;color:#4F81BD">框架功能的对比</span></p><p><br/></p><p style="language:zh-CN;margin-top:0pt;margin-bottom:0pt;text-align:left;
direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style=" ">下图是</span><span style="font-family: Arial; ">Spring</span><span style=" ">框架的主要功能：</span></p><p><img src="http://ires.qiniudn.com/my/img/tech/spring-framework.png" alt="spring-framework.png"/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">ZolltyMVC</span><span style="color:red;font-weight:bold">去掉了</span>其中的<span style="font-family: Arial;color:#FF0066;font-weight:bold">ORM</span><span style="font-weight: bold">、</span><span style="font-family:Arial;color:#FF0066;font-weight:bold">JEE</span>的部分，并且将<span style="font-family: Arial;font-weight: bold">AOP</span>和<span style="font-family: Arial">Web</span>合并，只支持有限的<span style="font-family: Arial">AOP</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">JavaEE</span><span style="font-size:37px;color:#4F81BD">中的两个</span><span style="font-size:37px;color:#4F81BD">MVC</span><span style="font-size: 37px;color:#4F81BD">模型</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;;font-weight: bold">MVC Model 1</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;">&nbsp; </span><span style="font-size: 20px;font-family: 宋体">即传统的JSP+JavaBean，目前已经很少用了。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;;font-weight: bold">MVC Model 2</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;">&nbsp; </span><span style="font-size: 20px;font-family: 宋体">该模型的标准是：</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;">&nbsp; </span><span style="font-size: 20px;font-family: &#39;Courier New&#39;">JSP（</span><span style="font-size: 20px;color:#FF0066">视图View，用户界面</span><span style="font-size: 20px;font-family: 宋体">）</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;">&nbsp;</span><span style="font-size: 20px;font-family: &#39;Courier New&#39;">+Servlet（</span><span style="font-size:37px;color:#FF0066">控制器Controller，输入处理</span><span style="font-size: 20px;font-family: 宋体">）</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;">&nbsp;</span><span style="font-size: 20px;font-family: &#39;Courier New&#39;">+JavaBean（</span><span style="font-size:37px;color:#FF0066">模型Model，功能逻辑</span><span style="font-size: 20px;font-family: 宋体">）。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 20px;font-family: &#39;Courier New&#39;">&nbsp; </span><span style="font-size: 20px;font-family: 宋体">由于Java EE中的JavaBean（EJB2.0）太复杂了，所以该模型最流行的一个版本是</span><span style="font-size: 20px;font-family: &#39;Courier New&#39;;font-weight: bold">SSH</span><span style="font-size: 20px;font-family: 宋体">，即Struts+Spring+Hibernate。</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">控制反转（</span><span style="font-size:37px;color:#4F81BD">IOC </span><span style="font-size:37px;color:#4F81BD">）</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size:20px;font-family:&#39;Courier New&#39;;color:#0070C0">public class</span> <span style="font-size:20px;font-family:&#39;Courier New&#39;;color:red">PersonService</span><span style="font-size: 32px;font-family: &#39;Courier New&#39;"> {</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:20px;font-family:&#39;Courier New&#39;;color:#0070C0">private</span> <span style="font-size:20px;font-family:&#39;Courier New&#39;;color:red">PersonDao</span> <span style="font-size: 32px;font-family: &#39;Courier New&#39;">pDao</span><span style="font-size: 32px;font-family: &#39;Courier New&#39;"> = </span><span style="font-size:20px;font-family:&#39;Courier New&#39;;color:#0070C0">new</span> <span style="font-size:20px;font-family:&#39;Courier New&#39;;color:red">PersonDao</span><span style="font-size:20px;font-family:&#39;Courier New&#39;;color:red">Impl</span><span style="font-size: 32px;font-family: &#39;Courier New&#39;">();</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:20px;font-family:&#39;Courier New&#39;;color:#0070C0">public void</span><span style="font-size: 32px;font-family: &#39;Courier New&#39;"> save(Person person){</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 32px;font-family: &#39;Courier New&#39;">pDao.save</span><span style="font-size: 32px;font-family: &#39;Courier New&#39;">(person);</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: &#39;Courier New&#39;">}</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 32px;font-family: &#39;Courier New&#39;">PersonDao</span> <span style="font-size: 32px;font-family: 宋体">是在应用内部创建及维护的。所谓控制反转就是应用本身不负责依赖对象的创建及维护，依赖对象的创建及维护是由外部容器负责的。这样控制权就由应用转移到了外部容器，控制权的转移就是所谓反转。</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">依赖注入 DI </span><span style="font-size: 37px;color:#4F81BD">(</span> <span style="font-size: 37px;color:#4F81BD">Dependency Injection</span> <span style="font-size: 37px;color:#4F81BD">)</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 27px;font-family: 宋体">当我们把依赖对象交给外部容器负责创建，那么</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">PersonServiceBean</span> <span style="font-size: 27px;font-family: 宋体">类可以改成如下：</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">public class </span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">PersonService</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;"> {</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; private </span><span style="font-size:27px;font-family:&#39;Courier New&#39;;color:red">PersonDao</span> <span style="font-size: 27px;font-family: &#39;Courier New&#39;">personDao</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;"> ;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; //</span><span style="font-size: 27px;font-family: 宋体">通过构造器函数，</span><span style="font-size:27px;color:red">让容器把创建好的依赖对象注入进来</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; //</span><span style="font-size: 27px;font-weight: bold">也可以使用</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;;font-weight: bold">setter</span><span style="font-size: 27px;font-weight: bold">方法进行注入</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; </span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">public </span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">PersonService</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">(</span><span style="font-size:27px;font-family:&#39;Courier New&#39;;color:red">PersonDao</span> <span style="font-size:27px;font-family:&#39;Courier New&#39;;color:red">personDao</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">){</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">this.personDao</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">=</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">personDao</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">;</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; }&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; public void save(Person person){</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">personDao.save</span><span style="font-size: 27px;font-family: &#39;Courier New&#39;">(person);</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">&nbsp; }</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 27px;font-family: &#39;Courier New&#39;">}</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 27px;font-family: 宋体">所谓依赖注入就是指：</span><span style="font-size:27px;color:red">在运行期，由外部容器动态地将依赖对象注入到组件中</span><span style="font-size: 27px;font-family: 宋体">。</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">ZolltyMVC注入依赖对象</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 32px;font-family: Arial">1</span><span style="font-size: 32px;font-family: 宋体">、基本类型对象注入：</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&lt;bean id=&quot;stu2&quot; class=&quot;</span><span style="font-size: 32px;font-family: Arial">com.zollty.Student</span><span style="font-size: 32px;font-family: Arial">&quot;&gt;</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&nbsp;&nbsp; </span><span style="font-size:20px;font-family:Arial;color:#00B050">&nbsp;//</span><span style="font-size:20px;color:#00B050">属性</span><span style="font-size:20px;font-family:Arial;color:#00B050">setter</span><span style="font-size:20px;color:#00B050">方法注入</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&nbsp;&nbsp; &lt;</span><span style="font-size:20px;font-family:Arial;color:red">property</span><span style="font-size: 32px;font-family: Arial"> name=&quot;</span><span style="font-size:20px;font-family:Arial;color:blue">name</span><span style="font-size: 32px;font-family: Arial">&quot; value=&quot;&quot; /&gt;</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&lt;/bean&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 32px;font-family: Arial">2</span><span style="font-size: 32px;font-family: 宋体">、注入其他</span><span style="font-size: 32px;font-family: Arial">bean：</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&lt;bean id=&quot;stu2&quot; class=&quot;</span><span style="font-size: 32px;font-family: Arial">com.zollty.Student</span><span style="font-size: 32px;font-family: Arial">&quot;&gt;</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&nbsp;&nbsp; </span><span style="font-size:20px;font-family:Arial;color:#00B050">&nbsp;//</span><span style="font-size:20px;color:#00B050">属性</span><span style="font-size:20px;font-family:Arial;color:#00B050">setter</span><span style="font-size:20px;color:#00B050">方法注入</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&nbsp;&nbsp; &lt;</span><span style="font-size:20px;font-family:Arial;color:red">property</span><span style="font-size: 32px;font-family: Arial"> name=&quot;</span><span style="font-size: 32px;font-family: Arial">stuDao</span><span style="font-size: 32px;font-family: Arial">&quot; </span><span style="font-size:20px;font-family:Arial;color:red">ref</span><span style="font-size: 32px;font-family: Arial">=&quot;</span><span style="font-size:20px;font-family:Arial;color:blue">stuDao</span><span style="font-size: 32px;font-family: Arial">&quot; /&gt;</span></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&lt;/bean&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style="margin-top: 0px; margin-bottom: 0px; text-align: left; direction: ltr; unicode-bidi: embed; vertical-align: baseline; line-height: normal; "><span style="font-size: 32px;font-family: Arial">&lt;bean id=&quot;</span><span style="font-size:20px;font-family:Arial;color:blue">stuDao</span><span style="font-size: 32px;font-family: Arial">&quot; class=&quot;</span><span style="font-size: 32px;font-family: Arial">com.zollty.StuDao</span><span style="font-size: 32px;font-family: Arial">&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">依赖注入</span><span style="font-size:37px;color:#4F81BD">-</span><span style="font-size: 37px;color:#4F81BD">自动装配</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-weight: bold">在</span><span style="font-family: Arial;font-weight: bold">Java</span><span style="font-weight: bold">代码中使用</span><span style="font-family: Arial;font-weight: bold">@</span><span style="font-family: Arial;font-weight: bold">Autowired</span><span style="font-weight: bold">或</span><span style="font-family: Arial;font-weight: bold">@Resource</span><span style="font-weight: bold">注解方式进行装配，这两个注解的区别是：</span><span style="font-family: Arial;font-weight: bold">@</span><span style="font-family: Arial;font-weight: bold">Autowired</span> <span style="font-weight: bold">默认按类型装配</span><span style="font-weight: bold">，@Resource</span><span style="font-weight: bold">默认按名称装配，当找不到与名称匹配的</span><span style="font-family: Arial;font-weight: bold">bean</span><span style="font-weight: bold">才会按类型装配。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family:Arial;color:blue">&nbsp; @</span><span style="font-family:Arial;color:blue">Autowired</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family:Arial;color:blue">&nbsp; private </span><span style="font-family:Arial;color:blue">PersonDao</span><span style="font-family:Arial;color:blue">&nbsp; </span><span style="font-family:Arial;color:blue">personDao</span><span style="font-family:Arial;color:blue">;</span><span style="font-size:21px;font-family:Arial;color:#00B050">//</span><span style="font-size:21px;color:#00B050">用</span><span style="font-size:21px;color:#00B050">于字段上</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp; @</span><span style="font-size: 21px;font-family: Arial">Autowired</span><span style="font-size: 21px;font-family: 宋体">注解是按类型装配依赖对象，默认情况下它要求依赖对象必须存在，如果允许</span><span style="font-size: 21px;font-family: Arial">null</span><span style="font-size: 21px;font-family: 宋体">值，可以设置它</span><span style="font-size: 21px;font-family: Arial">required</span><span style="font-size: 21px;font-family: 宋体">属性为</span><span style="font-size: 21px;font-family: Arial">false</span><span style="font-size: 21px;font-family: 宋体">。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp; @Resource</span><span style="font-size: 21px;font-family: 宋体">注解和</span><span style="font-size: 21px;font-family: Arial">@</span><span style="font-size: 21px;font-family: Arial">Autowired</span><span style="font-size: 21px;font-family: 宋体">一样，也可以标注在字段或属性的</span><span style="font-size: 21px;font-family: Arial">setter</span><span style="font-size: 21px;font-family: 宋体">方法上，但它默认按名称装配。名称可以通过</span><span style="font-size: 21px;font-family: Arial">@Resource</span><span style="font-size: 21px;font-family: 宋体">的</span><span style="font-size: 21px;font-family: Arial">name</span><span style="font-size: 21px;font-family: 宋体">属性指定，如果没有指定</span><span style="font-size: 21px;font-family: Arial">name</span><span style="font-size: 21px;font-family: 宋体">属性，当注解标注在字段上，即默认取字段的名称作为</span><span style="font-size: 21px;font-family: Arial">bean</span><span style="font-size: 21px;font-family: 宋体">名称寻找依赖对象，当注解标注在属性的</span><span style="font-size: 21px;font-family: Arial">setter</span><span style="font-size: 21px;font-family: 宋体">方法上，即默认取属性名作为</span><span style="font-size: 21px;font-family: Arial">bean</span><span style="font-size: 21px;font-family: 宋体">名称寻找依赖对象。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp; </span><span style="font-size:21px;font-family:Arial;color:blue">@Resource(name=“</span><span style="font-size:21px;font-family:Arial;color:blue">personDao</span><span style="font-size:21px;font-family:Arial;color:blue">Impl</span><span style="font-size:21px;font-family:Arial;color:blue">”)</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp; private </span><span style="font-size: 21px;font-family: Arial">PersonDao</span><span style="font-size: 21px;font-family: Arial">&nbsp; </span><span style="font-size: 21px;font-family: Arial">personDao</span><span style="font-size: 21px;font-family: Arial">;/</span><span style="font-size:21px;font-family:Arial;color:#00B050">/</span><span style="font-size:21px;color:#00B050">用于字段上</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family:Arial;color:red;font-weight:bold">ZolltyMVC中的用法如下：</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp; </span><span style="font-size:21px;font-family:Arial;color:blue">@</span><span style="font-size:21px;font-family:Arial;color:blue;font-weight:bold">Inject</span><span style="font-size:21px;font-family:Arial;color:blue">(“</span><span style="font-size: 21px;font-family:Arial;color:blue">personDao</span><span style="font-size:21px;font-family:Arial;color:blue">Impl</span><span style="font-size:21px;font-family:Arial;color:blue">”)</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp; private </span><span style="font-size: 21px;font-family: Arial;font-weight: bold">PersonDao</span> <span style="font-size: 21px;font-family: Arial">personDao</span><span style="font-size: 21px;font-family: Arial">;</span> <span style="font-size: 21px;font-family: Arial">/</span><span style="font-size:21px;font-family:Arial;color:#00B050">/</span><span style="font-size:21px;color:#00B050">用于字段上</span></p><p><br/></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">RESTful URI</span><span style="font-size: 37px;color:#4F81BD">路由</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">1、URI路由</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; 基本实现方式是：</span><span style="font-family: Arial;font-weight: bold">Servlet控制转发（超级Servlet）</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">2、RESTful 架构风格</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; REST，即</span><span style="font-weight: bold">表述性状态转移</span>（Representational State Transfer）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">要深入理解REST，需要理解REST的五个关键词：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">资源（Resource）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">资源的表述（Representation）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">状态转移（State Transfer）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">统一接口（Uniform Interface）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">超文本驱动（Hypertext Driven）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">资源是一种看待服务器的方式，即，将服务器看作是由很多离散的资源组成。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">资源的表述可以有多种格式，例如HTML/XML/JSON/图片/视频/音频等等。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">统一接口，例如HTTP/1.1协议。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">7个HTTP方法：GET/POST/PUT/DELETE/PATCH/HEAD/OPTIONS</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">ZolltyMVC支持原生RESTful，URL风格更简洁、优雅，比如：</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">http://www.oschina.net</span><span style="font-family:Arial;color:blue">/code</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">http://www.oschina.net/blog</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">http://www.oschina.net</span><span style="font-family:Arial;color:blue">/code/tag/jquery</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">http://www.oschina.net</span><span style="font-family:Arial;color:blue">/code/list?lang=java</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">对应ZolltyMVC的后端<span style="font-family: Arial;font-weight: bold">Controller</span>代码：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; // RESTful风格URL路由-</span><span style="color:red">限定为POST方式</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; @</span><span style="font-family: Arial;font-weight: bold">RequestMapping</span><span style="font-family: Arial">(&quot;</span><span style="font-family:Arial;color:red">POST</span><span style="font-family: Arial">:</span><span style="font-family: Arial;color:blue">/admin/login</span><span style="font-family: Arial">&quot;) </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; public View login(@HttpParam(&quot;loginvo&quot;) LoginVO loginvo){</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // ……省略</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new JspView(&quot;/admin/main.jsp&quot;); // 返回到JSP视图层</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; }</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">URI</span><span style="font-size:37px;color:#4F81BD">路由与</span><span style="font-size: 37px;color:#4F81BD">SpringMVC</span><span style="font-size:37px;color:#4F81BD">的区别</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">ZolltyMVC的控制器，是基于原生Servlet进行设计的。有类似于SpringMVC的地方，但是效率比SpringMVC要高很多！</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">比如，因为SpringMVC要支持多文件上传，其逻辑就比ZolltyMVC的HTTP请求处理<span style="color:red">逻辑要复杂</span>许多了。我对比了一下两者的算法复杂度，SpringMVC的算法复杂度至少是ZolltyMVC的n*10^2倍。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">而且还有一点，SpringMVC采用的是<span style="font-family:Arial;color:red">AntPathMatcher</span>的URL路径匹配算法，ZolltyMVC采用的是自己写的一个简洁的递归算法，实测它的<span style="color:red">匹配效率是ANT的几十倍</span>，<span style="color:blue">参见org.zollty.util.match.ZolltyPathMatcher.java, 及其单元测试用例</span>。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">另外，URI路由支持一些高级的“<span style="font-weight: bold">通配</span><span style="font-family: Arial">”功能。</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">例如：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; @RequestMapping(&quot;GET:</span><span style="font-family:Arial;color:purple">/user/</span><span style="font-family:Arial;color:red;font-weight:bold">{</span><span style="font-family:Arial;color:blue">userName</span><span style="font-family:Arial;color:red;font-weight:bold">}</span><span style="font-family: Arial">&quot;) </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; public View hello(@URIParam(&quot;userName&quot;) String uName) {</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new TextView(&quot;Hello &quot;+ uName);</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; }</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">这个“<span style="font-family:Arial;color:red">{}</span><span style="font-family: Arial">”号可以通配一个URI参数，而中括号“</span><span style="font-family:Arial;color:red">[]</span><span style="font-family: Arial">”可以通配多个“/”间隔的URI</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">视图模型</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">页面视图（View）</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; </span><span style="color:blue">视图可以是JSP、HTML、XML、模板、静态文件</span>等等，甚至可以<span style="color:blue">扩展自定义的View</span>。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; </span><span style="color:blue">例如我写了个ResourceView</span>，读取jar包中META-INF目录下的html页面）。这样做会非常方便，编程更为灵活。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">支持返回的类型包括（但不限于）如下类型：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial;font-weight: bold">JspView</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial;font-weight: bold">HtmlView</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial;font-weight: bold">TextView</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial;font-weight: bold">JsonView</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="color:#FF0066">视图用法举例：</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp; </span><span style="font-family: Arial;font-weight: bold">&nbsp;@RequestMapping</span><span style="font-family: Arial">(&quot;/admin/login&quot;)</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; </span><span style="font-family:Arial;color:purple">public</span> <span style="font-family: Arial;font-weight: bold">View</span><span style="font-family: Arial"> login(){</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 返回到JSP 视图层</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return </span><span style="font-family: Arial;color:purple">new</span> <span style="font-family: Arial;font-weight: bold">JspView</span><span style="font-family: Arial">(&quot;</span><span style="font-family:Arial;color:blue">/admin/main.jsp</span><span style="font-family: Arial">&quot;);</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; }</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">ModelDriven - 视图层参数自动封装</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">举个例子说明：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; </span><span style="font-family: Arial">@RequestMapping(&quot;</span><span style="font-family:Arial;color:blue">/lesson1/hello-catvo</span><span style="font-family: Arial">&quot;)</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; public View hello(</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Arial;font-weight: bold">@HttpParam</span><span style="font-family: Arial">(&quot;</span><span style="font-family:Arial;color:blue">cat</span><span style="font-family: Arial">&quot;) CatVO </span><span style="font-family:Arial;color:#FF0066">cat</span><span style="font-family: Arial">) { </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // </span>自动封装一个标准<span style="font-family: Arial">Bean</span>对象</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Arial">// </span>返回一个页面视图</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Arial">return new TextView(</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Hello &quot; + </span><span style="font-family:Arial;color:#FF0066">cat</span><span style="font-family: Arial">.getName() + &quot;, Age: &quot; + </span><span style="font-family:Arial;color:#FF0066">cat</span><span style="font-family: Arial">.getAge());</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; }</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">提示： <span style="font-family: Arial">@HttpParam</span>不仅可以接收 <span style="font-family: Arial">String </span>类型的参数，还<span style="color:#FF0066">可以接收对象参数</span>哦！ 比如 <span style="font-family: Arial">UserVO </span>，它会自动把里面的值封装</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">访问<span style="font-family: Arial">URL</span>示例： <span style="font-family: Arial">http://127.0.0.1:8080/zollty-mvc-demo</span><span style="font-family:Arial;color:blue">/lesson1/hello-catvo</span><span style="font-family: Arial;font-weight: bold">?name=Kitty&amp;age=27</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">面向切面编程（AOP）简介</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 32px;font-family: &#39;Courier New&#39;">&nbsp;&nbsp;AOP（</span><span style="font-size: 32px;font-family: &#39;Courier New&#39;;font-weight: bold">Aspect Oriented Programming</span><span style="font-size: 32px;font-family: 宋体">），也就是</span><span style="font-size: 32px;font-weight: bold">面向切面</span><span style="font-size: 32px;font-family: 宋体">编程，作为</span><span style="font-size: 32px;font-weight: bold">面向对象</span><span style="font-size: 32px;font-family: 宋体">编程的一种补充，专门用于处理系统中分布于各个模块（不同方法）中的交叉关注点的问题，在 Java EE 应用中，常常通过 AOP 来处理一些具有横切性质的系统级服务，如</span><span style="font-size: 32px;font-weight: bold">事务管理</span><span style="font-size: 32px;font-family: 宋体">、</span><span style="font-size: 32px;font-weight: bold">安全检查</span><span style="font-size: 32px;font-family: 宋体">、</span><span style="font-size: 32px;font-weight: bold">缓存、对象池管理</span><span style="font-size: 32px;font-family: 宋体">等。常见</span><span style="font-size:32px;font-family:&#39;Courier New&#39;;color:blue">AOP实现的途经是通过 AOP 框架自动创建的AOP代理（主要分为静态代理和动态代理）</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 32px;font-family: 宋体">举个例子：</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: &#39;Courier New&#39;">&nbsp; 有这样一个需求，对每个Controller方法</span><span style="font-weight: bold">记录其执行耗费的时间</span>。</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp; </span><span style="font-size: 21px;font-family: Arial;font-weight: bold">@RequestMapping</span><span style="font-size: 21px;font-family: Arial">(&quot;</span><span style="font-size:21px;font-family:Arial;color:red">POST</span><span style="font-size: 21px;font-family: Arial">:</span><span style="font-size:21px;font-family:Arial;color:blue">/admin/login</span><span style="font-size: 21px;font-family: Arial">&quot;) </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp; public View login(@HttpParam(&quot;loginvo&quot;) LoginVO loginvo){</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // ……省略</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new JspView(&quot;/admin/main.jsp&quot;); </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp; }</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">AOP</span><span style="font-size:37px;color:#4F81BD">和拦截器的类型</span></p><p><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">按执行顺序分：</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style=";font-weight: bold">在Controller的方法</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp;&nbsp;&nbsp; </span><span style=";font-weight: bold">执行之前</span><span style="">：</span><span style="color:#FF0066">MvcBefore</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp;&nbsp;&nbsp; </span><span style=";font-weight: bold">执行之后、渲染之前</span><span style="">：</span><span style="color:#FF0066">MvcBeforeRender</span><span style="">、</span><span style=";color:#FF0066">MvcAfterThrow</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp;&nbsp;&nbsp; </span><span style=";font-weight: bold">执行之后</span><span style="">：</span><span style="color:#FF0066">MvcAfter</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp;&nbsp;&nbsp; </span><span style=";font-weight: bold">执行前后</span><span style="">：</span><span style="color:#FF0066">MvcAround</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">拦截器按功能分为两类</span><span style="">： 1）</span><span style=";font-weight: bold">通用拦截器</span> <span style="">&nbsp;</span><span style="">2）</span><span style=";font-weight: bold">业务拦截器</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">拦截器按作用范围大小分为三类（在三个不同地方定义的拦截器</span><span style="">）： </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">1）</span><span style=";font-weight: bold">通用拦截器</span><span style="">：在AOP类上用 @</span><span style="">AOPMapping</span><span style="">({&quot;/admin/*&quot;}) </span><span style="">定义的拦截器，</span><span style="color:blue">作用范围为所有匹配的</span><span style="color:blue">URI</span><span style="">对应的controller</span><span style=""> method。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp;</span><span style="">&nbsp;&nbsp; </span><span style="">2）</span><span style=";font-weight: bold">Controller拦截器</span><span style="">：基于特定Controller来定义</span><span style="color:blue">Controller层面的拦截器</span><span style="">。在Controller类上用 </span><span style="">如@CBefore</span><span style="">({</span><span style="">HxxxBefore.class</span><span style="">})</span><span style="">标注</span> <span style="">的拦截器</span><span style="">。 </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">&nbsp; </span><span style="">3）</span><span style=";font-weight: bold">Controller</span> <span style=";font-weight: bold">Method拦截器</span><span style="">：</span><span style=";color:blue">基于某个Controller的特定Method</span><span style="">来定义方法层面的拦截器。在Controller类的@RequestMapping方法上用 </span><span style="">如@CBefore</span><span style="">({</span><span style="">HxxxBefore.class</span><span style="">})</span><span style="">标注</span> <span style="">的拦截器</span><span style="">。</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">基于注解的</span><span style="font-size:37px;color:#4F81BD">AOP</span><span style="font-size: 37px;color:#4F81BD">拦截器之 </span><span style="font-size:37px;color:#4F81BD">MvcBefore</span></p><p><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">MvcBefore 在执行 Controller Method 之前执行。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style=";color:#FF0066;font-weight:bold">业务场景</span><span style="">： </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">》Step 1. </span><span style="color:blue;font-weight:bold">权限检查</span><span style="">：</span><span style=";color:blue">检查session是否过期</span><span style="">。过期则直接返回错误视图</span><span style="">。 </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">》Step 2. </span><span style="">权限检查：</span><span style=";color:blue">检查是否有跨站点脚本攻击的非法参数</span><span style="">，如果有则返回错误视图</span><span style="">。 </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">》Step 3. </span><span style="color:blue;font-weight:bold">预处理</span><span style="">：</span><span style=";color:blue">读取请求信息、Cookie等，并做一些解析</span><span style="">后存入请求对象中，方便后续流程使用</span><span style="">。 </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">》Step 4. </span><span style="color:blue;font-weight:bold">日志记录</span><span style="">：</span><span style=";color:blue">记录请求信息</span><span style="">。 </span><span style="">可以做成异步处理</span><span style="">。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">可以有多个MvcBefore</span> <span style="">与Controller的方法相关联。按照先后顺序执行这些MvcBefore拦截器</span><span style="">。（</span><span style="">Controller层面的拦截器，其执行顺序要先于Method层面的拦截器。通用拦截器，理应最先执行，然后才执行业务拦截器</span><span style="">。） </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">执行顺序：通用拦截器、Controller拦截器、ControllerMethod拦截器。在每一级别上都是按从小到大先后顺序执行。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style=";font-weight: bold">错误处理</span><span style="">： </span><span style=";font-weight: bold">如果MvcBefore执行出错，可以返回一个View</span><span style="">，MVC框架会提交这个View，终止后续执行（后面的MvcBefore等都不会执行了）。 </span><span style="">如果MvcBefore抛出了未知异常，框架会catch异常并打印日志，并返回错误视图，终止后续执行</span><span style="">。</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">基于注解的</span><span style="font-size:37px;color:#4F81BD">AOP</span><span style="font-size: 37px;color:#4F81BD">拦截器之 </span><span style="font-size:37px;color:#4F81BD">MvcAround</span></p><p><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">MvcAround </span><span style="">在 执行</span><span style="">Controller Method</span><span style="">的前后 执行（把</span><span style="">Controller Method</span><span style="">包裹在</span><span style="">MvcAround</span><span style="">之中执行）。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style=";color:#FF0066;font-weight:bold">业务场景</span><span style="">： </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">》Step 1. </span><span style=";font-weight: bold">性能监控</span><span style="">：</span><span style=";color:blue">记录处理时间</span><span style="">，如果超时则打印</span><span style="">log</span><span style="">或者发送邮件。 </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">》Step 2. </span><span style=";font-weight: bold">开关</span><span style="">：如</span><span style="">OpenSessionInView</span><span style="">，在</span><span style=";color:blue">进入处理器打开</span><span style="color:blue">Session</span><span style="color:blue">，在完成后关闭</span><span style="color:blue">Session</span><span style="">。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="">定义了</span><span style="">MvcAround</span><span style="">的</span><span style="">Controller</span><span style="">的</span><span style="">method</span><span style="">，不会直接执行</span><span style="">Controller</span><span style="">的</span><span style="">method</span><span style="">，而是会调用</span><span style="">MvcAround</span><span style="">的方法， 在</span><span style="">MvcAround</span><span style="">的方法中再去调用</span><span style="">Controller</span><span style="">的</span><span style="">method</span><span style="">。 如果有多个</span><span style="">MvcAround</span><span style="">，则递归调用， 执行顺序：通用拦截器、</span><span style="">Controller</span><span style="">拦截器、</span><span style="">ControllerMethod</span><span style="">拦截器。在每一级别上都是按从小到大先后顺序执行。</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:6px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style=";font-weight: bold">错误处理</span><span style="">： </span><span style=";font-weight: bold">如果</span><span style=";font-weight: bold">MvcAround</span><span style=";font-weight: bold">返回</span><span style=";font-weight: bold">View</span><span style=";font-weight: bold">则终止程序执行</span><span style="">。 如果抛出了未知异常，框架会</span><span style="">catch</span><span style="">异常，如果定义了</span><span style="">MvcAfterThrow</span><span style="">则交由</span><span style="">MvcAfterThrow</span><span style="">进行处理，否则直接返回错误视图。</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">依赖注入（</span><span style="font-size:37px;color:#4F81BD">DI</span><span style="font-size: 37px;color:#4F81BD">）高级用法</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">用方法注解 注入对象：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial;font-weight: bold">@Inject</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">public void setUser(User user) {</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; this.user = user;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">}</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">还比如支持<span style="font-weight: bold">复合对象</span>：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;bean id=&quot;user2&quot; class=&quot;com.test.User &gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;</span><span style="font-family:Arial;color:blue">name</span><span style="font-family: Arial">&quot; value=&quot;zollty&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;</span><span style="font-family:Arial;color:blue">age</span><span style="font-family: Arial">&quot; value=&quot;26&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;</span><span style="font-family:Arial;color:blue">students</span><span style="font-family: Arial">&quot; &gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">list</span><span style="font-family: Arial">&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;jack&lt;/value&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;lily&lt;/value&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-family: Arial;font-weight: bold">list</span><span style="font-family: Arial">&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;/bean&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">还比如支持从方法中获取一个对象实例：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;bean id=&quot;</span><span style="font-family:Arial;color:blue">dataSource</span><span style="font-family: Arial">&quot; class=&quot;org.test.JndiCreator</span><span style="font-family:Arial;color:blue">#getDataSource</span><span style="font-family: Arial">&quot; &gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;</span><span style="font-family:Arial;color:blue">jndiName</span><span style="font-family: Arial">&quot; value=&quot;</span><span style="font-family:Arial;color:blue">jdbc/web</span><span style="font-family: Arial">&quot;/&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;/bean&gt;</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">使用</span><span style="font-size:37px;color:#4F81BD">JdbcTemplate</span><span style="font-size:37px;color:#4F81BD">进行数据库操作</span></p><p><br/></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">@Service</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">public class </span><span style="font-size: 21px;">PersonServiceImpl</span><span style="font-size: 21px;">&nbsp; </span><span style="font-size:21px;color:#0070C0">implements</span><span style="font-size: 21px;">&nbsp; </span><span style="font-size: 21px;">PersonService</span><span style="font-size: 21px;">&nbsp; {</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:#C00000">private </span><span style="font-size:21px;color:#C00000">JdbcTemplate</span> <span style="font-size:21px;color:#C00000">jdbcTemplate</span><span style="font-size:21px;color:#C00000">;</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:blue">@Resource</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:#0070C0">public void</span> <span style="font-size: 21px;">setDataSource</span><span style="font-size: 21px;">(</span><span style="font-size: 21px;">DataSource</span> <span style="font-size: 21px;">dataSource</span><span style="font-size: 21px;">) {</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:#0070C0">this.</span><span style="font-size: 21px;">jdbcTemplate</span><span style="font-size: 21px;"> = new </span><span style="font-size: 21px;">JdbcTemplate</span><span style="font-size: 21px;">(</span><span style="font-size: 21px;">dataSource</span><span style="font-size: 21px;">);</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp; }</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:#0070C0">public</span><span style="font-size: 21px;"> Person </span><span style="font-size: 21px;">getPerson</span><span style="font-size: 21px;">(Integer id){</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 21px;">RowMapper</span> <span style="font-size: 21px;">rowMapper</span><span style="font-size: 21px;"> = new </span><span style="font-size: 21px;">RowMapper</span><span style="font-size: 21px;">() {</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:#0070C0">public</span><span style="font-size: 21px;"> Object </span><span style="font-size: 21px;">mapRow</span><span style="font-size: 21px;">(</span><span style="font-size: 21px;">ResultSet</span> <span style="font-size: 21px;">rs</span><span style="font-size: 21px;">, </span><span style="font-size: 21px;">int</span> <span style="font-size: 21px;">rowNum</span><span style="font-size: 21px;">) throws </span><span style="font-size: 21px;">SQLException</span><span style="font-size: 21px;"> {</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp; Person </span><span style="font-size: 21px;">person</span><span style="font-size: 21px;"> = new Person();</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp; </span><span style="font-size: 21px;">person.setId</span><span style="font-size: 21px;">(</span><span style="font-size: 21px;">rs.getInt</span><span style="font-size: 21px;">(&quot;id&quot;));</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp; </span><span style="font-size: 21px;">person.setName</span><span style="font-size: 21px;">(</span><span style="font-size: 21px;">rs.getString</span><span style="font-size: 21px;">(&quot;name&quot;));</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp; return person;</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp; }</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:21px;color:#0070C0">return</span><span style="font-size: 21px;"> (Person) </span><span style="font-size: 21px;">jdbcTemplate.</span><span style="font-size:21px;color:#C00000">queryForObject</span><span style="font-size: 21px;">(</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;select * from person where id=?&quot;,&nbsp; new Object[]{id},&nbsp; </span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new </span><span style="font-size: 21px;">int</span><span style="font-size: 21px;">[]{</span><span style="font-size: 21px;">java.sql.Types.INTEGER</span><span style="font-size: 21px;">},&nbsp; </span><span style="font-size: 21px;">rowMapper</span><span style="font-size: 21px;">);</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">&nbsp;&nbsp;&nbsp; }</span></p><p style=";line-height:90%;margin-top:0;margin-bottom:5px;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;">}&nbsp;</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">高级选项 配置</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">在classpath目录下，新建一个<span style="font-family: Arial;font-weight: bold">zollty-mvc.xml</span>，内容类似下面：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; //指定class的扫描路径（用于识别注解配置），支持多个配置，支持扫描jar包</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">component-scan</span> <span style="font-family: Arial;color:blue">base-package</span><span style="font-family: Arial">=&quot;com.zollty.mvcdemo&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; //指定视图的路径的前缀及编码，可省略该配置，默认如下</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">mvc</span> <span style="font-family:Arial;color:blue">view-path</span><span style="font-family: Arial">=&quot;/WEB-INF/views&quot; </span><span style="font-family:Arial;color:blue">view-encoding</span><span style="font-family: Arial">=&quot;UTF-8&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; //配置 排除拦截的URI 的前缀和后缀</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">no-intercept</span> <span style="font-family: Arial;color:blue">prefix</span><span style="font-family: Arial">=&quot;/resources/,/pages/&quot; </span><span style="font-family:Arial;color:blue">suffix</span><span style="font-family: Arial">=&quot;.html,.js,.css&quot;/&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; //绑定外部的日志处理器（可以自定义），可省略该配置，默认为org.zollty.log.ConsoleLogger</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">logger</span> <span style="font-family:Arial;color:blue">class</span><span style="font-family: Arial">=&quot;org.zollty.log.Log4jLogger&quot; </span><span style="font-family:Arial;color:blue">level</span><span style="font-family: Arial">=&quot;TRACE&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp; </span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; //使用自定义的error页面，【可省略该配置，默认ZolltyMVC自动生成</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">errorPage</span> <span style="font-family:Arial;color:blue">path</span><span style="font-family: Arial">=&quot;/error.jsp&quot; /&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; &lt;!-- 引入其他配置文件，【支持多个配置】 --&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;font-weight: bold">import</span> <span style="font-family:Arial;color:blue">resource</span><span style="font-family: Arial">=&quot;classpath:external-beans.xml&quot; /&gt;</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size:37px;color:#4F81BD">Web</span><span style="font-size:37px;color:#4F81BD">部署配置</span></p><p><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline">对于Servlet 2.x以下版本的Web容器，需要配置web.xml，内容如下：</p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><br/></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;listener&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:21px;font-family:Arial;color:blue">listener-class</span><span style="font-size: 21px;font-family: Arial">&gt;org.zollty.framework.mvc.</span><span style="font-size:21px;font-family:Arial;color:#FF0066">ContextLoaderListener</span><span style="font-size: 21px;font-family: Arial">&lt;/listener-class&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;/listener&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;servlet&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:21px;font-family:Arial;color:blue">servlet-name</span><span style="font-size: 21px;font-family: Arial">&gt;zolltyMVC&lt;/servlet-name&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:21px;font-family:Arial;color:blue">servlet-class</span><span style="font-size: 21px;font-family: Arial">&gt;org.zollty.framework.mvc.</span><span style="font-size:21px;font-family:Arial;color:#FF0066">DispatcherServlet</span><span style="font-size: 21px;font-family: Arial">&lt;/servlet-class&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-size: 21px;font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:21px;font-family:Arial;color:blue">load-on-startup</span><span style="font-size: 21px;font-family: Arial">&gt;1&lt;/load-on-startup&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;/servlet&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;servlet-mapping&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;color:blue">servlet-name</span><span style="font-family: Arial">&gt;zolltyMVC&lt;/servlet-name&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-family: Arial;color:blue">url-pattern</span><span style="font-family: Arial">&gt;</span><span style="font-family:Arial;color:#FF0066">/app/*</span><span style="font-family: Arial">&lt;/url-pattern&gt;</span></p><p style=";margin-top:0;margin-bottom:0;text-align:left;direction:ltr;unicode-bidi:embed;vertical-align:baseline"><span style="font-family: Arial">&lt;/servlet-mapping&gt;</span></p><p><br/></p><p>Thanks! &nbsp; Q&amp;A</p>
