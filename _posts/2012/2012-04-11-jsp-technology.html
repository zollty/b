---
layout: ue
title: JSP技术
category: JavaEE技术
tags: JSP
keywords: "JSP技术"
---

<div><p><br/></p></div><div>1、include动作指令和jsp:include标签的使用</div><div><br/></div><div>特别注意其路径的书写方式。我相信有90%的程序员都会忽略一个细节：</div><div>以include动作指令为例，写法有二</div><div>&lt;%@ include file=&quot;/WEB-INF/views/common/taglibs.jsp&quot;%&gt;</div><div>&lt;%@ include file=&quot;../common/taglibs.jsp&quot;%&gt;</div><div>第一种是绝对路径，第二种是相对路径。这两种写法都正确。</div><div><br/></div><div>再看看html标签中的写法，以css文件的引入为例：</div><div>&lt;link href=&quot;../resources/css/reset.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt; 正确</div><div>&lt;link href=&quot;/resources/css/reset.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt; 错误</div><div>&lt;link href=&quot;/project/resources/css/reset.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt; 正确</div><div>&lt;link href=&quot;http://localhost:8080/project/resources/css/reset.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt; 正确</div><div>&lt;link href=&quot;&lt;%=request.getContextPath()%&gt;/resources/css/reset.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt; 正确</div><div>&lt;link href=&quot;&lt;c:url value=&#39;/resources/css/reset.css&#39; /&gt;&quot;&nbsp;rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&nbsp;&nbsp;/&gt;&nbsp;正确</div><div><br/></div><div>其中，第二种用法是错误的，相对的，第三种用法才正确。</div><div><br/></div><div><div>但是，我们再看看下面的几种写法：</div><div>&lt;%@ include file=&quot;http://localhost:8080/project/WEB-INF/views/common/taglibs.jsp&quot;%&gt;</div><div>&lt;%@ include file=&quot;/project/WEB-INF/views/common/taglibs.jsp&quot;%&gt;</div><div>&lt;%@ include file=&quot;&lt;%=request.getContextPath()%&gt;/WEB-INF/views/common/taglibs.jsp&quot;%&gt;</div><div>&lt;%@ include file=&quot;&lt;c:url value=&#39;/WEB-INF/views/common/taglibs.jsp&#39; /&gt;&quot;%&gt;</div></div><div><br/></div><div>思考……………………</div><div><br/></div><div>然后，再看看上面include的写法，<strong>谁能告诉我上面几种写法的正误</strong>？</div><div><br/></div><div>总结：</div><div>我们知道大部分情况下写在页面（不管静态还是动态）里并输出到IE中的路径都是由IE来解析的，以“/”开头的绝对路径 
这个“/”代表的是服务器的根目录：比如访问URL为 
http://localhost:8080/项目名/templates/template.jsp</div><div>那么“/”代表的就是 &quot;http://localhost:8080/&quot; 而并不带有项目名信息。</div><div><br/></div><div>而&lt;jsp:include&gt;引入页面的过程，是在服务器运行向IE输出数据的过程中由JAVA程序调用执行，路径也当然由JAVA程序来解析，此时以&quot;/&quot;开头的绝对路径中的“/” 代表的已经是本项目的根目录了。</div><div>比如 URL为 http://localhost:8080/项目名/templates/template.jsp</div><div>那么“/”代表的就是 &quot;http://localhost:8080/项目名/&quot;。已经带有了项目名信息。</div><div><br/></div><div>同时，也不用像引入JS CSS文件那样在路径前加上 &lt;%=request.getContextPath()%&gt; 来解决项目名本身修改的问题了。只需一个“/”就什么也不用管了。&nbsp;</div><div><br/></div><div><br/></div><div>问题：怎么获取List的某个值？</div><div>答：用EL表达式，[]括号，${aList[i]}</div><div>${alist.get(0)}</div><div><br/></div><div><br/></div><div>JSTL 实现if-else的方法：</div><div>&lt;c:choose&gt;</div><div>&nbsp;&lt;c:when test=&quot;${task.status==0 }&quot;&gt;</div><div>&nbsp; IIII IF</div><div>&nbsp;&lt;/c:when&gt;</div><div>&nbsp;&lt;c:otherwise &gt;</div><div>&nbsp; EEEE ESLE</div><div>&nbsp;&lt;/c:otherwise &gt;</div><div>&lt;/c:choose&gt;</div><div><br/></div><div>JSTL和struts标签循环遍历数字的方法：</div><div>&lt;c:forEach begin=&quot;0&quot; end=&quot;9&quot; var=&quot;i&quot;&gt;${i}&lt;/c:forEach&gt;</div><div>&lt;s:iterator value=&quot;new int[10]&quot; status=&quot;i&quot;&gt;</div><div>&nbsp;&lt;s:property value=&quot;#i.index&quot;/&gt;</div><div>&lt;/s:iterator&gt;</div><div><br/></div><div>&lt;s:bean name=&quot;org.apache.struts2.util.Counter&quot; id=&quot;counter&quot;&gt; &nbsp;</div><div>&nbsp;&lt;s:param name=&quot;first&quot; value=&quot;1&quot; /&gt; &nbsp;</div><div>&nbsp;&lt;s:param name=&quot;last&quot; value=&quot;%{#number}&quot; /&gt; &nbsp;</div><div>&nbsp;&lt;s:iterator&gt; &nbsp;</div><div>&nbsp;&lt;option
 value=&quot;&lt;s:property value=&quot;current-1&quot;/&gt;&quot; &lt;s:if 
test=&quot;current-1==begin&quot;&gt;selected&lt;/s:if&gt; &gt;&lt;s:property 
value=&quot;current-1&quot;/&gt;&lt;/option&gt;</div><div>&nbsp;&lt;/s:iterator&gt; &nbsp;</div><div>&lt;/s:bean&gt;</div><div><br/></div><div><br/></div><div>页面查找List中元素的方法：</div><div>&nbsp;var refundReason = &quot;&lt;s:property value=&quot;refundConfig.refundReason&quot; /&gt;&quot;;</div><div>&nbsp; var reasonArray = refundReason.split(&quot;,&quot;);</div><div>&nbsp; $.each(reasonArray, function(index, value){</div><div>&nbsp; &nbsp;var id = &quot;#&quot;+value;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(id).attr(&quot;checked&quot;,&quot;checked&quot;);</div><div>&nbsp; });</div><div><br/></div><div>&lt;input name=&quot;refundReason&quot; type=&quot;checkbox&quot;id=&#39;&lt;s:property value=&quot;#reason.key&quot;/&gt;</div><div><br/></div><div>&nbsp; &nbsp; &nbsp;</div><div>&lt;s:if test=&quot;#reason.key in refundReasonSet&quot;&gt;checked&lt;/s:if&gt;</div><div>&lt;s:if test=&quot;#reason.key in refundReasonList&quot;&gt;checked&lt;/s:if&gt;</div><div>&lt;s:if test=&quot;refundReasonList.contains(#reason.key)&quot;&gt;checked&lt;/s:if&gt;</div><div>&lt;s:if test=&quot;refundReasonSet.contains(#reason.key)&quot;&gt;checked&lt;/s:if&gt;</div><div><br/></div><div>&lt;!-- s:if test=&quot;refundConfig.refundReason.indexOf(#reason.key)&gt;=0&quot;&gt;checked&lt;/s:if --&gt;</div><div><br/></div><div><br/></div><div>JSTL格式化时间：<br/>&lt;%@&nbsp;taglib&nbsp;prefix=&quot;fmt&quot;&nbsp;uri=&quot;<a href="http://java.sun.com/jsp/jstl/fmt" data-ke-src="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a>&quot;&nbsp;%&gt;<br/>&lt;fmt:formatDate&nbsp;value=&quot;${task.createTime}&quot;&nbsp;pattern=&quot;yyyy-MM-dd&nbsp;HH:mm:ss&quot;/&gt;</div><div><br/></div><div><br/></div><div><p><br/></p><p>二、JSP基础</p><p><span style="font-size:16px">1</span><span style="font-size:16px;font-family:宋体">、语法</span></p><p><span style="font-size:16px;font-family:宋体">变量声明</span><span style="font-size:16px">&lt;%!</span><span style="font-size:16px;font-family:宋体">……</span><span style="font-size:16px">%&gt;</span></p><p><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:16px;font-family:宋体">注意：在</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">内定义函数时，要放在</span><span style="font-size:16px">&lt;%!</span><span style="font-size:16px;font-family:宋体">……</span><span style="font-size:16px">%&gt;</span><span style="font-size:16px;font-family:宋体">内，否则可能会出错。</span></p><p><span style="font-size:16px">JSP Scriptlets</span><span style="font-size: 16px;font-family:宋体">语法</span><span style="font-size:16px">&lt;%</span><span style="font-size:16px;font-family:宋体">……</span><span style="font-size:16px">%&gt;</span></p><p><span style="font-size:16px;font-family:宋体">服务器端注释</span><span style="font-size:16px">&lt;%--</span><span style="font-size:16px;font-family:宋体">……</span><span style="font-size:16px">--%&gt;</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">2</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px;color:red">JSP</span><span style="font-size:16px;font-family:宋体;color:red">指令元素</span><span style="font-size:16px">&lt;%@</span><span style="font-size:16px;font-family:宋体">……</span><span style="font-size:16px">%&gt;</span></p><p><span style="font-size:16px">1</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">page</span><span style="font-size:16px;font-family:宋体">指令</span></p><p><span style="font-size:16px;font-family:宋体">常用属性</span><span style="font-size:16px">language,contenType,import,extends,session,info,isErrorPage</span><span style="font-size:16px;font-family:宋体">等。</span></p><p><span style="font-size:16px;font-family:宋体">例如</span><span style="font-size:16px">&lt;%@ page language=&quot;java&quot; contenType=&quot;text/html;charset=gb2312&quot; %&gt;</span></p><p><span style="font-size:16px">2</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">include</span><span style="font-size:16px;font-family:宋体">指令</span></p><p><span style="font-size:16px;font-family:宋体">语法格式为</span><span style="font-size:16px">&lt;%@ include file=&quot;</span><span style="font-size:16px;font-family:宋体">地址</span><span style="font-size:16px">&quot; %&gt;</span><span style="font-size:16px;font-family:宋体">，这种包含属于编译前包含。</span></p><p><span style="font-size:16px">3</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">taglib</span><span style="font-size:16px;font-family:宋体">指令</span></p><p><span style="font-size:16px;font-family:宋体">声明自定义标签，语法格式为</span><span style="font-size:16px">&lt;%@ taglib uri=&quot;URI&quot; prefix=&quot;tagPrefix&quot; %&gt;</span><span style="font-size:16px;font-family:宋体">例如</span></p><p><span style="font-size:16px">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">3</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体;color:red">动作元素</span><span style="font-size:16px;font-family:宋体">（单标签或者配对的标签）</span></p><p><span style="font-size:16px">1</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">&lt;jsp:include&gt;</span><span style="font-size:16px;font-family:宋体">动作元素</span></p><p><span style="font-size:16px;font-family:宋体">语法为：</span><span style="font-size:16px">&lt;jsp:include page=&quot;URL&quot; flush=&quot;true|false&quot;&gt;</span></p><p><span style="font-size:16px;font-family:宋体">可以包含</span><span style="font-size:16px">txt</span><span style="font-size:16px;font-family:宋体">，</span><span style="font-size:16px">html</span><span style="font-size:16px;font-family:宋体">和</span><span style="font-size:16px">jsp</span><span style="font-size:16px;font-family:宋体">文件，与</span><span style="font-size:16px">include</span><span style="font-size:16px;font-family:宋体">指令元素不同的是，对于静态文件它是编译后在包含，所以</span><span style="font-size:16px">txt</span><span style="font-size:16px;font-family:宋体">文件中的</span><span style="font-size:16px">jsp</span><span style="font-size:16px;font-family:宋体">代码执行不了。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">2</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">&lt;jsp:forward&gt;</span></p><p><span style="font-size:16px;font-family:宋体">用法例如：</span><span style="font-size:16px">&lt;jsp:forward page=&quot;text.jsp&quot;&gt;&lt;/jsp:forward&gt;</span><span style="font-size: 16px;font-family:宋体">属于服务器端跳转。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">3</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">&lt;jsp:param&gt;</span></p><p><span style="font-size:16px;font-family:宋体">用法为：</span><span style="font-size:16px">&lt;jsp:param name=&quot;&quot; value=&quot;&quot;/&gt;</span><span style="font-size:16px;font-family:宋体">通常配合跳转的</span><span style="font-size: 16px">jsp:forward</span><span style="font-size:16px;font-family:宋体">和包含进文件的</span><span style="font-size:16px">jsp:include</span><span style="font-size:16px;font-family:宋体">一起使用。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">4</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">&lt;jsp:plugin&gt;&lt;jsp:params&gt;&lt;jsp:fallback&gt; </span></p><p><span style="font-size:16px;font-family:宋体">配合使用。</span><span style="font-size:16px">plugin</span><span style="font-size:16px;font-family:宋体">用于向</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">中插入</span><span style="font-size:16px">Java</span><span style="font-size:16px;font-family:宋体">插件，比如</span><span style="font-size:16px">Applet</span><span style="font-size:16px;font-family:宋体">。相当于</span><span style="font-size:16px">HTML4.0</span><span style="font-size:16px;font-family:宋体">版本中的</span><span style="font-size:16px">&lt;object&gt;</span><span style="font-size:16px;font-family:宋体">标签。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px;color:red">5.JSP</span><span style="font-size: 16px;font-family:宋体;color:red">内置对象</span></p><p><span style="font-size:16px;font-family:宋体">包括</span><span style="font-size:16px">out, response, pageContext, page, request, session, application, config, exception</span><span style="font-size:16px;font-family:宋体">等。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">1</span><span style="font-size:16px;font-family:宋体">）设置与读取属性，属性的范围</span></p><p><span style="font-size:16px;font-family:宋体">范围分为：</span><span style="font-size:16px">page, request, session, application</span><span style="font-size:16px;font-family:宋体">，分别是当前页面有效（任何跳转都无效），本次请求有效（服务器端跳转仍有效），本次登录有效（只要不关闭浏览器断开了连接），服务器端不重启永久有效。</span></p><p><span style="font-size:16px;font-family:宋体">设置属性的方法为</span><span style="font-size:16px">pageContext.setAttribute(&quot;name&quot;,&quot;value&quot;)</span><span style="font-size:16px;font-family:宋体">。</span><span style="font-size:16px">request, session, application</span><span style="font-size:16px;font-family:宋体">类似。</span></p><p><span style="font-size:16px;font-family:宋体">读取属性的方法类似。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">2</span><span style="font-size:16px;font-family:宋体">）获取客户端传来的参数（用</span><span style="font-size:16px">request</span><span style="font-size:16px;font-family:宋体">对象）</span></p><p><span style="font-size:16px;font-family:宋体">例如</span></p><p style="line-height: normal;"><span style="font-size:16px">request.getParameter(String name) //</span><span style="font-size:16px;font-family:宋体">获取指定</span><span style="font-size:16px">name</span><span style="font-size:16px;font-family:宋体">的值</span></p><p style="line-height: normal;"><span style="font-size:16px">request.getParameterNames() //</span><span style="font-size:16px;font-family:宋体">获取所有</span><span style="font-size:16px">name</span><span style="font-size:16px;font-family:宋体">的名称</span></p><p style="line-height: normal;"><span style="font-size:16px">request.getParameterValues(String name) //</span><span style="font-size:16px;font-family:宋体">获取指定</span><span style="font-size:16px">name</span><span style="font-size:16px;font-family:宋体">的多个值</span></p><p style="line-height: normal;"><span style="font-size:16px">request.getParameterMap() //</span><span style="font-size:16px;font-family:宋体">获得所有数据，封装在</span><span style="font-size:16px">Map</span><span style="font-size:16px;font-family:宋体">对象中</span></p><p><span style="font-size:16px">Map</span><span style="font-size:16px;font-family:宋体">中存放了成对的</span><span style="font-size:16px">name-values</span><span style="font-size:16px;font-family:宋体">值，例如</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;%</span></p><p style="line-height: normal;"><span style="font-size:16px">Map umap= request.getParameterMap();</span></p><p style="line-height: normal;"><span style="font-size:16px">String[] strUsername= (String[])umap.get(&quot;username&quot;);</span></p><p style="line-height: normal;"><span style="font-size:16px">%&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px"><br/></span></p><p><span style="font-size:16px;font-family:宋体">此外，还有</span><span style="font-size:16px">getIntHeader(String name), getRequestedSessionId()</span><span style="font-size:16px;font-family:宋体">等等。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">3</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">response</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">用于给客户端传送信息。例如添加新的</span><span style="font-size:16px">Cookie</span><span style="font-size:16px;font-family:宋体">或者跳转等。</span></p><p><span style="font-size:16px;font-family:宋体">例如，实现页面跳转：</span><span style="font-size:16px">response.sendRedirect(&quot;DirectPage.jsp&quot;);</span></p><p><span style="font-size:16px;font-family:宋体">实现自动刷新：</span><span style="font-size:16px">response.addIntHeader(&quot;</span><span style="font-size:16px;font-family:宋体">自动刷新</span><span style="font-size:16px">&quot;,10);</span></p><p><span style="font-size:16px;font-family:宋体">实现自动跳转刷新：</span><span style="font-size:16px">response.setHeader(&quot;</span><span style="font-size:16px;font-family:宋体">自动刷新</span><span style="font-size:16px">&quot;,&quot;10;URL=http://www.&quot;);</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">4</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">out</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px">out</span><span style="font-size:16px;font-family:宋体">对象常用的方法有</span><span style="font-size:16px">println(), close(), clear(),getBufferSize(),&nbsp; getRemaining()</span><span style="font-size: 16px;font-family:宋体">等。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">5</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">session</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">用于设置与获得</span><span style="font-size:16px">session</span><span style="font-size:16px;font-family:宋体">信息。例如：</span><span style="font-size:16px">getId(), setMaxInactiveInterval()</span><span style="font-size:16px;font-family:宋体">设置生命周期</span><span style="font-size: 16px">, isNew(), invalidate()</span><span style="font-size:16px;font-family:宋体">清空。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">6</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">application</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">用于获取与设置服务器端</span><span style="font-size:16px">Servlet</span><span style="font-size:16px;font-family:宋体">的相关信息，例如</span><span style="font-size:16px">getSerInfo(), getRealPath()</span><span style="font-size:16px;font-family:宋体">等。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">7</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">pageContext</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">用法很多，</span><span style="font-size:16px">session, request, application</span><span style="font-size:16px;font-family:宋体">的对象它都可以读，例如</span><span style="font-size:16px">getRequest()</span><span style="font-size:16px;font-family:宋体">。</span></p><p><span style="font-size:16px;font-family:宋体">例如，读取</span><span style="font-size:16px">session</span><span style="font-size:16px;font-family:宋体">范围</span><span style="font-size:16px">name</span><span style="font-size:16px;font-family:宋体">属性：</span><span style="font-size:16px">pageContext.getAttribute(&quot;name&quot;, pageContext.SESSION_SCOPE);</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">8</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">page</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">通过</span><span style="font-size:16px">page</span><span style="font-size:16px;font-family:宋体">对象可以调用</span><span style="font-size:16px">Servlet</span><span style="font-size:16px;font-family:宋体">类中定义的方法，例如：</span></p><p><span style="font-size:16px">String info=((javax.servlet.jsp.HttpJspPage)page).getServletInfo();</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px">9</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">config</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">该对象允许访问</span><span style="font-size:16px">Servlet</span><span style="font-size:16px;font-family:宋体">或</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">引擎的初始化参数。例如</span><span style="font-size:16px">getServletMame()</span><span style="font-size:16px;font-family:宋体">。</span></p><p><br/></p><p><span style="font-size:16px">10</span><span style="font-size:16px;font-family:宋体">）</span><span style="font-size:16px">exception</span><span style="font-size:16px;font-family:宋体">对象</span></p><p><span style="font-size:16px;font-family:宋体">例如：</span></p><p><span style="font-size:16px">exception.getMessage(),</span></p><p><span style="font-size:16px">exception.printStackTrace(new java.io.PrintWriter(out))</span><span style="font-size:16px;font-family:宋体">等</span></p><p><br/></p><p><span style="font-size:16px">7</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">中调用</span><span style="font-size:16px;color:red">JavaBean</span></p><p><span style="font-size:16px">&lt;jsp:useBean id=&quot;&quot; scope=&quot;&quot; class=&quot;&quot;&gt;&lt;/jsp:useBean&gt;</span></p><p><span style="font-size:16px;font-family:宋体">例如一个</span><span style="font-size:16px">JavaBean</span><span style="font-size:16px;font-family:宋体">内容如下：</span></p><pre class="brush:java;toolbar:false">package&nbsp;com.zollty.ch07;
public&nbsp;class&nbsp;UserBean&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;username;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getUsername()&nbsp;{&nbsp;return&nbsp;username;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setUsername(String&nbsp;username)&nbsp;{&nbsp;//自定义的get方法
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.username=&nbsp;username;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
}</pre><p><br/></p><p><span style="font-size:16px;font-family:宋体">在</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">中调用的方法为</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;jsp:useBean id=&quot;user&quot; scope=&quot;page&quot; class=&quot;com.zollty.ch07.UserBean&quot;&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;/jsp:useBean&gt; //user</span><span style="font-size:16px;font-family:宋体">相当于</span><span style="font-size:16px">new</span><span style="font-size:16px;font-family:宋体">的一个</span><span style="font-size:16px">UserBean</span><span style="font-size:16px;font-family:宋体">类实例</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;%</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user.setUsername(&quot;Zollty&quot;); //</span><span style="font-size:16px;font-family:宋体">用自定义的方法设置参数值</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.println(user.getUsername());</span></p><p style="line-height: normal;"><span style="font-size:16px">%&gt;</span></p><p><br/></p><p><span style="font-size:16px;font-family:宋体">也可以用动作元素标签来设置数据的值，达到和自定义函数</span><span style="font-size: 16px">setUsername(&quot;Zollt</span></p><p><span style="font-size:16px">y&quot;)</span><span style="font-size:16px;font-family:宋体">一样的效果（范围都要受到</span><span style="font-size:16px">&lt;jsp:useBean&gt;</span><span style="font-size:16px;font-family: 宋体">的影响），例如有一个表单，里面有</span><span style="font-size:16px">uname</span><span style="font-size:16px;font-family:宋体">这一项：</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;form action=&quot;Test3.jsp&quot; method=&quot;post&quot;&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;input type=&quot;text&quot; name=&quot;uname&quot;&gt;&lt;br&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;input type=&quot;submit&quot; value=&quot;</span><span style="font-size:16px;font-family:宋体">提交</span><span style="font-size:16px">&quot;&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;/form&gt;</span></p><p><span style="font-size:16px;font-family:宋体">在</span><span style="font-size:16px">Test3.jsp</span><span style="font-size:16px;font-family:宋体">里面通过</span></p><p><span style="font-size:16px">&lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot; /&gt;</span></p><p><span style="font-size:16px;font-family:宋体">就可以将</span><span style="font-size:16px">user</span><span style="font-size:16px;font-family:宋体">实例中的所有数据元素值自动匹配</span><span style="font-size:16px">form</span><span style="font-size:16px;font-family:宋体">表单中的属性值。再通过</span><span style="font-size:16px">user.getUsername()</span><span style="font-size:16px;font-family:宋体">或者</span><span style="font-size:16px">&lt;jsp:getProperty name=&quot;user&quot; property=&quot;username&quot; /&gt;</span><span style="font-size:16px;font-family:宋体">就可以获取了。</span></p><p><span style="font-size:16px;font-family:宋体">上面的</span><span style="font-size:16px">property=&quot;*&quot;</span><span style="font-size:16px;font-family:宋体">是特例，一般写作：</span></p><p><span style="font-size:16px">&lt;jsp:setProperty name=&quot;user&quot; property=&quot;username&quot; param=&quot;uname&quot; /&gt;</span></p><p><span style="font-size:16px;font-family:宋体">其中</span><span style="font-size:16px">property</span><span style="font-size:16px;font-family:宋体">对应的是</span><span style="font-size:16px">UserBean</span><span style="font-size:16px;font-family:宋体">类中的数据，而</span><span style="font-size:16px">param</span><span style="font-size:16px;font-family:宋体">指的是</span><span style="font-size:16px">form</span><span style="font-size:16px;font-family:宋体">表单中的参数（此处是</span><span style="font-size:16px">input</span><span style="font-size:16px;font-family:宋体">标签中</span><span style="font-size:16px">name</span><span style="font-size:16px;font-family:宋体">的值）。相当于把</span><span style="font-size:16px">param</span><span style="font-size:16px;font-family:宋体">的值赋给</span><span style="font-size:16px">property</span><span style="font-size:16px;font-family:宋体">，而且这个赋值只在</span><span style="font-size:16px">page</span><span style="font-size:16px;font-family:宋体">范围内有效，也就是说仅本页内可以取得这个值，任何跳转了页面这个值就不存在了。其实</span><span style="font-size:16px">page</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">request</span><span style="font-size:16px;font-family:宋体">等四个范围的值是独立存在的，要访问也必须指定范围。</span></p><p><span style="font-size:16px">PS</span><span style="font-size:16px;font-family:宋体">：这里</span><span style="font-size:16px">form</span><span style="font-size:16px;font-family:宋体">表单中提交的数据类型要和</span><span style="font-size:16px">Bean</span><span style="font-size:16px;font-family:宋体">中的数据的类型一样。</span></p><p><br/></p><p><span style="font-size:16px;font-family:宋体">移除</span><span style="font-size:16px">JavaBean</span><span style="font-size:16px;font-family:宋体">，例如要移除</span><span style="font-size:16px">page</span><span style="font-size:16px;font-family:宋体">范围内的</span><span style="font-size:16px">JavaBean</span><span style="font-size:16px;font-family:宋体">，则在</span><span style="font-size:16px">JavaScripts</span><span style="font-size:16px;font-family:宋体">里面写</span></p><p><span style="font-size:16px">&lt;%</span></p><p><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pageContext.removeAttribute(&quot;user&quot;);</span></p><p><span style="font-size:16px">%&gt;</span></p><p><span style="font-size:16px;font-family:宋体">注意到虽然是调用“移除属性”的方法，但是</span><span style="font-size:16px">&quot;user&quot;</span><span style="font-size:16px;font-family:宋体">并不是属性，它与</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">内置对象的</span><span style="font-size:16px">pageContext.setAttribute(&quot;name&quot;,&quot;value&quot;)</span><span style="font-size:16px;font-family:宋体">有些区别：</span><span style="font-size:16px">&quot;user&quot;</span><span style="font-size:16px;font-family:宋体">是自定义的类</span><span style="font-size: 16px">UserBean</span><span style="font-size:16px;font-family:宋体">的实例，而</span><span style="font-size:16px">&quot;name&quot;</span><span style="font-size:16px;font-family:宋体">只是一个普通的名字，是一个字符串。</span></p><p><br/></p><p><span style="font-size:16px">PS</span><span style="font-size:16px;font-family:宋体">：英文</span><span style="font-size:16px">Attribute</span><span style="font-size:16px;font-family:宋体">和</span><span style="font-size:16px">Property</span><span style="font-size:16px;font-family:宋体">都是属性的意思，但在</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">中</span><span style="font-size:16px">Attribute</span><span style="font-size:16px;font-family:宋体">可以是一个类或普通变量，而</span><span style="font-size:16px">Property</span><span style="font-size:16px;font-family:宋体">是指一个类的数据成员。</span></p><p><br/></p><p><span style="font-size:16px;font-family:宋体;color:red">注意：</span><span style="font-size:16px">JSP</span><span style="font-size:16px;font-family:宋体">是放在</span><span style="font-size:16px">Web</span><span style="font-size:16px;font-family:宋体">工程</span><span style="font-size:16px">ch01</span><span style="font-size:16px;font-family:宋体">下的</span><span style="font-size:16px">WebRoot</span><span style="font-size:16px;font-family:宋体">目录下，和</span><span style="font-size:16px">META-INF</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">WEB-INF</span><span style="font-size:16px;font-family:宋体">在同一级目录，而</span><span style="font-size:16px">JavaBean</span><span style="font-size:16px;font-family:宋体">是放在</span><span style="font-size:16px">ch01</span><span style="font-size:16px;font-family:宋体">下的</span><span style="font-size:16px">src</span><span style="font-size:16px;font-family:宋体">文件夹下的</span><span style="font-size:16px">com.zollty</span><span style="font-size:16px;font-family:宋体">包中，在其他地方中引用只需要引入</span><span style="font-size:16px">class=&quot;com.zollty.UserBean&quot;</span><span style="font-size: 16px;font-family:宋体">即可。</span></p><p><br/></p><p><span style="font-size:16px">8</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px;color:red">EL</span><span style="font-size:16px;font-family:宋体;color:red">表达式</span></p><p><span style="font-size:16px">EL</span><span style="font-size:16px;font-family:宋体">运算符：有</span><span style="font-size:16px">()</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">[]</span><span style="font-size:16px;font-family:宋体">、！</span><span style="font-size:16px">(not)</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">*</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">/</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">+</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">-</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&lt;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&lt;=</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">==</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&amp;&amp;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">||</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">${A?B:C}</span><span style="font-size:16px;font-family:宋体">等</span></p><p><br/></p><p><span style="font-size:16px">EL</span><span style="font-size:16px;font-family:宋体">内置对象（</span><span style="font-size:16px">EL</span><span style="font-size:16px;font-family:宋体">存取器（也称为导航）），用于获取某些值。例如</span></p><p><span style="font-size:16px">${pageScope.user.username}</span><span style="font-size:16px;font-family:宋体">，等价于</span><span style="font-size:16px">${pageScope.user[&quot;username&quot;]}</span></p><p><span style="font-size:16px;font-family:宋体">接收用户参数（从表单</span><span style="font-size:16px">post</span><span style="font-size:16px;font-family:宋体">过来的），例如：</span></p><p><span style="font-size:16px">${param.username}</span></p><p><span style="font-size:16px">${paramValues.interest[0]} ${param.interest[1]}</span></p><p><span style="font-size:16px;font-family:宋体">这个</span><span style="font-size:16px">param</span><span style="font-size:16px;font-family:宋体">和</span><span style="font-size:16px">paramValues</span><span style="font-size:16px;font-family:宋体">相当于前面讲的</span><span style="font-size:16px">request.getParameter()</span><span style="font-size:16px;font-family:宋体">和</span><span style="font-size:16px">request.getParameterValues()</span><span style="font-size:16px;font-family:宋体">。</span></p><p><br/></p><p><span style="font-size:16px;font-family:宋体">同理</span><span style="font-size:16px">EL</span><span style="font-size:16px;font-family:宋体">存取器还可以获得</span><span style="font-size:16px">JavaBean</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">Map</span><span style="font-size:16px;font-family:宋体">、数组、对象中的值。复杂对象的写法类似于：</span><span style="font-size:16px">${sessionScope.shoppingCart[0].price}</span><span style="font-size: 16px;font-family:宋体">，例如</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;%</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HashMap userInfo= new HashMap();</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; userInfo.put(&quot;username&quot;,&quot;zollty&quot;);</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; session.setAttribute(&quot;userInfo&quot;,userInfo);</span></p><p style="line-height: normal;"><span style="font-size:16px">%&gt;</span></p><p><span style="font-size:16px;font-family:宋体">然后就可以调用</span><span style="font-size:16px">${userInfo.username}</span></p><p><span style="font-size:16px;font-family:宋体">再例如：</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;%</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span style="font-size:16px;font-family:宋体">下面定义一个对象数组</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ArrayList&lt;Person&gt; persons= new ArrayList&lt;Person&gt;();</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span style="font-size:16px;font-family:宋体">实例化两个</span><span style="font-size:16px">Person</span><span style="font-size:16px;font-family:宋体">对象</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Person p1=new Person(&quot;Zollty&quot;,23,&quot;</span><span style="font-size:16px;font-family:宋体">男</span><span style="font-size:16px">&quot;);</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Person p2=new Person(&quot;Duby2&quot;,20,&quot;</span><span style="font-size:16px;font-family:宋体">女</span><span style="font-size:16px">&quot;);</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span style="font-size:16px;font-family:宋体">将</span><span style="font-size:16px">p1</span><span style="font-size:16px;font-family:宋体">和</span><span style="font-size:16px">p2</span><span style="font-size:16px;font-family:宋体">装入对象数组中</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; persons.add(p1);</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perssons.add(p2);</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; session.setAttribute(&quot;persons&quot;,persons);</span></p><p style="line-height: normal;"><span style="font-size:16px">%&gt;</span></p><p><span style="font-size:16px;font-family:宋体">然后就可以访问</span><span style="font-size:16px">${sessionScope.persons[0].name}</span></p><p><br/></p><p><span style="font-size:16px">PS:</span><span style="font-size:16px;font-family:宋体">设置</span><span style="font-size:16px">Cookie</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;%</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cookie c=new Cookie(&quot;username&quot;,&quot;zollty&quot;);</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; response.addCookie(c);</span></p><p style="line-height: normal;"><span style="font-size:16px">%&gt;</span></p><p><br/></p><p><span style="font-size:16px;font-family:宋体">其他</span></p><p style="line-height: normal;"><span style="font-size:16px">${cookie.username.value}</span></p><p style="line-height: normal;"><span style="font-size:16px">${header[&quot;host&quot;]}</span><span style="font-size:16px;font-family:宋体">将显示</span><span style="font-size:16px">localhost:8080</span></p><p style="line-height: normal;"><span style="font-size:16px">${initParam.username}</span><span style="font-size:16px;font-family:宋体">，其中</span><span style="font-size:16px">username</span><span style="font-size:16px;font-family:宋体">在</span><span style="font-size:16px">web.xml</span><span style="font-size:16px;font-family:宋体">中设置：</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;context-param&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;username&lt;/param-name&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;Zollty&lt;/param-value&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;/contextparam&gt;</span></p><p><span style="font-size:16px;font-family:宋体">利用下面等方法获取</span><span style="font-size:16px">get</span><span style="font-size:16px;font-family:宋体">或</span><span style="font-size:16px">post</span><span style="font-size:16px;font-family:宋体">方式传递的信息：</span></p><p style="line-height: normal;"><span style="font-size:16px">${pageContent.request.queryString}</span></p><p style="line-height: normal;"><span style="font-size:16px">${pageContent.request.requestURL}</span></p><p style="line-height: normal;"><span style="font-size:16px">${pageContent.request.contextPath}</span></p><p><br/></p><p><span style="font-size:16px">9</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px;color:red">JSTL</span></p><p><span style="font-size:16px">1. JSTL</span><span style="font-size:16px;font-family:宋体">核心标签</span></p><p><span style="font-size:16px">&lt;c:set&gt;</span><span style="font-size: 16px;font-family:宋体">设置变量</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:set var=”varName” value=”varValue” [scope=”page|request|session|application”]&gt;<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default value<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/c:set&gt;</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:remove&gt;</span><span style="font-size: 16px;font-family:宋体">移除变量</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;c:remove var=”varName” [scope=”page|request|session|application”] /&gt;</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:out&gt;</span><span style="font-size: 16px;font-family:宋体">输出</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;c: out value=”object” [escapeXml=”true|false”] &gt;defalut value&lt;/c:out&gt;</span></p><p><span style="font-size:16px">escapeXml</span><span style="font-size:16px;font-family:宋体">默认为</span><span style="font-size:16px">ture</span><span style="font-size:16px;font-family:宋体">，是将</span><span style="font-size:16px">&lt;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&gt;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&#39;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&quot;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&amp;</span><span style="font-size:16px;font-family:宋体">转换成</span><span style="font-size:16px">(&lt;)&amp;lt;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">(&gt;)&amp;gt;</span><span style="font-size:16px;font-family:宋体">、</span></p><p><span style="font-size:16px">(&#39;)&amp;#039;</span><span style="font-size: 16px;font-family:宋体">、</span><span style="font-size:16px">(&quot;)&amp;#034;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">(&amp;)&amp;amp;</span><span style="font-size:16px;font-family:宋体">输出。</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:if&gt;</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;c:if test=”checkCondition” var=”varName” scope=”page|request|session|application”&gt;<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; body content<br/> &lt;/c:if&gt;</span></p><p><span style="font-size:16px;font-family:宋体">当</span><span style="font-size:16px">test</span><span style="font-size:16px;font-family:宋体">的表达式为</span><span style="font-size:16px">ture</span><span style="font-size:16px;font-family:宋体">时会执行</span><span style="font-size:16px">body content</span><span style="font-size:16px;font-family:宋体">。判断结果</span><span style="font-size: 16px">ture</span><span style="font-size:16px;font-family:宋体">或</span><span style="font-size:16px">false</span><span style="font-size:16px;font-family:宋体">存放到</span><span style="font-size:16px">var</span><span style="font-size:16px;font-family:宋体">中。</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:choose&gt;</span><span style="font-size: 16px;font-family:宋体">、</span><span style="font-size:16px">&lt;c:when&gt;</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">&lt;c:otherwise&gt;</span><span style="font-size:16px;font-family: 宋体">相当于</span><span style="font-size:16px">if else</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp; &nbsp; &nbsp; &nbsp;&lt;c:set var=”num” scope=”page” value=”admin”/&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px;"><span style="font-size: 12px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 12px; color: red;">c:choose</span><span style="font-size: 12px; color: rgb(51, 153, 102);">&gt;</span></span></p><p style="line-height: normal;"><span style="font-size: 14px;"><span style="font-size: 12px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:</span><span style="font-size: 12px; color: red;">when test=”${num==’guest’}”</span><span style="font-size: 12px; color: rgb(51, 153, 102);">&gt;</span></span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:out value=”guest”/&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/c:when&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px;"><span style="font-size: 12px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:</span><span style="font-size: 12px; color: red;">when test=”${num==’admin’}”</span><span style="font-size: 12px; color: rgb(51, 153, 102);">&gt;</span></span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:out value=”admin”/&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/c:when&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px;"><span style="font-size: 12px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:</span><span style="font-size: 12px; color: red;">otherwise</span><span style="font-size: 12px; color: rgb(51, 153, 102);">&gt;</span></span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:out value=”other”/&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/c:otherwise&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px;"><span style="font-size: 12px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size: 12px; color: red;">/c:choose</span><span style="font-size: 12px; color: rgb(51, 153, 102);">&gt;</span></span></p><p><br/></p><p><span style="font-size:16px">&lt;c:forEach&gt;</span><span style="font-size:16px;font-family:宋体">遍历或循环</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;c:forEach items=”collection” var=”varName” [varstatue=”varStatusName”] [begin=”begin”] [end=”end”] [step=”step”]&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Body content</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;/c:forEach&gt;</span></p><p><span style="font-size:16px">items</span><span style="font-size:16px;font-family:宋体">指被迭代的对象成员，</span><span style="font-size:16px">var</span><span style="font-size:16px;font-family:宋体">指当前指到的成员，</span><span style="font-size:16px">begin/end</span><span style="font-size:16px;font-family:宋体">设定起始和结束的位置，</span><span style="font-size:16px">step</span><span style="font-size:16px;font-family:宋体">为步长，</span><span style="font-size:16px">varstatue</span><span style="font-size:16px;font-family:宋体">存储迭代的状态信息，含</span><span style="font-size:16px">index</span><span style="font-size:16px;font-family:宋体">，</span><span style="font-size:16px">count</span><span style="font-size:16px;font-family:宋体">，</span><span style="font-size:16px">first</span><span style="font-size:16px;font-family:宋体">，</span><span style="font-size:16px">last</span><span style="font-size:16px;font-family:宋体">四个方法，例如</span></p><p><span style="font-size: 12px;">&lt;c:forEach var=”ItemName” items=”${Items}” begin=”3” end=”4” step=”1” varStatus=”s”&gt;</span></p><p><span style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;&lt;c:out value=”${ItemName}” /&gt;</span><span style="font-size: 12px; font-family: 宋体;">的四种属性</span><span style="font-size: 12px;">:&lt;br&gt;</span></p><p><span style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;</span><span style="font-size: 12px; font-family: 宋体;">所在位置即索引</span><span style="font-size: 12px;">: &lt;c:out value=”${s.index}” /&gt; &lt;br&gt;</span></p><p><span style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;</span><span style="font-size: 12px; font-family: 宋体;">总共已迭代的次数</span><span style="font-size: 12px;">: &lt;c:out value=”${s.count}”/&gt;&lt;br&gt;</span></p><p><span style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;</span><span style="font-size: 12px; font-family: 宋体;">是否为第一个位置</span><span style="font-size: 12px;">: &lt;c:out value=”${s.first}” /&gt;&lt;br&gt;</span></p><p><span style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;</span><span style="font-size: 12px; font-family: 宋体;">是否为最后一个位置</span><span style="font-size: 12px;">: &lt;c:out value=”${s.last}”/&gt;</span></p><p><span style="font-size: 12px;">&lt;/c:forEach&gt;</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:forTokens&gt;</span><span style="font-size:16px;font-family:宋体">分割字符串</span></p><p><span style="font-size:16px;font-family:宋体">例如：</span></p><p><span style="font-size: 12px;">&lt;c:forTokens var=”token” items=”bleu,rouge|vert,jaune|blanc,rouge” delims=”|,”&gt;</span></p><p><span style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;nbsp;&amp;nbsp;&lt;c:out value=”${token}”/&gt;</span></p><p><span style="font-size: 12px;">&lt;/c:forTokens&gt;</span></p><p><span style="font-size:16px">delims</span><span style="font-size:16px;font-family:宋体">属性是自定义的分隔符，</span><span style="font-size:16px">items</span><span style="font-size:16px;font-family:宋体">为要分割的字符串，还有其他熟悉和</span><span style="font-size:16px">forEach</span><span style="font-size:16px;font-family:宋体">差不多。</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:import&gt;</span><span style="font-size: 16px;font-family:宋体">引入静态文件，比</span><span style="font-size:16px">&lt;jsp:import&gt;</span><span style="font-size:16px;font-family: 宋体">功能更强</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;c:import url=”url” [context=”context”] [var=”varName”] [scope=”page|request|session|application”] [varReader=”varReader”] [charEncodion=”charEncoding”]&gt;</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Body content</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;/c:import&gt;</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:redirect&gt;</span><span style="font-size:16px;font-family:宋体">跳转页面，和</span><span style="font-size:16px">&lt;jsp:redirect&gt;</span><span style="font-size:16px;font-family: 宋体">一样</span></p><p><span style="font-size:16px">&lt;c:param&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:redirect url=”url” [context=”context”]&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:param name=”paramName” value=”value”/&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/c:redirect&gt;</span></p><p><br/></p><p><span style="font-size:16px">&lt;c:url&gt;</span><span style="font-size: 16px;font-family:宋体">将</span><span style="font-size:16px">URL</span><span style="font-size:16px;font-family:宋体">赋值给一个变量，便于重复调用</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;c:url value=”value” [context=”context”] [var=”varName”] [scope=”page|request|session|application”] &gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;c:param name=”paramName” value=”value” /&gt;</span></p><p style="line-height: normal;"><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;/c:url&gt;</span></p><p><br/></p><p><span style="font-size:16px">2.</span><span style="font-size:16px;font-family:宋体">数据库标签</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;sql:setDataSource&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;sql:update&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;sql:query&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;sql:param&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;sql:dateParam&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;sql:transaction&gt;</span></p><p><span style="font-size:16px">3.I18N</span><span style="font-size:16px;font-family:宋体">格式化标签库</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:formatNumber&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:parseNumber&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:formatDate&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:parseDate&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:setTimeZone&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:timeZone&gt;</span></p><p><br/></p><p><span style="font-size:16px">&lt;fmt:setLocale&gt;</span><span style="font-size:16px;font-family:宋体">设置本地化环境（语言</span><span style="font-size:16px">+</span><span style="font-size:16px;font-family:宋体">地区）</span></p><p><span style="font-size: 14px; color: rgb(51, 153, 102);">&lt;fmt:setLocale value=”…locale value…” [variant=”…variant value…”] [scope=”page|request|session|application”] /&gt;</span></p><p><span style="font-size:16px;font-family:宋体">例如</span><span style="font-size:16px">&lt;fmt:setLocal value=&quot;zh_CN&quot;&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:requestEncoding&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:setBundle&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:message&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:param&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;fmt:bundle&gt;</span></p><p><span style="font-size:16px">4.XML</span><span style="font-size:16px;font-family:宋体">标签库</span></p><p><span style="font-size:16px;font-family:宋体">首先导入</span><span style="font-size:16px">xalan.jar</span><span style="font-size:16px;font-family:宋体">和</span><span style="font-size:16px">serializer.jar</span><span style="font-size:16px;font-family:宋体">到</span><span style="font-size:16px">Web</span><span style="font-size:16px;font-family:宋体">站点中的</span><span style="font-size:16px">WEB-INF/lib</span><span style="font-size:16px;font-family:宋体">目录下，如果在多个站点中都要使用就放到</span><span style="font-size:16px">TOMCAT</span><span style="font-size:16px;font-family:宋体">安装目录下的</span><span style="font-size:16px">lib</span><span style="font-size:16px;font-family:宋体">中。</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;x:parse&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;x:out&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;x:set&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;x:if&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;x:choose&gt;</span></p><p style="line-height: normal;"><span style="font-size:16px">&lt;x:forEach&gt;</span></p><p><br/></p><p><strong><span style="font-size:20px;font-family:宋体">JSP</span></strong><strong><span style="font-size:20px;font-family: 宋体">国际化</span></strong></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px;font-family:宋体">在</span><span style="font-size:16px">src</span><span style="font-size:16px;font-family:宋体">目录下建立</span><span style="font-size:16px">ApplicationResources.properties</span><span style="font-size:16px;font-family:宋体">文件，内容如下：</span></p><p><span style="font-size: 19px;font-family: Consolas">title=</span><span style="font-size:19px;font-family:Consolas;color:#2A00FF">\u7528\u6237\u6CE8\u518C</span></p><p><span style="font-size: 19px;font-family: Consolas">welcome=</span><span style="font-size:19px;font-family:Consolas;color:#2A00FF">\u6B22\u8FCE\u767B\u5F55\uFF01</span></p><p><span style="font-size:16px;font-family:宋体">再建一些形如</span><span style="font-size:16px">ApplicationResources_cn.properties</span><span style="font-size:16px;font-family:宋体">的文件</span><span style="font-size:16px">,cn</span><span style="font-size:16px;font-family:宋体">代表中国，例如</span><span style="font-size:16px">de</span><span style="font-size:16px;font-family:宋体">则代表德国</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size:16px;font-family:宋体">在</span><span style="font-size:16px">jsp</span><span style="font-size:16px;font-family:宋体">中引入：</span></p><p><span style="font-size:16px">&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;</span></p><p><span style="font-size:16px;font-family:宋体">再设置：</span></p><p><span style="font-size:16px">&lt;fmt:setBundle basename=&quot;ApplicationResources&quot; scope=&quot;session&quot;/&gt;</span></p><p><span style="font-size:16px;font-family:宋体">就可实现本地化了，例如打印上面文件中的</span><span style="font-size:16px">title</span><span style="font-size:16px;font-family:宋体">的内容：</span></p><p><span style="font-size:16px">&lt;fmt:message key=&quot;title&quot;&gt;&lt;/fmt:message&gt;</span></p><p><span style="font-size:16px;font-family:宋体">改变浏览器的语言环境即可显示不同国家的效果。</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><br/></p></div><div><br/></div><div><br/></div><p><br/></p>