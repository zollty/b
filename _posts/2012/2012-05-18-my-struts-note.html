---
layout: ue
title: 我的Struts技术笔记
category: Java框架和组件
tags: Struts
keywords: "Struts"
---

<p><br/></p><p><span style="font-size: 24px;"><strong>Struts 2</strong></span><br/></p><p><span style="font-size:16px">1. Struts</span><span style="font-size:16px;font-family:宋体">主要是充当控制器（</span><span style="font-size:16px">Controller</span><span style="font-size:16px;font-family:宋体">）的作用，同时也给</span><span style="font-size:16px">V</span><span style="font-size:16px;font-family:宋体">端提供了许多标签，这些标签能够和</span><span style="font-size:16px">AJAX</span><span style="font-size:16px;font-family:宋体">结合起来。</span></p><p><span style="font-size:16px">2.</span><span style="font-size:16px;font-family:宋体"> 要使用</span><span style="font-size:16px">Struts 2</span><span style="font-size:16px;font-family:宋体">，需要把相关的</span><span style="font-size:16px">jar</span><span style="font-size:16px;font-family:宋体">文件拷贝到</span><span style="font-size:16px">WEB-INF/lib</span><span style="font-size:16px;font-family:宋体">目录下，并在</span><span style="font-size:16px">web.xml</span><span style="font-size:16px;font-family:宋体">配置文件中配置</span><span style="font-size:16px">Filter</span><span style="font-size:16px;font-family:宋体">（过滤器）。</span></p><p><span style="font-size:16px">3. Filter</span><span style="font-size:16px;font-family:宋体">配置好后，就可以使用</span><span style="font-size:16px">Struts 2</span><span style="font-size:16px;font-family:宋体">了，为控制层配置</span><span style="font-size: 16px">Action </span><span style="font-size:16px;font-family:宋体">处理结果和视图文件之间的映射，配置文件为</span><span style="font-size:16px">src/struts.xml</span><span style="font-size:16px;font-family:宋体">。示例如下：</span></p><p style="line-height: normal;"><span style="font-family:Consolas;color:teal">&lt;?</span><span style="font-family:Consolas;color:#3F7F7F">xml</span><span style="font-family:Consolas"> <span style="color:#7F007F">version</span>=<i><span style="color:#2A00FF">&quot;1.0&quot;</span></i> <span style="color:#7F007F">encoding</span>=<i><span style="color:#2A00FF">&quot;UTF-8&quot;</span></i> <span style="color:teal">?&gt;</span></span></p><p style="line-height: normal;"><span style="font-family:Consolas;color:teal">&lt;!</span><span style="font-family:Consolas;color:#3F7F7F">DOCTYPE</span><span style="font-family:Consolas"> <span style="color:teal">struts</span> <span style="color:gray">PUBLIC</span></span></p><p style="line-height: normal;"><span style="font-family:Consolas">&nbsp;&nbsp;&nbsp; <span style="color:teal">&quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;</span></span></p><p style="line-height: normal;"><span style="font-family:Consolas">&nbsp;&nbsp;&nbsp; <span style="color:#3F7F5F">&quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family:Consolas;color:#3F5FBF">&lt;!-- struts</span><span style="font-family:宋体;color:#3F5FBF">为</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">配置文件根元素</span><span style="font-family: Consolas;color:#3F5FBF">--&gt;</span></p><p style="line-height: normal;"><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">struts</span><span style="font-family:Consolas;color:teal">&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">constant</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;struts.i18n.encoding&quot;</span></i> <span style="color:#7F007F">value</span>=<i><span style="color:#2A00FF">&quot;gb2312&quot;</span></i><span style="color:teal">&gt;&lt;/</span><span style="color:#3F7F7F">constant</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#3F5FBF">&lt;!-- Action</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">必</span><span style="font-family:宋体;color:#3F5FBF">须</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">放在指定的包名空</span><span style="font-family:宋体;color:#3F5FBF">间</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">中</span><span style="font-family:Consolas;color:#3F5FBF">--&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">package</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;struts2&quot;</span></i> <span style="color:#7F007F">extends</span>=<i><span style="color:#2A00FF">&quot;struts-default&quot;</span></i><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">action</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;showAll&quot;</span></i> <span style="color:#7F007F">class</span>=<i><span style="color:#2A00FF">&quot;showAllAction&quot;</span></i><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#3F5FBF">&lt;!-- </span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">定</span><span style="font-family:宋体;color:#3F5FBF">义处</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">理</span><span style="font-family:宋体;color:#3F5FBF">结</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">果与</span><span style="font-family:宋体;color:#3F5FBF">视图资</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">源之</span><span style="font-family:宋体;color:#3F5FBF">间</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">的关系</span><span style="font-family:Consolas;color:#3F5FBF">--&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">result</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;success&quot;</span></i><span style="color:teal">&gt;</span>/showAll.jsp<span style="color:teal">&lt;/</span><span style="color:#3F7F7F">result</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;/</span><span style="font-family:Consolas;color:#3F7F7F">action</span><span style="font-family:Consolas;color:teal">&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">action</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;delete&quot;</span></i> <span style="color:#7F007F">class</span>=<i><span style="color:#2A00FF">&quot;deleteAction&quot;</span></i><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#3F5FBF">&lt;!-- </span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">定</span><span style="font-family:宋体;color:#3F5FBF">义处</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">理</span><span style="font-family:宋体;color:#3F5FBF">结</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">果与</span><span style="font-family:宋体;color:#3F5FBF">视图资</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">源之</span><span style="font-family:宋体;color:#3F5FBF">间</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">的关系</span><span style="font-family:Consolas;color:#3F5FBF">--&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">result</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;success&quot;</span></i> <span style="color:#7F007F">type</span>=<i><span style="color:#2A00FF">&quot;redirect&quot;</span></i><span style="color:teal">&gt;</span>/showAll.action<span style="color:teal">&lt;/</span><span style="color:#3F7F7F">result</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;/</span><span style="font-family:Consolas;color:#3F7F7F">action</span><span style="font-family:Consolas;color:teal">&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">action</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;add&quot;</span></i> <span style="color:#7F007F">class</span>=<i><span style="color:#2A00FF">&quot;addAction&quot;</span></i><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#3F5FBF">&lt;!-- </span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">定</span><span style="font-family:宋体;color:#3F5FBF">义处</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">理</span><span style="font-family:宋体;color:#3F5FBF">结</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">果与</span><span style="font-family:宋体;color:#3F5FBF">视图资</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">源之</span><span style="font-family:宋体;color:#3F5FBF">间</span><span style="font-family:&#39;MS Mincho&#39;;color:#3F5FBF">的关系</span><span style="font-family:Consolas;color:#3F5FBF">--&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">result</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;success&quot;</span></i> <span style="color:#7F007F">type</span>=<i><span style="color:#2A00FF">&quot;redirect&quot;</span></i><span style="color:teal">&gt;</span>/showAll.action<span style="color:teal">&lt;/</span><span style="color:#3F7F7F">result</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">result</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;input&quot;</span></i><span style="color:teal">&gt;</span>/add.jsp<span style="color:teal">&lt;/</span><span style="color:#3F7F7F">result</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;</span><span style="font-family:Consolas;color:#3F7F7F">result</span><span style="font-family:Consolas"> <span style="color:#7F007F">name</span>=<i><span style="color:#2A00FF">&quot;error&quot;</span></i><span style="color:teal">&gt;</span>/add.jsp<span style="color:teal">&lt;/</span><span style="color:#3F7F7F">result</span><span style="color:teal">&gt;</span></span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;/</span><span style="font-family:Consolas;color:#3F7F7F">action</span><span style="font-family:Consolas;color:teal">&gt;</span></p><p style="line-height: normal;"><span style="font-family: Consolas">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:teal">&lt;/</span><span style="font-family:Consolas;color:#3F7F7F">package</span><span style="font-family:Consolas;color:teal">&gt;</span></p><p style="line-height: normal;"><span style="font-family:Consolas;color:teal">&lt;/</span><span style="font-family:Consolas;color:#3F7F7F">struts</span><span style="font-family:Consolas;color:teal">&gt;</span></p><p><span style="font-size:16px;font-family:宋体">&nbsp;</span></p><p><span style="font-size: 20px;">Struts 2<span style="font-family: 宋体;">的高级功能</span></span></p><p><span style="font-size: 20px;">1.<span style="font-family: 宋体;">国际化</span></span></p><p><span style="font-size:16px;font-family:宋体">新建</span><span style="font-size:16px">src\myMessage_zh_CN.properties</span><span style="font-size:16px;font-family:宋体">文件，内容示例如下：</span></p><p><span style="font-family:宋体;color:#3F5FBF">#Generated by ResourceBundle Editor (http://eclipse-rbe.sourceforge.net)</span></p><p><span style="font-family:Consolas;color:#3F7F7F">age.rule</span><span style="font-size:16px;font-family:宋体"> = \u5E74\u9F84\u5FC5\u987B\u5728${min}\u81F3${max}\u4E4B\u95F4</span></p><p><span style="font-family:Consolas;color:#3F7F7F">password.required</span><span style="font-size:16px;font-family:宋体"> = \u5FC5\u987B\u8F93\u5165\u5BC6\u7801</span></p><p><span style="font-size:16px;font-family:宋体">可以用</span><span style="font-size:16px">Eclipse</span><span style="font-size:16px;font-family:宋体">来生成该文件。名字的前面部分</span><span style="font-size:16px">myMessage</span><span style="font-size:16px;font-family:宋体">由自己随便取。</span></p><p><span style="font-size:16px;font-family:宋体">&nbsp;然后在</span><span style="font-size:16px">src\struts.xml</span><span style="font-size: 16px;font-family:宋体">中添加如下一行即可：</span></p><p><span style="font-family:Consolas;color:#3F7F7F">&lt;constant</span> <span style="font-family:Consolas;color:#7F007F">name</span><span style="font-family: Consolas">=</span><i><span style="font-family:Consolas;color:#2A00FF">&quot;struts.custom.i18n.resources&quot;</span></i> <span style="font-family:Consolas;color:#7F007F">value</span><span style="font-family: Consolas">=</span><i><span style="font-family:Consolas;color:#2A00FF">&quot;myMessage&quot;</span></i><span style="font-family:Consolas;color:#3F7F7F">&gt;&lt;/constant&gt;</span></p><p><span style="font-size:16px">&nbsp;</span></p><p><span style="font-size: 20px;">2.<span style="font-family: 宋体;"> 服务器端校验</span></span></p><p><span style="font-size:16px;font-family:宋体">只需要在</span><span style="font-size:16px">ActionName.java</span><span style="font-size: 16px;font-family:宋体">文件目录下，加入</span><span style="font-size:16px">ActionName-validation.xml</span><span style="font-size:16px;font-family:宋体">文件，</span><span style="font-size:16px">xml</span><span style="font-size:16px;font-family:宋体">文件的</span><span style="font-size:16px">ActionName</span><span style="font-size:16px;font-family:宋体">必须和</span><span style="font-size:16px">java</span><span style="font-size:16px;font-family:宋体">文件的</span><span style="font-size:16px">ActionName</span><span style="font-size:16px;font-family:宋体">相同。例如注册页面的校验，有如下几个文件：</span></p><p><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WebRoot\register.jsp</span><span style="font-size:16px;font-family:宋体">，其中的提交表单</span><span style="font-size:16px">action=&quot;register&quot;</span></p><p><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; src\struts.xml</span><span style="font-size:16px;font-family:宋体">，在里面把表单的</span><span style="font-size:16px">action=&quot;register&quot;</span><span style="font-size:16px;font-family:宋体">定向到</span><span style="font-size:16px">RegisterAction.java</span><span style="font-size:16px;font-family:宋体">文件</span></p><p><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; src\com\javaweb\RegisterAction.java</span><span style="font-size:16px;font-family:宋体">，里面定义了</span><span style="font-size:16px">name</span><span style="font-size:16px;font-family:宋体">、</span><span style="font-size:16px">age</span><span style="font-size:16px;font-family:宋体">等属性及</span><span style="font-size:16px">get/set</span><span style="font-size:16px;font-family:宋体">方法</span></p><p><span style="font-size:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; src\com\javaweb\ RegisterAction-validation.xml</span><span style="font-size:16px;font-family: 宋体">校验对应</span><span style="font-size: 16px">java</span><span style="font-size:16px;font-family:宋体">文件中的属性</span></p><p><br/></p><div><br/></div><div><br/></div><div><div><strong><span style="font-size: 20px;">Struts排除url不拦截</span></strong></div><div><br/></div><div>在struts.xml配置如下：</div><div><strong>&lt;constant name=&quot;struts.action.excludePattern&quot; value=&quot;/mlf4j/.*&quot;/&gt;&nbsp;</strong></div><div>即可排除 /mlf4j/** 这下面的URL</div></div><div><br/></div><div>struts.xml完整配置如下：</div><div><pre class="brush:xml;toolbar:false">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;&nbsp;
&lt;!DOCTYPE&nbsp;struts&nbsp;PUBLIC&nbsp;
&nbsp;&quot;-//Apache&nbsp;Software&nbsp;Foundation//DTD&nbsp;Struts&nbsp;Configuration&nbsp;2.3//EN&quot;&nbsp;
&nbsp;&quot;
http://struts.apache.org/dtds/struts-2.3.dtd
&quot;&gt;&nbsp;
&lt;struts&gt;&nbsp;
&nbsp;&lt;constant&nbsp;name=&quot;struts.enable.DynamicMethodInvocation&quot;&nbsp;value=&quot;false&quot;&nbsp;/&gt;&nbsp;
&nbsp;&lt;constant&nbsp;name=&quot;struts.devMode&quot;&nbsp;value=&quot;true&quot;&nbsp;/&gt;&nbsp;
&nbsp;&lt;constant&nbsp;name=&quot;struts.action.excludePattern&quot;&nbsp;value=&quot;/mlf4j/.*&quot;/&gt;&nbsp;
&nbsp;&lt;package&nbsp;name=&quot;default&quot;&nbsp;namespace=&quot;/&quot;&nbsp;extends=&quot;struts-default&quot;&gt;&nbsp;
&nbsp;&lt;default-action-ref&nbsp;name=&quot;execute&quot;&nbsp;/&gt;&nbsp;
&nbsp;&lt;/package&gt;&nbsp;
&nbsp;&lt;include&nbsp;file=&quot;example.xml&quot;/&gt;&nbsp;
&nbsp;&lt;!--&nbsp;Add&nbsp;packages&nbsp;here&nbsp;--&gt;&nbsp;
&lt;/struts&gt;</pre></div><div><br/></div><p><br/></p>