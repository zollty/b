---
layout: ue
title: C++输入输出流
category: C、CPP_程序设计
tags: C、CPP
keywords: "C、CPP"
---

<p><span style="font-size: 20px;">输入输出流</span></p><p><br/></p><p>1. 用控制符输出格式，例：</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
#include&nbsp;&lt;iomanip&gt;//利用控制符输出必须包含iomanip头文件&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main()&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;a;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;input&nbsp;a:&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;a;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;dec:&quot;&lt;&lt;dec&lt;&lt;a&lt;&lt;endl;&nbsp;&nbsp;//以十进制输出&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;hex:&quot;&lt;&lt;hex&lt;&lt;a&lt;&lt;endl;&nbsp;&nbsp;//十六进制&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;oct:&quot;&lt;&lt;setbase(8)&lt;&lt;a&lt;&lt;endl;&nbsp;//八进制&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*pt=&quot;China&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;setw(10)&lt;&lt;pt&lt;&lt;endl;&nbsp;//宽度为10，China前补上5个空格&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;setfill(&#39;*&#39;)&lt;&lt;setw(10)&lt;&lt;pt&lt;&lt;endl;&nbsp;//China前补上5个*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;pi=22.0/7.0;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;setiosflags(ios::scientific)&lt;&lt;setprecision(8);//科学记数法，8位小数&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;pi=&quot;&lt;&lt;pi&lt;&lt;endl;&nbsp;&nbsp;&nbsp;&nbsp;//输出pi&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;pi=&quot;&lt;&lt;setprecision(4)&lt;&lt;pi&lt;&lt;endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//改为4位小数&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;pi=&quot;&lt;&lt;setiosflags(ios::fixed)&lt;&lt;pi&lt;&lt;endl;//去掉科学记数法&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>控制符用法列表如下：</p><p><img src="http://hi.csdn.net/attachment/201109/13/0_1315905531R5X9.gif"/></p><p>&nbsp;</p><p>2. 用流对象cout中用于控制输出格式的成员函数来控制输出格式</p><p>例如：</p><p>cout.setf(iso::showbase)</p><p>cout.setf(iOS::oct)</p><p>cout.width(10)</p><p>cout.setf(ios::internal | ios::showpos)</p><p>等等，其中参数iso::showbase属于格式标志，是在类ios中定义的枚举值。因为用流控制成员函数没有控制符使用方便，所以一般不常用。</p><p>&nbsp;</p><p>3. put函数（cout对象的成员函数）</p><p>作用：输出单个字符，例如：</p><p>cout.put(‘a’); //等价于cout.put(97)，97为a的ASCII码</p><p>cout.put(71).put(79).put(79).put(68).put(‘\n’);//连续输出字符GOOD</p><p>将字符串“BASIC”反序输出：</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*a=&quot;BASIC&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=4;i&gt;=0;i--)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout.put(*(a+i));&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout.put(&#39;\n&#39;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>也可以用C语言的格式：将上面的cout.put()改成putchar()</p><p>&nbsp;</p><p>4. cin.get()提取一个字符，类似于C语言中的getchar()，但是它可以有3个参数：</p><p>cin.get(字符数组，字符个数n，终止字符)</p><p>例如：cin.get(ch, 10, ‘\n’); cout&lt;&lt;ch&lt;&lt;endl;</p><p>get函数中第三个参数可以省略，此时默认为’\n’。下面两行等价：</p><p>cin.get(ch, 10, ‘\n’);</p><p>cin.get(ch, 10);</p><p>终止字符也可以用其他字符，例如：</p><p>cin.get(ch,10,’x’);</p><p>5. cin.getline用于输入一个字符串</p><p>用法:cin.getline(char*,int,char)，ENTER来结束输入，例如：</p><pre class="brush:cpp;toolbar:false">#include&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main()&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;ArSize&nbsp;=&nbsp;20;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;name[ArSize];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;dessert[ArSize];&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;Enter&nbsp;your&nbsp;name:\n&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.getline(name,ArSize);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;Enter&nbsp;your&nbsp;favorite&nbsp;dessert:\n&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.getline(dessert,ArSize);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;I&nbsp;have&nbsp;some&nbsp;delicious&nbsp;&quot;&lt;&lt;dessert;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;&nbsp;for&nbsp;you,&nbsp;&quot;&lt;&lt;name&lt;&lt;&quot;.\n&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>cin&lt;&lt;与cin.getline()的区别：用“cin&lt;&lt;”读数据时以空白字符（空格、tab、回车）作为终止标志，而用cin.getline()可以读入一系列字符，包括空格。例如：</p><p>char c[30];//输入I’m a good boy !</p><p>cin&gt;&gt;c;// c只能得到第一个空格前的I’m</p><p>cin.getline(c);//c可以得到整句I’m a good boy !</p><p>&nbsp;</p><p>6. eof函数</p><p>eof是end of file的缩写，表示“文件结束”，eof函数值为非零表示真，否则为0表示假。例如：</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;c;&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!cin.eof())&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;(c=cin.get())&nbsp;!=&nbsp;&#39;&nbsp;&#39;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout.put(c);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>当输入Ctrl+Z时，cin.eof()就为真，!cin.eof()则为假，所以结束while循环。</p><p>&nbsp;</p><p>7. cin.peek()函数和cin.putback()函数</p><p>用法见下面程序的注释：</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;c[30];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;w;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.getline(c,&nbsp;30,&nbsp;&#39;^&#39;);//输入I&nbsp;am&nbsp;a&nbsp;cool&nbsp;boy&nbsp;!^&#39;m&nbsp;bad&nbsp;girl.^&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;w=cin.peek();//获取当前指针（指向^）的下一个字符（即’）&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout.put(w).put(&#39;\n&#39;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.putback(c[0]);//获取前面get或者getline中的一个字符，插入到当前字符前（即w前）&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.getline(c,&nbsp;30,&nbsp;&#39;^&#39;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;c&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>即，我们可以用cin.peek()函数来获取当前输入流指针的当前指向；可以用cin.putback()来获取前面get或getline函数输入的内容中的一个字符，并插入到当前流指针的前面。</p><p>&nbsp;</p><p>8. cin.ignore()函数</p><p>用法cin.ignore(5, ‘A’); //从当前指针位置（不包括当前指针）开始，忽略后面cin输入的5个字符，或者遇到字符’A’就不再往后跳了（‘A’会被跳过）。</p><p>默认写作：cin.ignore()，相当于cin.ignore(1, EOF)，EOF代表文件结束符</p><p>例如：&nbsp;</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;c[30];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.getline(c,&nbsp;30,&nbsp;&#39;^&#39;);//输入I&nbsp;am&nbsp;a&nbsp;cool&nbsp;boy&nbsp;!^123I&#39;m&nbsp;bad&nbsp;girl.^I’m&nbsp;smart.&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;The&nbsp;first&nbsp;part&nbsp;is:&nbsp;&quot;&lt;&lt;c&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.ignore(3);//忽略掉^后面的1233个字符&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cin.getline(c,&nbsp;30,&nbsp;&#39;^&#39;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;The&nbsp;second&nbsp;part&nbsp;is:&nbsp;&quot;&lt;&lt;c&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p><br/></p><p>9.文件</p><p>(1)ASCII文件（类名ifstream、ofstream和fstream，存入是out，读取是in）</p><p>a. 存入文件</p><p>ofstream outfile；</p><p>outfile.open(&quot;f1.dat&quot;,ios::out); // ios::out（格式标志）是默认的，故也可以省略</p><p>上面两行等价于：</p><p>ofstream outfile(&quot;f1.dat&quot;,ios::out);</p><p>现在可以用outfile对象来存入数据了：</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cin&gt;&gt;a[i];</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outfile&lt;&lt;a[i]&lt;&lt;&quot; &quot;;//每读入一个整数就输出到磁盘文件</p><p>用完记得，关闭文件：</p><p>&nbsp; &nbsp; &nbsp; &nbsp;outfile.close();</p><p>文件输入输出格式标志如下：</p><p><img src="http://hi.csdn.net/attachment/201109/13/0_1315905539Nlzl.gif"/></p><p>&nbsp;完整实例：</p><pre class="brush:cpp;toolbar:false">/*将键盘输入的数据存入文件中*/&nbsp;&nbsp;
#include&nbsp;&lt;fstream&gt;&nbsp;&nbsp;
#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;a[10];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ofstream&nbsp;outfile(&quot;f1.dat&quot;,ios::out);&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if(!outfile)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&lt;&lt;&quot;open&nbsp;error!&quot;&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;enter&nbsp;10&nbsp;integer&nbsp;numbers:&quot;&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;i&lt;10;i++)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;a[i];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outfile&lt;&lt;a[i]&lt;&lt;&quot;&nbsp;&quot;;//每读入一个整数就输出到磁盘文件&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;outfile.close();//记住关闭文件&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>生产的f1.dat文件可以用记事本打开，也可以在DOS下用TYPE命令打开：</p><p>C:\Documents and Settings&gt;D: &nbsp; &nbsp; //直接输入盘符，切换到D盘</p><p>D:\&gt;cd 001\mycpp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//用cd命令切换到文件目录</p><p>D:\ 001\mycpp&gt;type f1.dat &nbsp; &nbsp;//用TYPE命令查看dat文件</p><p>2 5 6 8 7 9 5 6 4 10</p><p>&nbsp;</p><p>b. 读取文件，例：</p><p>和存入文件差不多：infile(&quot;f1.dat&quot;,ios::in)，infile&gt;&gt;a[i]，infile.close()</p><p>实例如下：</p><pre class="brush:cpp;toolbar:false">/*将文件中的数据在屏幕中显示*/&nbsp;&nbsp;
#include&nbsp;&lt;fstream&gt;&nbsp;&nbsp;
#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;a[10],max,i,order;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ifstream&nbsp;infile(&quot;f1.dat&quot;,ios::in);//打开磁盘文件&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if(!infile)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&lt;&lt;&quot;open&nbsp;error!&quot;&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(i=0;i&lt;10;i++)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infile&gt;&gt;a[i];//从文件中读入整数，存到a[i]中&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;a[i]&lt;&lt;&quot;&nbsp;&quot;;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;max=a[0];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;order=0;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(i=1;&nbsp;i&lt;10;&nbsp;i++)//找出最大的数及下标&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(a[i]&gt;max)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max=a[i];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order=i;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;&quot;max=&quot;&lt;&lt;max&lt;&lt;endl&lt;&lt;&quot;order=&quot;&lt;&lt;order&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;infile.close();//记住关闭文件&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p><br/></p><p>编一个专门读取dat文件内容的程序：</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;fstream&gt;&nbsp;&nbsp;
#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
void&nbsp;display_dat(char&nbsp;*filename)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ifstream&nbsp;infile(filename,&nbsp;ios::in);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if(!infile)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&lt;&lt;&quot;open&nbsp;error!&quot;&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;ch;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(infile.get(ch))&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout.put(ch);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;infile.close();&nbsp;&nbsp;
}&nbsp;&nbsp;
&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;display_dat(&quot;f1.dat&quot;);//相对目录&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p><br/></p><p>(2)二进制文件（类名为ifstream、ofstream和fstream，与ASCII用到的类相同）</p><p>成员函数read和write，原型如下：</p><p>istream &amp; read(char * buffer, int len);//读取</p><p>ostream &amp; write(const char * buffer, int len);//存入</p><p>两个参数：char指针指向要读写的对象，len代表读写的字节数。用法如下：</p><p>outfile.write((char *)&amp;stud[i], sizeof(stud[0]));</p><p>iofile.read((char *)&amp;stud[i], sizeof(stud[0]));</p><p>注意原型声明中类型为字符指针型，传递时必须用字符指针（p）或者字符类型数据的地址（&amp;s），只能将相同类型的指针或者地址赋值给指针。</p><p>其他成员函数，例如：</p><p>infile.seekg(100);//g是get的意思，代表输入。文件指针向前移动50个字节</p><p>infile.seekg(-50,ios::cur);//输入文件指针从当前位置后移50字节</p><p>outfile.seekp(-70,ios::end);//输出文件指针从文件尾倒退70字节</p><p><img src="http://hi.csdn.net/attachment/201109/13/0_1315905696O5uH.gif"/></p><p>完整实例：</p><pre class="brush:cpp;toolbar:false">/*将数据存入文件*/&nbsp;&nbsp;
#include&nbsp;&lt;fstream&gt;&nbsp;&nbsp;
#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
struct&nbsp;student&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;name[20];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;num;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;age;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;sex;&nbsp;&nbsp;
};&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;student&nbsp;stud[3]={&quot;Li&quot;,1001,18,&#39;f&#39;,&quot;Fun&quot;,1002,19,&#39;m&#39;,&quot;Wang&quot;,1004,17,&#39;f&#39;};&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ofstream&nbsp;outfile(&quot;stud.dat&quot;,ios::binary);//以二进制形式输入数据到文件&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if(!outfile)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&lt;&lt;&quot;open&nbsp;error!&quot;&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abort(&nbsp;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;i&lt;3;i++)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outfile.write((char*)&amp;stud[i],&nbsp;sizeof(stud[i]));//强制数据类型转换&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;outfile.close(&nbsp;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p><br/></p><p>例子：访问文件中的任何一个位置，并频繁读写</p><p>要求：有5个学生的数据，把它们存到磁盘文件中，将磁盘文件中的第1,3,5个学生数据读入程序，并显示出来；将第3个学生的数据修改后存回磁盘文件中的原有位置；从磁盘文件读入修改后的5个学生的数据并显示出来。程序如下：</p><pre class="brush:cpp;toolbar:false">#include&nbsp;&lt;fstream&gt;&nbsp;&nbsp;
#include&nbsp;&lt;iostream&gt;&nbsp;&nbsp;
using&nbsp;namespace&nbsp;std;&nbsp;&nbsp;
struct&nbsp;student&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;num;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;name[20];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;score;&nbsp;&nbsp;
};&nbsp;&nbsp;
&nbsp;&nbsp;
int&nbsp;main(&nbsp;)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;student&nbsp;stud[5]={1001,&quot;Li&quot;,85,1002,&quot;Fun&quot;,97.5,1004,&quot;Wang&quot;,54,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1006,&quot;Tan&quot;,76.5,1010,&quot;ling&quot;,96};&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;fstream&nbsp;iofile(&quot;stud.dat&quot;,ios::in|ios::out|ios::binary);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;//用fstream类定义输入输出二进制文件流对象iofile，注意名字iofile是自定义的&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if(!iofile)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&lt;&lt;&quot;open&nbsp;error!&quot;&lt;&lt;endl;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abort(&nbsp;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;i&lt;5;i++)//向磁盘文件输出5个学生的数据&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iofile.write((char&nbsp;*)&amp;stud[i],&nbsp;sizeof(stud[i]));&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;student&nbsp;stud1[5];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//用来存放从磁盘文件读入的数据&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(i=0;&nbsp;i&lt;5;&nbsp;i=i+2)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iofile.seekg(i*sizeof(stud[i]),ios::beg);&nbsp;&nbsp;//定位于第0,2,4学生数据开头&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iofile.read((char&nbsp;*)&amp;stud1[i/2],&nbsp;sizeof(stud1[0]));&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//先后读入3个学生的数据，存放在stud1[0],stud[1]和stud[2]中&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;stud1[i/2].num&lt;&lt;&quot;&nbsp;&quot;&lt;&lt;stud1[i/2].name&lt;&lt;&quot;&nbsp;&quot;&lt;&lt;stud1[i/2].score&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//输出stud1[0],stud[1]和stud[2]各成员的值&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;stud[2].num=1012;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//修改第3个学生(序号为2)的数据&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;strcpy(stud[2].name,&quot;Wu&quot;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;stud[2].score=60;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;iofile.seekp(2*sizeof(stud[0]),ios::beg);&nbsp;&nbsp;&nbsp;//定位于第3个学生数据的开头&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;iofile.write((char&nbsp;*)&amp;stud[2],sizeof(stud[2]));&nbsp;//更新第3个学生数据&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;iofile.seekg(0,ios::beg);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//重新定位于文件开头&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;for(i=0;i&lt;5;i++)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iofile.read((char&nbsp;*)&amp;stud[i],sizeof(stud[i]));&nbsp;&nbsp;//读入5个学生的数据&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;stud[i].num&lt;&lt;&quot;&nbsp;&quot;&lt;&lt;stud[i].name&lt;&lt;&quot;&nbsp;&quot;&lt;&lt;stud[i].score&lt;&lt;endl;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;iofile.close(&nbsp;);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;&nbsp;
}</pre><p>&nbsp;</p><p><br/></p>