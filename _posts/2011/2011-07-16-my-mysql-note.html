---
layout: ue
title: 我的MySQL技术笔记
category: 数据库技术_综合
tags: MySQL
keywords: "MySQL"
---

<p style="line-height: 32.4px; white-space: normal;"><span style="font-size: 16px;"></span><br/></p><p style="line-height: 32.4px; white-space: normal;"><span style="font-size: 20px;">一、MySQL Connector for J （MySQL Java JDBC驱动）</span></p><p>1、Java数据类型 和 MySQL数据类型的对应关系：</p><p>参见：<a href="https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-type-conversions.html">https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-type-conversions.html</a></p><p><br/></p><p>2、MySQL 的 JDBC API 实现</p><p>参见：<a href="https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-implementation-notes.html">https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-implementation-notes.html</a></p><p><br/></p><p>3、JDBC URL 格式、语法和参数</p><p>参见：<a href="https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html">https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html</a></p><p><br/></p><p>在使用数据库连接池的情况下，最好设置如下两个参数：</p><p><strong>autoReconnect=true&amp;failOverReadOnly=false</strong></p><p>对应中文环境，通常MySQL连接URL可以设置为：</p><p>jdbc:mysql://localhost:3306/test?<strong>useUnicode=true&amp;characterEncoding=utf8</strong>&amp;autoReconnect=true&amp;failOverReadOnly=false</p><p><br/></p><p>MySQL编码和Java编码对应表：</p><p><a href="https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-charsets.html">https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-charsets.html</a> </p><p><br/></p><p style="line-height: 32.4px; white-space: normal;"><br/></p><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="font-size: 22px;">二、MySQL官方文档内容</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">1、MySQL自带的系统表</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">参见：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><a href="https://dev.mysql.com/doc/refman/5.7/en/system-database.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/system-database.html</span></a></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">2、数据类型</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">参见：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><a href="https://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html</span></a></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">3、字符编码相关</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">参见：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><a href="https://dev.mysql.com/doc/refman/5.7/en/charset.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/charset.html</span></a></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">创建表时明确指定：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">CREATE DATABASE</span> <span style="color: rgb(223, 64, 42);">mydb</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">DEFAULT CHARACTER SET </span><span style="color: rgb(223, 64, 42); background-color: rgb(250, 226, 32);">utf8</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);"> &nbsp;DEFAULT COLLATE </span><span style="color: rgb(223, 64, 42); background-color: rgb(250, 226, 32);">utf8_general_ci</span><span style="background-color: rgb(250, 226, 32);">;</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">备注：</div><p style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><strong>COLLATE（collate）</strong>：用于指定数据集如何排序，以及字符串的比对规则。</p><p style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">（A collation is a set of rules that defines how to compare and sort character strings.）</p><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">collation 名字的规则可以归纳为这两类：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">1. characterset_language/other_ci/cs</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">2. characterset_bin（二进制）</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">ci 是 case insensitive （大小写不敏感） 的缩写， cs 是 case sensitive 的缩写。即，指定大小写是否敏感。</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">具体参见：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><a href="https://dev.mysql.com/doc/refman/5.7/en/adding-collation.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/adding-collation.html</span></a></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">在my.ini配置文件中指定默认值：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">[mysqld]</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">character-set-server=utf8</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">collation-server=utf8_general_ci</div><p style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><br/></p><p style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">查看当前连接（Connection）的编码</p><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">SHOW VARIABLES LIKE &#39;character_set%&#39;;</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">SHOW VARIABLES LIKE &#39;collation%</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="color: rgb(57, 57, 57);">备注：Character set issues affect not only data storage, but also communication between client programs and the MySQL server. If you want the client program to communicate with the server using a character set different from the default, you&#39;ll need to indicate which one. For example, to use the utf8 Unicode character set, issue this statement after connecting to the server:</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="color: rgb(57, 57, 57); background-color: rgb(250, 226, 32);">SET NAMES &#39;utf8&#39;;</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">SET NAMES &#39;utf8&#39; COLLATE &#39;utf8_general_ci&#39;;</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">或者使用：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">charset utf8;</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">这个设置应该是一次连接，如果再次连接又需要重新设置。如果想设置默认值，在my.ini配置文件中设置如下：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">[mysql]</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="background-color: rgb(250, 226, 32);">default-character-set=utf8</span></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><strong>4、SQL查询优化</strong></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">参见：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><a href="https://dev.mysql.com/doc/refman/5.7/en/select-optimization.html"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;">https://dev.mysql.com/doc/refman/5.7/en/select-optimization.html</span></a></div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">5、保留关键字</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;">参见：</div><div style="white-space: pre-wrap; line-height: 1.75; font-size: 14px;"><span style="color: rgb(0, 56, 132); text-decoration-line: underline;"><a href="https://dev.mysql.com/doc/refman/5.7/en/keywords.html">https://dev.mysql.com/doc/refman/5.7/en/keywords.html</a></span></div><p style="line-height: 32.4px; white-space: normal;"><span style="font-size: 16px;"><br/></span></p><p style="line-height: 32.4px; white-space: normal;"><span style="font-size: 16px;">启动MySQL服务：</span>net start mysql</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><br/></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">注：我们以<span style="font-weight: 700;">XXX</span>代表数据库名(database)，<span style="font-weight: 700;">aaa</span>代表数据表名(table), id和name为列名(column)</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><br/></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">DOS下连接数据库：mysql -u用户名 -hIP&nbsp;-p密码</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">备份（前提是以断开数据库连接）：mysqldump -u用户名 -p密码 数据库名 &gt;F:\XXX.txt</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">恢复：mysql -u用户名 -p密码 数据库名 &lt;F:\XXX.txt</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">数据库操作：<br/>create database XXX;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">show databases;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">use XXX;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">drop database XXX;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">表操作：<br/>1.创建create<br/>——————————————————————<br/>create table aaa(<br/>id int auto_increment primary key,<br/>name varchar(30) not null,<br/>);<br/>——————————————————————<br/>2.查看show<br/>——————————————————————<br/>show columns from aaa;<br/>show columns from aaa from XXX;<br/>describe aaa id;（只显示一列）简写为：desc aaa id;<br/>——————————————————————<br/>3.修改alert<br/>———————————————————————————————————————————<br/>alter table aaa add email varchar(30) not null,modify name varchar(40) not null;<br/>注意修改的最小单位为一列，不能单独修改一列中的某一个属性。例如修改name varchar(10) not null成varchar(30),如果用modify name varchar(30);就会出错，因为默认把not null也修改成null了。<br/>———————————————————————————————————————————<br/>4.插入insert<br/>—————————————————————————————————————<br/>insert into aaa(user,password,email) values(&#39;zollty&#39;,&#39;123456&#39;,&#39;zollty@qq.com&#39;);<br/>—————————————————————————————————————<br/>5.#######表查询语句#####<br/>————————————————————————————————</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">select * from aaa<br/>where ……<br/>group by ……<br/>order by ……<br/>having ……<br/>limit ……<br/>————————————————————————————————<br/>6.修改update<br/>—————————————————————————————<br/>update aaa set password=&#39;741951&#39; where user=&#39;zollty&#39;;<br/>—————————————————————————————<br/>7.删除delete<br/>———————————————————<br/>delete from aaa where user=&#39;tiger&#39;;<br/>———————————————————</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">&nbsp;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">&nbsp;特别案例分析：</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">1.联合查询</p><div class="dp-highlighter bg_sql" style="white-space: normal; font-family: Consolas, &#39;Courier New&#39;, Courier, mono, serif; font-size: 14px; width: 936px; overflow: auto; padding-top: 1px; line-height: 26px; margin: 18px 0px !important;"><ol class="dp-sql list-paddingleft-2" style="width: 889.188px; padding: 0px; border: none; list-style-position: initial; list-style-image: initial; color: rgb(92, 92, 92); margin-bottom: 1px !important; margin-left: 45px !important;"><li><p><span style="margin: 0px; padding: 0px; color: black; background-color: inherit;"><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">SELECT</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;a&nbsp;.&nbsp;*&nbsp;,&nbsp;b.</span><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">name</span><span style="margin: 0px; padding: 0px; background-color: inherit;">,&nbsp;b.email,&nbsp;b.qq,&nbsp;c.revert,&nbsp;c.revert_time&nbsp;&nbsp;</span></span></p></li><li><p><span style="margin: 0px; padding: 0px; color: black; background-color: inherit;"><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">FROM</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;post&nbsp;a&nbsp;&nbsp;</span></span></p></li><li><p><span style="margin: 0px; padding: 0px; color: black; background-color: inherit;"><span class="func" style="margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;">LEFT</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;</span><span class="op" style="margin: 0px; padding: 0px; color: rgb(128, 128, 128); background-color: inherit;">JOIN</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;revert&nbsp;c&nbsp;</span><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">ON</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;(&nbsp;a.id&nbsp;=&nbsp;c.post_id&nbsp;)&nbsp;,&nbsp;guest&nbsp;b&nbsp;</span><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">WHERE</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;a.guest_id&nbsp;=&nbsp;b.id&nbsp;&nbsp;</span></span></p></li><li><p><span style="margin: 0px; padding: 0px; color: black; background-color: inherit;"><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">ORDER</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;</span><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">BY</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;a.id&nbsp;</span><span class="keyword" style="margin: 0px; padding: 0px; color: blue; font-weight: bold; background-color: inherit;">DESC</span><span style="margin: 0px; padding: 0px; background-color: inherit;">&nbsp;&nbsp;</span></span></p></li></ol></div><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">这是一个实际的案例，要求是：在guest(id,name,email)，post(id,guest_id,post,post_time)，</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">revert(id,post_id,revert,revert_time) 三个表中找到guest中的name，email，qq以及revert中的revert，revert_time还有post中的所有信息。三个表的外键关系是guest.id = post.guest_id，post.id = revert.post_id。查询的入口是post表，根据post的id主键找到guest和revert表中的相应信息，然后删除。</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">第三行代码是关键：</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">LEFT JOIN revert c ON ( a.id = c.post_id ) , guest b WHERE a.guest_id = b.id</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;"></span>&nbsp;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px; color: rgb(0, 102, 0); font-weight: 700;">分析：</span>左连接到revert表，revert化名为c，连接条件是a.id = c.post_id（即revert中的post_id要和post表中的id相同）；左连接到guest表，guest化名为b，连接条件是a.guest_id = b.id（即guest表中的id要和post表中的guest_id相同）。显然这两个连接都是利用了上面的外键关系。<span style="font-size: 18px;"></span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><br/></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;">&nbsp;</p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 24px;">实例：</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 24px;"><br/></span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">注意：/*……*/ 为注释内容。</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;"><br/></span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*连接数据库：-u后接用户名，-p后接密码*/<br/>C:\Users\Administrator&gt;mysql -uroot -hlocalhost -p123456</span><span style="font-size: 18px;"><br/>Welcome to the MySQL monitor.&nbsp; Commands end with ; or \g.</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*选择数据库，USE后加数据库的名称*/<br/>mysql&gt; USE zollty;</span><span style="font-size: 18px;"><br/>Database changed</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*查看student表的所有列（columns）*/<br/>mysql&gt; SHOW COLUMNS FROM student;</span><span style="font-size: 18px;"><br/>+-------+----------------------+------+-----+---------+-------+<br/>| Field | Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Null | Key | Default | Extra |<br/>+-------+----------------------+------+-----+---------+-------+<br/>| Sno&nbsp;&nbsp; | char(9)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp; | PRI | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Sname | char(20)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Ssex&nbsp; | char(4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Sage&nbsp; | smallint(6) unsigned | YES&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Sdept | varchar(20)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>+-------+----------------------+------+-----+---------+-------+<br/>5 rows in set (0.03 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*向student表中插入数据*/</span><span style="font-size: 18px; font-weight: 700;"><br/>mysql&gt; INSERT INTO student(Sno,Sname,Ssex,Sage,Sdept) values(&#39;20215121&#39;,&#39;李</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">勇&#39;,&#39;男&#39;,&#39;20&#39;,&#39;CS&#39;);</span><span style="font-size: 18px;"><br/>Query OK, 1 row affected (0.03 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">/*以同样的方法插入&quot;王敏&quot;&quot;张立&quot;等，（略）………*/</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><br/><span style="font-weight: 700; font-size: 18px;">mysql&gt; SHOW COLUMNS FROM course;</span><span style="font-size: 18px;"><br/>+---------+-------------+------+-----+---------+-------+<br/>| Field&nbsp;&nbsp; | Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Null | Key | Default | Extra |<br/>+---------+-------------+------+-----+---------+-------+<br/>| Cno&nbsp;&nbsp;&nbsp;&nbsp; | char(4)&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp; | PRI | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Cname&nbsp;&nbsp; | char(40)&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Cpno&nbsp;&nbsp;&nbsp; | char(4)&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp; | MUL | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>| Ccredit | smallint(6) | YES&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; | NULL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br/>+---------+-------------+------+-----+---------+-------+<br/>4 rows in set (0.01 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*向course表中插入数据，此时还不能插入Cpno列，因为我设置了外键约束*/<br/>mysql&gt; INSERT INTO course(Cno,Cname) VALUES (&#39;1&#39;,&#39;数据库&#39;);</span><span style="font-size: 18px;"><br/>Query OK, 1 row affected (0.04 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">mysql&gt; INSERT INTO course(Cno,Cname) VALUES (&#39;2&#39;,&#39;数学&#39;);<br/>Query OK, 1 row affected (0.04 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">（略）………<br/><span style="font-weight: 700;">mysql&gt; INSERT INTO course(Cno,Cname) VALUES (&#39;7&#39;,&#39;PASCAL语言&#39;);</span><br/>Query OK, 1 row affected (0.02 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*更新数据，因为上面还没有指定列Cpno和Ccredit的值，此时可以设置了*/<br/>mysql&gt; UPDATE course<br/>&nbsp;&nbsp;&nbsp; -&gt; SET Cpno=&#39;5&#39;, Ccredit=4<br/>&nbsp;&nbsp;&nbsp; -&gt; WHERE Cno=&#39;1&#39;;</span><span style="font-size: 18px;"><br/>Query OK, 1 row affected (0.06 sec)<br/>Rows matched: 1&nbsp; Changed: 1&nbsp; Warnings: 0</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">mysql&gt; UPDATE course<br/>&nbsp;&nbsp;&nbsp; -&gt; SET Cpno=&#39;1&#39;, Ccredit=4<br/>&nbsp;&nbsp;&nbsp; -&gt; WHERE Cno=&#39;3&#39;;</span><span style="font-size: 18px;"><br/>Query OK, 1 row affected (0.04 sec)<br/>Rows matched: 1&nbsp; Changed: 1&nbsp; Warnings: 0</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-size: 18px;">（略）………</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*最基本的查询语句：查询course表中所有列的数据*/</span><span style="font-size: 18px;"><br/><span style="font-weight: 700;">mysql&gt; SELECT *<br/>&nbsp;&nbsp;&nbsp; -&gt; FROM course;</span><br/>+-----+------------+------+---------+<br/>| Cno | Cname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Cpno | Ccredit |<br/>+-----+------------+------+---------+<br/>| 1&nbsp;&nbsp; | 数据库&nbsp;&nbsp;&nbsp;&nbsp; | 5&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |<br/>| 2&nbsp;&nbsp; | 数学&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NULL |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |<br/>| 3&nbsp;&nbsp; | 信息系统&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |<br/>| 4&nbsp;&nbsp; | 操作系统&nbsp;&nbsp; | 6&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 |<br/>| 5&nbsp;&nbsp; | 数据结构&nbsp;&nbsp; | 7&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |<br/>| 6&nbsp;&nbsp; | 数据处理&nbsp;&nbsp; | NULL |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |<br/>| 7&nbsp;&nbsp; | PASCAL语言 | 6&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |<br/>+-----+------------+------+---------+<br/>7 rows in set (0.00 sec)</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*退出MySQL*/</span><span style="font-size: 18px;"><br/><span style="font-weight: 700;">mysql&gt; exit</span><br/>Bye</span></p><p style="margin-bottom: 0px; white-space: normal; padding: 0px; font-size: 16px; line-height: 26px;"><span style="font-weight: 700; font-size: 18px;">/*备份数据库：将名为mysql01的数据库备份到E:\mysql.txt*/<br/>C:\Users\Administrator&gt;mysqldump -uroot -pmymima mysql01 &gt;E:\mysql.txt</span></p><p style="line-height: 32.4px; white-space: normal;"><br/></p><p style="line-height: 32.4px; white-space: normal;"><span style="font-weight: 700; font-size: 20px;">查看编码设置</span></p><p style="line-height: 32.4px; white-space: normal;">show variables like &#39;character_set_%&#39;;</p><p style="line-height: 32.4px; white-space: normal;">修改编码</p><p style="line-height: 32.4px; white-space: normal;">alter database mydb character set utf-8;<br/></p><p style="line-height: 32.4px; white-space: normal;"><br/></p><p style="line-height: 32.4px; white-space: normal;">1 DATE 格式为yyyy-MM-dd</p><p style="line-height: 32.4px; white-space: normal;">2 TIME 格式为hh:mm:ss</p><p style="line-height: 32.4px; white-space: normal;">3 DATETIME 格式为yyyy-MM-dd hh:mm:ss</p><p style="line-height: 32.4px; white-space: normal;">4 TEMESTAMP 格式为yyyyMMddhhmmss（用于时间戳设置）</p><p style="line-height: 32.4px; white-space: normal;"><br/></p><p style="line-height: 32.4px; white-space: normal;"><span style="font-weight: 700; font-size: 20px;">mysql数据分页</span></p><p style="line-height: 32.4px; white-space: normal;">Select * From tests limit 200,100</p><p><br/></p><p><span style="font-size: 20px;"><strong>MySQL中tinytext、text、mediumtext和longtext详解</strong></span></p><p>Char(N): N=1~255 个字节 分辨大小写<span class="Apple-tab-span" style="white-space:pre">	</span>固定长度</p><p>VarChar(N) N=1~255 个字节 分辨大小写 可变长度</p><p><br/></p><p>TinyBlob<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度255个字节(2^8-1)</p><p>TinyText<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度255个字节(2^8-1)</p><p><br/></p><p>Blob<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度65535个字节(2^16-1)</p><p>Text<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度65535个字节(2^16-1)</p><p><br/></p><p>MediumBlob<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度 16777215 个字节(2^24-1)</p><p>MediumText<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度 16777215 个字节(2^24-1)</p><p><br/></p><p>LongBlob<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度4294967295个字节 (2^32-1)</p><p>LongText<span class="Apple-tab-span" style="white-space:pre">	</span>最大长度4294967295个字节 (2^32-1)</p><p>注：Blob (Binary large objects)储存二进位资料，且有分大小写</p><p><br/></p><p><br/></p><p><strong><span style="font-size: 20px;">mysql bigint问题</span></strong></p><p>比如mysql的bigint，后端long型的订单号，&quot;orderId&quot;:1606291143573740096</p><p>但前端转换成javascript的值，精度问题，就变成了1606291143573740000。有何好的解决办法？</p><p><br/></p><p>百度一下，网上很多人都遇到了这个问题。</p><p>方法1：最笨的办法是，后端就用String类型。</p><p>参考资料：https://www.zhihu.com/question/34564427?sort=created</p><p><br/></p><p>方法2：或者，mysql的bigint只用16位，不用太长。</p><p>后端订单号，主键，用String类型，确实可以解决这个问题。</p><p>但是，其它业务就想用bigint作为主键，怎么办呢？</p><p><br/></p><p>方法3：后端用long，异步给前端时，用string。（后端手动转换）</p><p><br/></p><p>最好的办法就是，设计的时候就不用这个bigint型的主键。（方法2）</p><p><br/></p><p><br/></p>