---
layout: ue
title: åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨MinIOè¯•ç”¨å¯¹æ¯”æ€»ç»“
category: ä¸­é—´ä»¶æŠ€æœ¯
tags: MinIO,æ–‡ä»¶å­˜å‚¨
keywords: "åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨,MinIOå¯¹æ¯”"
---

<p>ä»‹ç»å°±ä¸è¯´äº†ï¼Œå®˜æ–¹æœ‰ä¸­æ–‡æ–‡æ¡£ï¼š<br/></p><p><a href="https://docs.min.io/cn">https://docs.min.io/cn</a> </p><p><br/></p><p>è¯´ç‚¹ä¸ªäººæ„Ÿå—ã€‚<br/></p><p>é¦–å…ˆï¼ŒMinIOæ˜¯å…¼å®¹Amazon S3çš„ï¼Œæ¢å¥è¯è¯´ï¼ŒMinIOå¯ä»¥ä¼ªè£…æˆAmazon S3ï¼Œä½ å¯ä»¥ç”¨Amazon S3çš„SDKæ“ä½œMinIOã€‚</p><p><br/></p><p>MinIOæ”¯æŒå¤šç§Ÿæˆ·ï¼Œä½†æ˜¯å´ä¸æ”¯æŒåŠ¨æ€æ‰©å±•ã€‚å› æ­¤ï¼Œå¤§ç§Ÿæˆ·ï¼Œå°±å•ç‹¬æ­ä¸€å¥—MinIOå§ã€‚å°ç§Ÿæˆ·å€’æ˜¯å¯ä»¥å…±ç”¨ä¸€å¥—ã€‚</p><p><br/></p><p>å…³äºæœåŠ¡å‘ç°å’ŒåŠ¨æ€æ‰©å±•ï¼Œä½œè€…çš„è®¨è®ºå¦‚ä¸‹ï¼šï¼ˆé‡è¦ï¼‰</p><p><br/></p><p style="margin-bottom: 16px;">To get a really resilient storage cloud, service discovery needs to be implemented.</p><h2 style="margin-bottom: 16px; margin-top: 24px; font-size: 1.5em; line-height: 1.25; border-bottom: 1px solid rgb(234, 236, 239); padding-bottom: 0.3em;">Expected Behavior</h2><p style="margin-bottom: 16px;">Minio should be able to use some service discovery system, such as etcd or similar, and fetch siblings from there instead of needing to hardcode them in the cli of settings.</p><h2 style="margin-bottom: 16px; margin-top: 24px; font-size: 1.5em; line-height: 1.25; border-bottom: 1px solid rgb(234, 236, 239); padding-bottom: 0.3em;">Current Behavior</h2><p style="margin-bottom: 16px;">Minio needs a hardcoded list of siblings:&nbsp;<code style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace; font-size: 11.9px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; margin: 0px; padding: 0.2em 0.4em;">minio server http://minio1:9000/export http://minio2:9000/export</code></p><h2 style="margin-bottom: 16px; margin-top: 24px; font-size: 1.5em; line-height: 1.25; border-bottom: 1px solid rgb(234, 236, 239); padding-bottom: 0.3em;">Possible Solution</h2><pre style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace; font-size: 11.9px; margin-bottom: 16px; overflow-wrap: normal; background-color: rgb(246, 248, 250); border-radius: 3px; line-height: 1.45; padding: 16px;">minio&nbsp;server&nbsp;--etcd=http://etcd</pre><p style="margin-bottom: 16px;">... And watch for changes there.</p><h2 style="margin-bottom: 16px; margin-top: 24px; font-size: 1.5em; line-height: 1.25; border-bottom: 1px solid rgb(234, 236, 239); padding-bottom: 0.3em;">Context</h2><p>I&#39;m trying to use the full poder of docker swarm, being able to scale up or down a replicated service, and exposing just one port to the network routing mesh.</p><p style="margin-bottom: 16px;">Bucket and config discovery is a work in progress as part of federation work to discover many deployments.</p><p>Individual deployment units of Minio are always expected to be proper command line options - it is very much part of the design and this is not going to change.</p><p>May I ask why? It doesn&#39;t seem to be an extremely hard feature and it seems to align well with the project philosophy IMHO. Thanks.</p><blockquote style="margin-bottom: 16px; border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); color: rgb(106, 115, 125); padding: 0px 1em;"><p>May I ask why? It doesn&#39;t seem to be an extremely hard feature and it seems to align well with the project philosophy IMHO. Thanks.</p></blockquote><p style="margin-bottom: 16px;">It adds an unneeded dependency, the design philosophy of Minio is to keep the most common deployments simple and predictable. Minio is deployed in static deployment units and each such units are completely isolated from each other.</p><p>etcd is required only when all of these different deployment units need to federate which is why we will be introducing a way to manage multiple creds across many deployments, global bucket awareness etc.</p><p>But then, adding the node nÂº 101 to a 100-node cluster means changing CLI on the other 100, isn&#39;t it? While just letting nodes be autodiscovered is more a Plug&amp;play approach, while still not having to remove the current feature set, of course.<br/>In a big, dynamic, cloud deployment, this very little piece of the puzzle means a lot of manual work...<br/>Or maybe I didn&#39;t understand clearly what you mean with &quot;multiple creds across many deployments, global bucket awareness&quot;&nbsp;ğŸ¤”</p><blockquote style="margin-bottom: 16px; border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); color: rgb(106, 115, 125); padding: 0px 1em;"><p>But then, adding the node nÂº 101 to a 100-node cluster means changing CLI on the other 100, isn&#39;t it? While just letting nodes be autodiscovered is more a Plug&amp;play approach, while still not having to remove the current feature set, of course.</p></blockquote><p style="margin-bottom: 16px;">Minio doesn&#39;t allow adding 100 to 101 - there is no dynamic expansion. If you started with 100 it stays 100 forever, you can potentially start a new 100. This is one of the reason why we never require etcd.</p><p>etcd is only useful when there are dynamic floating entities that is the case for buckets, multiple credentials which will be provided in the federation.</p><blockquote style="margin-bottom: 16px; border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); color: rgb(106, 115, 125); padding: 0px 1em;"><p>Minio doesn&#39;t allow adding 100 to 101 - there is no dynamic expansion. If you started with 100 it stays 100 forever, you can potentially start a new 100. This is one of the reason why we never require etcd.</p></blockquote><p style="margin-bottom: 16px;">Oh Ok, I get it now clearly&nbsp;ğŸ˜‰</p><p style="margin-bottom: 16px;">However that&#39;s a very weird design decision... Scalability is not on the project&#39;s roadmap? How can somebody know all the disk space he will need forever? And why pay for that since the start, when you still don&#39;t need it?</p><p>Certainly Minio&#39;s features are great, but this one decision feels like narrowing its purpose for non-serious business, don&#39;t you think?...&nbsp;ğŸ¤”</p><blockquote style="margin-bottom: 16px; border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); color: rgb(106, 115, 125); padding: 0px 1em;"><p style="margin-bottom: 16px;">However that&#39;s a very weird design decision... Scalability is not on the project&#39;s roadmap? How can somebody know all the disk space he will need forever? And why pay for that since the start, when you still don&#39;t need it?</p><p>Certainly Minio&#39;s features are great, but this one decision feels like narrowing its purpose for non-serious business, don&#39;t you think?.</p></blockquote><p>Making a single large PB sized volume where the disks and nodes are managed like a blackbox by the filesystem is quite scary. Any crash means we blew up all the tenants at once. 1000s of individual minio tenants means, I know when I add the million&#39;th minio instance, it is not any more complex than the first instance of Minio. Provisioning with k8 or external orchestration tools is better than Minio&#39;s own resource management system. When it comes to the applications, objects are just represented as URLs. Some data sitting on Amazon S3 and some on Minio makes no difference to the application. With this principle in mind Minio is designed for scalability, you scale in smaller scalable units.</p><p><br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;ç®€å•çš„è®²ï¼ŒMinIOä½œè€…è®¤ä¸ºçš„åŠ¨æ€æ‰©å±•ï¼Œæ˜¯MinIOé›†ç¾¤çš„æ•´ä½“æ‰©å±•ï¼ˆå¢åŠ ä¸€å¥—é›†ç¾¤ï¼‰ï¼Œè€Œéåœ¨é›†ç¾¤å†…å¢åŠ èŠ‚ç‚¹ã€‚å—¯ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸ªå·æ‡’çš„åšæ³•ï¼Œä½œè€…ä¹Ÿè¯´äº†ï¼ŒåŠ¨æ€å¢åŠ èŠ‚ç‚¹ä¼šç»™MinIOå¸¦æ¥éå¸¸å¤§çš„å¤æ‚åº¦ï¼Œè¨€ä¸‹ä¹‹æ„ï¼ŒMinIOåªæƒ³åšä¸ªå°è€Œç¾çš„å­˜å‚¨ç³»ç»Ÿã€‚ä½†æ˜¯ï¼Œå¦‚æœåªæ˜¯åšä¸ªç®€å•å­˜å‚¨ç³»ç»Ÿï¼Œé‚£ä¹ˆå•èŠ‚ç‚¹å…¶å®å°±è¶³å¤Ÿäº†ï¼Œä½•å¿…è¦åšé›†ç¾¤å‘¢ï¼Ÿå¦‚æœå•èŠ‚ç‚¹æ’‘ä¸ä½ï¼Œå°±åœ¨æ–°æ­ä¸€å¥—å°±è¡Œäº†ã€‚å—¯ï¼Œè²Œä¼¼å¾ˆæœ‰é“ç†ï¼Œä»”ç»†æƒ³ã€‚ä½†æ˜¯æ”¯æŒé›†ç¾¤ä¹Ÿå¥½å§ï¼Œè‡³å°‘å¯ä»¥è”åˆä¸åŒçš„ä¸»æœºå·¥ä½œï¼Œå¸¦åŠ¨ä¸åŒçš„ç£ç›˜ï¼Œè€Œä¸”å¯ä»¥é˜²æ­¢å•ç‚¹æ•…éšœã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ä¸æ”¯æŒåŠ¨æ€å¢åŠ èŠ‚ç‚¹ï¼Œè¿™ç§è®¾è®¡åˆ°åº•å¯¹ä½¿ç”¨è€…æœ‰ä»€ä¹ˆå½±å“ï¼Œæˆ‘è§‰å¾—éœ€è¦è€ƒè™‘æ¸…æ¥šã€‚å¦‚æœä¸šåŠ¡é‡é™¡å¢ï¼Œåˆ™éœ€è¦é…åˆç›‘æ§å’Œä¸€ç³»åˆ—è‡ªåŠ¨åŒ–å·¥å…·ï¼Œè‡ªåŠ¨å®Œæˆæ‰©å±•ï¼Œè™½ç„¶è¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹å¤æ‚ï¼šé¦–å…ˆè¦å¤åˆ¶ä¸€å¥—é›†ç¾¤ï¼ˆåŒ…æ‹¬è‡ªåŠ¨åˆ†é…æœºå™¨ï¼Œè‡ªåŠ¨æŒ‚è½½ç£ç›˜ï¼Œç„¶åå¯åŠ¨ï¼‰ï¼Œç„¶åçš„è‡ªåŠ¨é…ç½®è´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨é…ç½®ç›‘æ§ç­‰ï¼Œå®Œæˆåï¼Œä¸€å¥—æ–°çš„é›†ç¾¤å¯ç”¨äº†ï¼Œç„¶ååº”ç”¨æ–°ä¸Šä¼ æ–‡ä»¶è¦è‡ªåŠ¨åˆ‡æ¢åˆ°è¿™ä¸ªæ–°çš„é›†ç¾¤ä¸Šã€‚æ€»è§‰å¾—è¿˜æ˜¯å¾ˆä¸æ–¹ä¾¿ã€‚äºæ˜¯æˆ‘åˆæƒ³åˆ°äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;é¦–å…ˆå°±å‡†å¤‡ä¸€ä¸ªå¤‡ç”¨MinIOé›†ç¾¤ï¼Œé…ç½®å¥½ï¼Œç”šè‡³å¯åŠ¨å¥½ï¼Œæ”¾åœ¨é‚£é‡Œï¼Œå¹³æ—¶ä¸ç”¨ã€‚å½“ä¸šåŠ¡é‡é™¡å¢ï¼ŒåŸMinIOé›†ç¾¤å®¹é‡å‘Šè­¦æ—¶ï¼Œåº”ç”¨è‡ªåŠ¨å¯ç”¨å¤‡ä»½MinIOé›†ç¾¤ã€‚åªè¦è§£å†³äº†çœ¼ä¸‹çš„é—®é¢˜ï¼Œåé¢å¯ä»¥æ•´åˆä¸¤ä¸ªé›†ç¾¤çš„æ–‡ä»¶ï¼Œæ•´ä¸€ä¸ªæ›´å¤§çš„é›†ç¾¤ã€‚<br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;é’ˆå¯¹è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘è§‰å¾—MinIOçš„æœ€ä½³ä½¿ç”¨æ–¹å¼ä¸ºï¼š</p><ol class=" list-paddingleft-2" style="list-style-type: decimal;"><li><p>é€šå¸¸é‡‡ç”¨æœ€å°4èŠ‚ç‚¹éƒ¨ç½²ï¼Œç£ç›˜å®¹é‡è®¾ç½®ä¸å®œè¿‡å¤§å’Œè¿‡å°ï¼Œæ ¹æ®ä¸šåŠ¡è¯„ä¼°é€‚ä¸­å³å¯ã€‚æ¯ä¸ªèŠ‚ç‚¹çš„IPæŒ‚è´Ÿè½½å‡è¡¡ã€‚<br/></p></li><li><p>æ–‡ä»¶å¤šçš„ç³»ç»Ÿï¼Œå•ç‹¬ä½¿ç”¨ä¸€å¥—ï¼Œå…¶ä»–ç³»ç»Ÿå¯ä»¥å…±ç”¨ä¸€å¥—ã€‚</p></li><li><p>ç•™ä¸€å¥—å®¹é‡é€‚ä¸­çš„MinIOé›†ç¾¤å¤‡ç”¨ï¼Œåœ¨åº”ç”¨çš„é…ç½®ä¸­ï¼Œå¯ä»¥æ ¹æ®æŒ‡ä»¤ï¼Œéšæ—¶å¯ç”¨è¿™ä¸ªå¤‡é›†ç¾¤ã€‚</p></li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;æœ‰äº†æˆ‘è¿™ä¸ªæ–¹æ¡ˆï¼Œæˆ‘è§‰å¾—MinIOè¿˜æ˜¯å€¼å¾—ä¸€ç”¨çš„ï¼Œå¦åˆ™çš„è¯ä¸æ”¯æŒåŠ¨æ€æ‰©å®¹ï¼Œç¡®å®æ˜¯ä¸ªç¡¬ä¼¤å•Šã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ç„¶åï¼Œæˆ‘å¤§æ¦‚çœ‹äº†ä¸€ä¸‹ï¼Œè§‰å¾—MinIOç¤¾åŒºè¿˜æ¯”è¾ƒæ´»è·ƒï¼ŒContributorsæ•°é‡ä¸”æ´»è·ƒçš„ä¹Ÿæ¯”è¾ƒå¤šã€‚ç„¶åè¿˜æ”¯æŒç¼“å­˜ï¼Œè™½ç„¶æ¯”è¾ƒå å®¹é‡ï¼Œä½†æ˜¯æœ‰æ¸…é™¤æœºåˆ¶ä¹Ÿè¿˜å¥½ã€‚å½“ç„¶ï¼Œæ„Ÿè§‰å¦‚æœæ·±åº¦ä½¿ç”¨çš„è¯ï¼Œå°é—®é¢˜å¯èƒ½ä¼šä¸å°‘ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å…¶ä»–çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œæˆ‘æ¥è§¦å¾—å¾ˆå°‘ï¼Œä¹Ÿä¸å¥½æ¯”è¾ƒã€‚å°±æ‹¿æˆ‘ç†Ÿæ‚‰çš„FastDFSæ¥è¯´å§ï¼ŒFastDFSå¾ˆå¼±é¸¡ï¼Œå®¢æˆ·ç«¯å¾ˆéš¾ç”¨ ï¼Œå°è§„æ¨¡ä½¿ç”¨ï¼ŒæœåŠ¡ç«¯ä¹Ÿè¿˜ç®—ç¨³å®šï¼Œä½†æ˜¯é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå‡ ä¹æ²¡åŠæ³•è§£å†³ï¼Œæ²¡äººç»´æŠ¤ï¼Œä½œè€…ä¹Ÿä¸æ›´æ–°ã€‚æ€»ä¹‹ï¼Œæœ‰äº†è¿™ä¸€å¹´å¤šçš„ä½¿ç”¨ç»éªŒï¼Œæˆ‘åº”è¯¥ä¸ä¼šæ¨èä»»ä½•å›¢é˜Ÿåœ¨ä»»ä½•ç¯å¢ƒä½¿ç”¨FastDFSã€‚ç›¸åï¼ŒMinIOæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚<br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå«SeaweedFSçš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œä¹Ÿæ˜¯Golangå†™çš„ï¼Œæˆ‘æ¯”è¾ƒçœ‹å¥½ï¼Œå‚è§æˆ‘çš„è¿™ç¯‡æ–‡ç« ã€Š<a href="summary-of-SeaweedFS-for-distributed-file-storage.html" target="_blank">åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨SeaweedFSè¯•ç”¨å¯¹æ¯”æ€»ç»“</a>ã€‹ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å¦å¤–ï¼ŒMinIOç›¸å…³çš„å¯¹æ¯”å’Œè¯´æ˜ï¼Œå‚è§è¿™ç¯‡æ–‡ç« ã€Š<a href="comparison-of-distributed-file-storage-MinIO-SeaweedFS-FastDFS.html" target="_blank">åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨MinIO SeaweedFS FastDFSå¯¹æ¯”æ€»ç»“</a>ã€‹ã€‚</p><p><br/></p><p><br/></p>