---
layout: post-html
title: JavaEE学习手册
category: JavaEE技术
tags: Java
keywords: Java技术
---


<link rel="stylesheet" href="{{ site.baseurl }}/public/css/youdao.css" type="text/css">

<div id="wrap" class="single-note">
<div class="blk-mid fit-size">
    <div class="blk-main">
    <div class="blk-note"><div class="blk-bd"><div class="note-title"><p class="note-title-text">JavaEE学习手册</p></div><div class="blk-expand meta fit-size-sibling" style="display: block;"><div class="meta-info">
    <span class="meta-item">
        <span class="meta-create meta-col">
            <i></i>
            <span>创建时间：</span>
            2015-5-31 22:00</span>
    </span>
    <span class="meta-item">
        <span class="meta-update meta-col">
            <i></i>
            <span>修改时间：</span>
            2015-5-31 22:00</span>
    </span>
    <span class="meta-item">
        <span class="meta-via meta-col form empty">
            <i></i>
            <span>来源：</span>
            <a class="value" href="" target="_blank" title="打开链接">
                
            </a>
        </span>
    </span>
</div></div><div class="note-content"><div> 
 <div> 
  <p style="line-height:2.25;text-align:center;"><span style="font-size:12.0000pt;">JavaEE<font face="宋体">学习手册</font></span></p> 
  <p style="line-height:2.25;text-align:center;"><span style="font-size:12.0000pt;">作者：<font face="Times New Roman">zollty</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">一、几个术语</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">ASF<font face="宋体">：</font></span><span style="font-size:12.0000pt;">Apache&nbsp;Software&nbsp;Foundation<font face="宋体">，即</font><font face="Times New Roman">Apache</font><font face="宋体">自由软件基金会。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">Jakarta<font face="宋体">：</font></span><span style="font-size:12.0000pt;">ASF<font face="宋体">这个组织包含了很多软件项目，</font><font face="Times New Roman">Jakarta</font><font face="宋体">是</font><font face="Times New Roman">ASF</font><font face="宋体">旗下的一套</font><font face="Times New Roman">Java</font><font face="宋体">解决方案的开源项目的名称，它包括了很多子项目，比如</font><font face="Times New Roman">Tomcat</font><font face="宋体">、</font><font face="Times New Roman">Ant</font><font face="宋体">、</font><font face="Times New Roman">Struts</font><font face="宋体">等。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">JVM<font face="宋体">：</font></span><span style="font-size:12.0000pt;">即<font face="Times New Roman">Java</font><font face="宋体">虚拟机，包括一套字节码指令集、一组寄存器、一个栈、一个垃圾回收堆和一个存储方法域。它屏蔽了与具体操作系统平台相关的信息，使</font><font face="Times New Roman">Java</font><font face="宋体">程序只需生成在</font><font face="Times New Roman">Java</font><font face="宋体">虚拟机上运行的目标代码（字节码），就可以在多种平台上不加修改地运行。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">JSP<font face="宋体">：</font></span><span style="font-size:12.0000pt;">即<font face="Times New Roman">Java&nbsp;Server&nbsp;Page</font><font face="宋体">，是同</font><font face="Times New Roman">HTML</font><font face="宋体">结合在一起的动态网页。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">Servlet<font face="宋体">：</font></span><span style="font-size:12.0000pt;">是<font face="Times New Roman">Java&nbsp;Servlet</font><font face="宋体">的简称，由</font><font face="Times New Roman">Serve+Applet</font><font face="宋体">演变而来，字面意思即“服务端小程序”，和</font><font face="Times New Roman">JSP</font><font face="宋体">属于同一个层面。它是服务器端的</font><font face="Times New Roman">Java</font><font face="宋体">应用程序，由</font><font face="Times New Roman">Web</font><font face="宋体">服务器进行加载。</font><font face="Times New Roman">Servlet</font><font face="宋体">的主要功能在于交互式地浏览和修改数据，生成动态</font><font face="Times New Roman">Web</font><font face="宋体">内容。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">CGI<font face="宋体">：</font></span><span style="font-size:12.0000pt;">即</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Common&nbsp;Gateway&nbsp;Interface</span><span style="font-size:12.0000pt;">（通用网关接口），它是一段程序，运行在服务器上，提供同客户端<font face="Times New Roman">HTML</font><font face="宋体">页面的接口，通俗的讲</font><font face="Times New Roman">CGI</font><font face="宋体">就像是一座桥，把网页和</font><font face="Times New Roman">WEB</font><font face="宋体">服务器中的执行程序连接起来，它把</font><font face="Times New Roman">HTML</font><font face="宋体">接收的指令传递给服务器，再把服务器执行的结果返还给</font><font face="Times New Roman">HTML</font><font face="宋体">页；用</font><font face="Times New Roman">CGI</font><font face="宋体">可以实现处理表格，数据库查询，发送电子邮件等许多操作，最常见的</font><font face="Times New Roman">CGI</font><font face="宋体">程序就是计数器。</font><font face="Times New Roman">CGI</font><font face="宋体">使网页变得不是静态的，而是交互式的。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">PS<font face="宋体">：</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;font-weight:bold;">Java&nbsp;Servlet</span><span style="font-size:12.0000pt;font-weight:bold;">和<font face="Times New Roman">CGI</font><font face="宋体">的比较</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;服务器上需要一些程序，常常是根据用户输入访问数据库的程序。这些通常是使用公共网关接口（<font face="Times New Roman">CGI(Common&nbsp;Gateway&nbsp;Interface)</font><font face="宋体">）应用程序完成的。然而，在服务器上运行</font><font face="Times New Roman">Java</font><font face="宋体">，这种程序可使用</font><font face="Times New Roman">Java</font><font face="宋体">编程语言实现。在通信量大的服务器上，</font><font face="Times New Roman">Java&nbsp;Servlet</font><font face="宋体">的优点在于它们的执行速度更快于</font><font face="Times New Roman">CGI</font><font face="宋体">程序。各个用户请求被激活成单个程序中的一个线程，而无需创建单独的进程，这意味着服务器端处理请求的系统开销将明显降低。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">PS<font face="宋体">：</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;font-weight:bold;">Java&nbsp;Servlet</span><span style="font-size:12.0000pt;font-weight:bold;">和<font face="Times New Roman">JSP</font><font face="宋体">的比较</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;Servlet<font face="宋体">和</font><font face="Times New Roman">JSP</font><font face="宋体">在底层运行的原理上是完全一样的。运行时，</font><font face="Times New Roman">JSP</font><font face="宋体">必须被</font><font face="Times New Roman">Web</font><font face="宋体">服务器编译成</font><font face="Times New Roman">Servlet</font><font face="宋体">，真正提供</font><font face="Times New Roman">HTTP</font><font face="宋体">服务的也是</font><font face="Times New Roman">Servlet</font><font face="宋体">，因此广义的</font><font face="Times New Roman">Servlet</font><font face="宋体">包含</font><font face="Times New Roman">JSP</font><font face="宋体">和</font><font face="Times New Roman">Servlet</font><font face="宋体">。目前的</font><font face="Times New Roman">JavaEE</font><font face="宋体">应用中已经很少单纯的使用</font><font face="Times New Roman">Servlet</font><font face="宋体">充当表示层，更多的是作为控制层组件来使用。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">Tomcat<font face="宋体">：</font></span><span style="font-size:12.0000pt;">是一个免费开源的<font face="Times New Roman">Servlet</font><font face="宋体">容器，是</font><font face="Times New Roman">Jakarta</font><font face="宋体">项目中的一个核心项目，最初是由</font><font face="Times New Roman">Sun</font><font face="宋体">的软件构架师</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">James&nbsp;Duncan&nbsp;Davidson</span><span style="font-size:12.0000pt;">开发的，后来他帮助将其变为开源项目，并由<font face="Times New Roman">Sun</font><font face="宋体">贡献给</font><font face="Times New Roman">Apache</font><font face="宋体">软件基金会。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">MVC<font face="宋体">：</font></span><span style="font-size:12.0000pt;">即<font face="Times New Roman">MVC</font><font face="宋体">框架（</font><font face="Times New Roman">Model-View-Controller&nbsp;Framework</font><font face="宋体">），它包括</font><font face="Times New Roman">3</font><font face="宋体">类对象：</font><font face="Times New Roman">Model</font><font face="宋体">是应用对象，也就是功能逻辑，</font><font face="Times New Roman">View</font><font face="宋体">是指在屏幕上的表示，也就是</font><font face="Times New Roman">UI</font><font face="宋体">（</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">User&nbsp;Interface</span><span style="font-size:12.0000pt;">用户界面）；<font face="Times New Roman">Controller</font><font face="宋体">定义用户界面对于用于输入的响应方式，即对请求和应答事件进行处理。通常把</font><font face="Times New Roman">MVC</font><font face="宋体">按软件层次分成</font><font face="Times New Roman">3</font><font face="宋体">层：视图（</font><font face="Times New Roman">View</font><font face="宋体">）层，模型（</font><font face="Times New Roman">Model</font><font face="宋体">）层，控制（</font><font face="Times New Roman">Controller</font><font face="宋体">）层。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">Struts<font face="宋体">：</font></span><span style="font-size:12.0000pt;">Struts<font face="宋体">也是</font><font face="Times New Roman">Jakarta</font><font face="宋体">的一个核心子项目，它提供了一种方法，可以在一个</font><font face="Times New Roman">Web</font><font face="宋体">应用程序中一起使用</font><font face="Times New Roman">JSP</font><font face="宋体">和</font><font face="Times New Roman">Servlet</font><font face="宋体">。其目的是要解决完全由</font><font face="Times New Roman">JSP</font><font face="宋体">或</font><font face="Times New Roman">Servlet</font><font face="宋体">实现的传统应用程序中固有的问题，例如，用</font><font face="Times New Roman">JSP</font><font face="宋体">很难将</font><font face="Times New Roman">Java</font><font face="宋体">代码同</font><font face="Times New Roman">HTML</font><font face="宋体">分开，结果将导致代码易懂性不高，后期维护较难。</font><font face="Times New Roman">Struts</font><font face="宋体">其实也是一个</font><font face="Times New Roman">MVC</font><font face="宋体">框架，但</font><font face="Times New Roman">Struts</font><font face="宋体">的重点在于</font><font face="Times New Roman">C</font><font face="宋体">端（控制端），同时也为</font><font face="Times New Roman">V</font><font face="宋体">端提供了一系列定制的标签，但是几乎没有涉及到</font><font face="Times New Roman">M</font><font face="宋体">端。所以在流行的轻量级</font><font face="Times New Roman">MVC</font><font face="宋体">框架组合</font><font face="Times New Roman">SSH</font><font face="宋体">中，</font><font face="Times New Roman">Struts</font><font face="宋体">只是扮演了</font><font face="Times New Roman">Controller</font><font face="宋体">端的角色。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">JavaBean<font face="宋体">：</font></span><span style="font-size:12.0000pt;">是一种<font face="Times New Roman">JAVA</font><font face="宋体">语言写成的可重用组件，是公共的</font><font face="Times New Roman">Java</font><font face="宋体">类。在</font><font face="Times New Roman">IDE</font><font face="宋体">中，</font><font face="Times New Roman">JavaBean</font><font face="宋体">的功能允许应用开发者浏览其中的方法，即</font><font face="Times New Roman">JavaBean</font><font face="宋体">是被编译的，无法利用原始的源文件。此外，还发展出了企业</font><font face="Times New Roman">Bean</font><font face="宋体">（</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Enterprise&nbsp;JavaBean</span><span style="font-size:12.0000pt;">s<font face="宋体">），即</font></span><span style="font-size:12.0000pt;font-weight:bold;">EJB</span><span style="font-size:12.0000pt;">，它包括会话<font face="Times New Roman">Bean</font><font face="宋体">（</font><font face="Times New Roman">Session&nbsp;Bean</font><font face="宋体">），实体</font><font face="Times New Roman">Bean</font><font face="宋体">（</font><font face="Times New Roman">Entity&nbsp;Bean</font><font face="宋体">）和消息驱动</font><font face="Times New Roman">Bean</font><font face="宋体">（</font><font face="Times New Roman">MessageDriven&nbsp;Bean</font><font face="宋体">）。由于</font><font face="Times New Roman">EJB2.0</font><font face="宋体">过于复杂，在</font><font face="Times New Roman">Spring</font><font face="宋体">和</font><font face="Times New Roman">Hibernate</font><font face="宋体">等轻量级框架出现后，大量的用户放弃了</font><font face="Times New Roman">EJB</font><font face="宋体">。但目前轻量级的</font><font face="Times New Roman">EJB3.0</font><font face="宋体">、</font><font face="Times New Roman">EJB3.1</font><font face="宋体">已经放出，并得到了认可。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">PS<font face="宋体">：</font></span><span style="font-size:12.0000pt;font-weight:bold;">JavaBean<font face="宋体">和</font><font face="Times New Roman">EJB</font><font face="宋体">的区别</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;JavaBean<font face="宋体">是使用</font><font face="Times New Roman">java.beans</font><font face="宋体">包开发的，它是</font><font face="Times New Roman">Java&nbsp;2</font><font face="宋体">标准版的一部分。</font><font face="Times New Roman">JavaBean</font><font face="宋体">是一台机器上同一个地址空间中运行的组件，是进程内组件。</font><font face="Times New Roman">Enterprise&nbsp;Bean</font><font face="宋体">是使用</font><font face="Times New Roman">javax.ejb</font><font face="宋体">包开发的，它是标准</font><font face="Times New Roman">JDK</font><font face="宋体">的扩展，是</font><font face="Times New Roman">J2EE</font><font face="宋体">的一部分。</font><font face="Times New Roman">EJB</font><font face="宋体">是在多台机器上跨几个地址空间运行的组件，是进程间组件。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">JavaEE<font face="宋体">中的两个</font><font face="Times New Roman">MVC</font><font face="宋体">模型</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">MVC&nbsp;Model&nbsp;1</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">即传统的<font face="Times New Roman">JSP+JavaBean</font><font face="宋体">，目前已经很少用了，但是初学者学习</font><font face="Times New Roman">Struts</font><font face="宋体">前有必要了解。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">MVC&nbsp;Model&nbsp;2</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">该模型的标准是：<font face="Times New Roman">JSP</font><font face="宋体">（视图</font><font face="Times New Roman">View</font><font face="宋体">，用户界面）</font><font face="Times New Roman">+Servlet</font><font face="宋体">（控制器</font><font face="Times New Roman">Controller</font><font face="宋体">，输入处理）</font><font face="Times New Roman">+JavaBean</font><font face="宋体">（模型</font><font face="Times New Roman">Model</font><font face="宋体">，功能逻辑）。由于</font><font face="Times New Roman">Java&nbsp;EE</font><font face="宋体">中的</font><font face="Times New Roman">JavaBean&nbsp;</font><font face="宋体">（</font><font face="Times New Roman">EJB2.0</font><font face="宋体">）太复杂了，所以该模型最流行的一个版本是</font><font face="Times New Roman">SSH</font><font face="宋体">，即</font><font face="Times New Roman">Struts+Spring+Hibernate</font><font face="宋体">。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">JavaEE<font face="宋体">应用分层模型</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">大致分为如下五层：</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">（数据持久层</span><span style="font-size:12.0000pt;">——<font face="Times New Roman">&gt;</font></span><span style="font-size:12.0000pt;font-weight:bold;">数据访问层）</span><span style="font-size:12.0000pt;">——<font face="Times New Roman">&gt;</font></span><span style="font-size:12.0000pt;font-weight:bold;">业务逻辑层</span><span style="font-size:12.0000pt;">——<font face="Times New Roman">&gt;</font></span><span style="font-size:12.0000pt;font-weight:bold;">控制层</span><span style="font-size:12.0000pt;">——<font face="Times New Roman">&gt;</font></span><span style="font-size:12.0000pt;font-weight:bold;">表示层</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">&nbsp;</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">数据持久层：</span><span style="font-size:12.0000pt;">该层由一系列负责操纵<font face="Times New Roman">POJO</font><font face="宋体">（</font><font face="Times New Roman">Plain&nbsp;Old&nbsp;Java&nbsp;Object</font><font face="宋体">，普通的、传统的</font><font face="Times New Roman">Java</font><font face="宋体">对象）的类组成，这些类负责把数据进行持久化，一般是</font></span><span style="font-size:12.0000pt;">把数据保存到数据库中</span><span style="font-size:12.0000pt;">。</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">数据访问层：</span><span style="font-size:12.0000pt;">该层由一系列的<font face="Times New Roman">DAO</font><font face="宋体">（</font><font face="Times New Roman">Data&nbsp;Access&nbsp;Object</font><font face="宋体">）组件组成，</font></span><span style="font-size:12.0000pt;">实现对数据的增、删、改、查等细粒度的操作</span><span style="font-size:12.0000pt;">。</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">业务逻辑层：</span><span style="font-size:12.0000pt;">该层由一系列的业务逻辑对象组成，</span><span style="font-size:12.0000pt;">实现系统所需要的业务逻辑方法</span><span style="font-size:12.0000pt;">。</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">控制层：</span><span style="font-size:12.0000pt;">此层由一系列控制器组成，用于</span><span style="font-size:12.0000pt;">拦截用户请求</span><span style="font-size:12.0000pt;">并调用业务逻辑对象的业务方法来处理请求，根据处理结果转发到不同的表示层。</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">表示层：</span><span style="font-size:12.0000pt;">此层由一系列的视图组件（</span><span style="font-size:12.0000pt;">例如<font face="Times New Roman">JSP</font><font face="宋体">页面</font></span><span style="font-size:12.0000pt;">）组成，负责收集用户请求并显示处理结果。</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">JavaEE<font face="宋体">各层组件之间以松散的方式耦合在一起。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">POJO<font face="宋体">对象</font><font face="Times New Roman">1</font></span><span style="font-size:12.0000pt;">&lt;<font face="宋体">——</font></span><span style="font-size:12.0000pt;font-weight:bold;">DAO<font face="宋体">对象</font><font face="Times New Roman">1</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">POJO<font face="宋体">对象</font><font face="Times New Roman">2</font></span><span style="font-size:12.0000pt;">&lt;<font face="宋体">——</font></span><span style="font-size:12.0000pt;font-weight:bold;">DAO<font face="宋体">对象</font><font face="Times New Roman">2&nbsp;</font></span><span style="font-size:12.0000pt;">&lt;<font face="宋体">——</font></span><span style="font-size:12.0000pt;font-weight:bold;">业务逻辑对象</span><span style="font-size:12.0000pt;">&lt;<font face="宋体">——</font></span><span style="font-size:12.0000pt;font-weight:bold;">控制层</span><span style="font-size:12.0000pt;">&lt;<font face="宋体">——</font></span><span style="font-size:12.0000pt;font-weight:bold;">表示层组件</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">POJO<font face="宋体">对象</font><font face="Times New Roman">3</font></span><span style="font-size:12.0000pt;">&lt;<font face="宋体">——</font></span><span style="font-size:12.0000pt;font-weight:bold;">DAO<font face="宋体">对象</font><font face="Times New Roman">3</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">Hibernate<font face="宋体">：</font></span><span style="font-size:12.0000pt;">它是一个开源的、轻量级的<font face="Times New Roman">ORM</font><font face="宋体">（</font><font face="Times New Roman">Object&nbsp;Relation&nbsp;Mapping</font><font face="宋体">）持久化框架，它允许应用程序以面向对象的方式来操作关系型的数据库。通过简单的配置和编码即可替代</font><font face="Times New Roman">JDBC</font><font face="宋体">繁琐的程序代码。在</font><font face="Times New Roman">Java</font><font face="宋体">语言中，数据可以存储在实体对象中，同时实体对象之间具有继承、多态和聚合等特点，而在数据库中存储的是二维关系数据，表与表的关系只有主外键关联关系，</font><font face="Times New Roman">Hibernate</font><font face="宋体">的引入可以解决上述矛盾。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;font-weight:bold;">Spring<font face="宋体">：</font></span><span style="font-size:12.0000pt;">Spring<font face="宋体">框架是</font><font face="Times New Roman">JavaEE</font><font face="宋体">应用的全方位解决方案，它贯穿于表示层、业务层和持久层。</font><font face="Times New Roman">Spring</font><font face="宋体">自身还提供了一个</font><font face="Times New Roman">MVC</font><font face="宋体">框架：</font><font face="Times New Roman">Spring&nbsp;MVC</font><font face="宋体">，使用</font><font face="Times New Roman">Spring</font><font face="宋体">可以直接使用该</font><font face="Times New Roman">MVC</font><font face="宋体">框架，也可以方便地与其他</font><font face="Times New Roman">MVC</font><font face="宋体">框架集成，它像是一个中间容器，向上可以与</font><font face="Times New Roman">MVC</font><font face="宋体">框架整合，向下可以和各种持久层框架整合（</font><font face="Times New Roman">Hibernate</font><font face="宋体">、</font><font face="Times New Roman">iBATIS</font><font face="宋体">、</font><font face="Times New Roman">OJB</font><font face="宋体">、</font><font face="Times New Roman">JDBC</font><font face="宋体">），将系统中的各个部分组件以松散的方式结合在一起。</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;Spring<font face="宋体">作为一个一站式的</font><font face="Times New Roman">JavaEE</font><font face="宋体">解决方案，渗透了</font><font face="Times New Roman">JavaEE</font><font face="宋体">技术的方方面面，它主要用来实现依赖注入、面向切面编程（</font><font face="Times New Roman">AOP</font><font face="宋体">，用于降低耦合）、声明式事务以及对持久层的支持和简化等功能。最新的</font><font face="Times New Roman">Spring</font><font face="宋体">框架也集成了</font><font face="Times New Roman">JPA</font><font face="宋体">（</font><font face="Times New Roman">Java&nbsp;Persistence&nbsp;API</font><font face="宋体">，</font><font face="Times New Roman">Java</font><font face="宋体">持久化</font><font face="Times New Roman">API</font><font face="宋体">），并实现了</font><font face="Times New Roman">EJB3.0</font><font face="宋体">的一些特性。&nbsp;</font></span></p> 
  <p style="line-height:2.25;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">二、搭建环境</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">1.<font face="宋体">安装</font><font face="Times New Roman">MyEclipse</font></span></p> 
  <p><span style="font-size:12.0000pt;">直接下载安装，我是在电驴上下载的最新破解版<font face="Times New Roman">10.0</font><font face="宋体">版，</font><font face="Times New Roman">ALL&nbsp;in&nbsp;ONE</font><font face="宋体">包（集成了</font><font face="Times New Roman">jdk</font><font face="宋体">和</font><font face="Times New Roman">tomcat</font><font face="宋体">等）。安装文件名是：</font></span></p> 
  <p><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">myeclipse-10.0-offline-installer-windows.exe</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">安装完<font face="Times New Roman">MyEclipse</font><font face="宋体">的</font><font face="Times New Roman">ALL&nbsp;in&nbsp;ONE</font><font face="宋体">包之后，我又安装了最新版的</font><font face="Times New Roman">Tomcat</font><font face="宋体">和</font><font face="Times New Roman">JDK</font><font face="宋体">。方法如下：</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">2.<font face="宋体">安装</font><font face="Times New Roman">Tomcat</font></span></p> 
  <p><span style="font-size:12.0000pt;">Tomcat<font face="宋体">直接解压，文件名是：</font></span></p> 
  <p><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">apache-tomcat-7.0.23-windows-x86.zip</span></p> 
  <p><span style="font-size:12.0000pt;">然后给<font face="Times New Roman">Tomcat</font><font face="宋体">设置（系统）环境变量：</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">变量名：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">TOMCAT_HOME</span><span style="font-size:12.0000pt;">，值：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">C:\</span><span style="font-size:12.0000pt;">……</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">\apache-tomcat-7.0.23</span></p> 
  <p><span style="font-size:12.0000pt;">变量名：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CATALINA_HOME</span><span style="font-size:12.0000pt;">，值：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">%TOMCAT_HOME%</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">变量名：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASSPATH</span><span style="font-size:12.0000pt;">，值：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">.;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">%JAVA_HOME%\lib\dt.jar;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">%JAVA_HOME%\lib\tools.jar</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">3.<font face="宋体">安装</font><font face="Times New Roman">JDK</font></span></p> 
  <p><span style="font-size:12.0000pt;">直接双击<font face="Times New Roman">EXE</font><font face="宋体">文件安装，文件名为：</font></span></p> 
  <p><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">jdk-7u1-windows-i586.exe</span></p> 
  <p><span style="font-size:12.0000pt;">然后设置系统环境变量：</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">变量名：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">JAVA_HOME</span><span style="font-size:12.0000pt;">，值：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">C:\</span><span style="font-size:12.0000pt;">……</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">\jdk1.7.0_01</span></p> 
  <p><span style="font-size:12.0000pt;">变量名：<font face="Times New Roman">Path</font><font face="宋体">，值（最前面加上）：</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">%JAVA_HOME%\bin;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">4.<font face="宋体">整合</font><font face="Times New Roman">MyEclipse</font><font face="宋体">和</font><font face="Times New Roman">JDK</font></span></p> 
  <p><span style="font-size:12.0000pt;">新建工程的时候，在选择<font face="Times New Roman">JRE</font><font face="宋体">的下面有一个</font><font face="Times New Roman">Configure</font><font face="宋体">的链接，点击进去设置就</font><font face="Times New Roman">OK</font><font face="宋体">。</font></span></p> 
  <p><img src="./JavaEE学习手册_files/57DA27764FD64FEF8A9BD059D88F31D7" width="508" height="78" data-media-type="image" style="height: auto;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">也可以在最上面的菜单栏选择<font face="Times New Roman">Windows-&gt;Preferences</font><font face="宋体">展开</font><font face="Times New Roman">java</font><font face="宋体">，找到</font><font face="Times New Roman">InstalJREs</font><font face="宋体">，然后设置。（注意在选择“</font><font face="Times New Roman">JRE&nbsp;Home</font><font face="宋体">”时要选择</font><font face="Times New Roman">JDK</font><font face="宋体">的目录，例如</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">D:\Java\jdk1.7.0_01</span><span style="font-size:12.0000pt;">，而不是选择<font face="Times New Roman">JDK</font><font face="宋体">目录下面的</font><font face="Times New Roman">JRE</font><font face="宋体">子目录！）</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">5.&nbsp;MyEclipse<font face="宋体">整合</font><font face="Times New Roman">Tomcat</font></span></p> 
  <p><span style="font-size:12.0000pt;">最上面的菜单栏选择<font face="Times New Roman">Windows-&gt;Preferences</font><font face="宋体">展开</font><font face="Times New Roman">MyEclipse-&gt;Servers-&gt;Tomcat</font><font face="宋体">，然后设置目录，并将</font><font face="Times New Roman">Enable</font><font face="宋体">勾上，然后点击</font><font face="Times New Roman">Apply</font><font face="宋体">，最后点击</font><font face="Times New Roman">OK</font><font face="宋体">。</font></span></p> 
  <p><span style="font-size:12.0000pt;">配置和打开<font face="Times New Roman">Tomcat</font><font face="宋体">服务的方法如下，直接在工具栏上找到：</font></span></p> 
  <p><img src="./JavaEE学习手册_files/48A076DB8DBF4FCF8E04B2CF58BEFDB0" width="276" height="149" data-media-type="image" style="height: auto;"><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">6.<font face="宋体">新建</font><font face="Times New Roman">Web&nbsp;Project</font><font face="宋体">工程和</font></span></p> 
  <p><span style="font-size:12.0000pt;">直接<font face="Times New Roman">new-&gt;Web&nbsp;Project</font><font face="宋体">或者</font><font face="Times New Roman">new-&gt;Project</font><font face="宋体">然后再选择</font><font face="Times New Roman">Web&nbsp;Project</font><font face="宋体">，选择相应的</font><font face="Times New Roman">J2EE</font><font face="宋体">版本，那个</font><font face="Times New Roman">Marven</font><font face="宋体">和</font><font face="Times New Roman">JSTL</font><font face="宋体">默认不选。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">文件路径默认是在<font face="Times New Roman">MyEclipse</font><font face="宋体">的工作空间下的，</font><font face="Times New Roman">WebRoot</font><font face="宋体">下存放</font><font face="Times New Roman">JSP</font><font face="宋体">文件。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">7.<font face="宋体">新建</font><font face="Times New Roman">JSP</font><font face="宋体">文件</font></span></p> 
  <p><span style="font-size:12.0000pt;">在<font face="Times New Roman">Web&nbsp;Project</font><font face="宋体">工程中的</font><font face="Times New Roman">WebRoot</font><font face="宋体">目录上右键单击，如果</font><font face="Times New Roman">New</font><font face="宋体">里面有就直接新建</font><font face="Times New Roman">JSP</font><font face="宋体">（</font><font face="Times New Roman">Advanced&nbsp;Templates</font><font face="宋体">），如果没有则比较麻烦：</font><font face="Times New Roman">New-&gt;others</font><font face="宋体">，展开</font><font face="Times New Roman">Web</font><font face="宋体">，找到</font><font face="Times New Roman">JSP</font><font face="宋体">（</font><font face="Times New Roman">Advanced&nbsp;Templates</font><font face="宋体">）。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <ol> 
   <li><span style="font-size:12.0000pt;">Myeclipse<font face="宋体">部署</font><font face="Times New Roman">Web</font><font face="宋体">项目</font></span></li> 
  </ol> 
  <p><span style="font-size:12.0000pt;">点击图标：</span><img src="./JavaEE学习手册_files/C5EBF261900140208296B2727659FA14" width="71" height="39" data-media-type="image" style="height: auto;"><span style="font-size:12.0000pt;">左边那个，然后<font face="Times New Roman">Add</font><font face="宋体">相应的</font><font face="Times New Roman">Tomcat</font><font face="宋体">就可以了。</font></span></p> 
  <p><span style="font-size:12.0000pt;">这样操作后，<font face="Times New Roman">MyEclipse</font><font face="宋体">会在</font><font face="Times New Roman">Tomcat</font><font face="宋体">的</font><font face="Times New Roman">Web</font><font face="宋体">目录（默认为</font><font face="Times New Roman">webapps</font><font face="宋体">）下生成一个以工程名命名的文件夹，</font><font face="Times New Roman">WebRoot</font><font face="宋体">下的</font><font face="Times New Roman">JSP</font><font face="宋体">文件会同步到该目录中，以便</font><font face="Times New Roman">Tomcat</font><font face="宋体">加载。</font></span></p> 
  <p><span style="font-size:12.0000pt;">注意：<font face="Times New Roman">MyEclipse</font><font face="宋体">自带的</font><font face="Times New Roman">Tomcat</font><font face="宋体">的</font><font face="Times New Roman">webapps</font><font face="宋体">路径在：</font></span></p> 
  <p><span style="font-size:12.0000pt;">\Workspaces\MyEclipse\.metadata\.me_tcat\webapps</span></p> 
  <p><span style="font-size:12.0000pt;">而<font face="Times New Roman">Tomcat</font><font face="宋体">安装目录在：</font></span></p> 
  <p><span style="font-size:12.0000pt;">\MyEclipse\Common\plugins\com.genuitec.eclipse.easie.tomcat.myeclipse_9.0.0.me201109141806\tomcat</span></p> 
  <p><span style="font-size:12.0000pt;">MyEclipse<font face="宋体">自带的</font><font face="Times New Roman">JDK</font><font face="宋体">安装路径在：</font></span></p> 
  <p><span style="font-size:12.0000pt;">\MyEclipse\Common\binary\com.sun.java.jdk.win32.x86_1.6.0.013</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">二、<font face="Times New Roman">JSP</font><font face="宋体">基础</font></span></p> 
  <p><span style="font-size:12.0000pt;">1<font face="宋体">、语法</font></span></p> 
  <p><span style="font-size:12.0000pt;">变量声明<font face="Times New Roman">&lt;%!</font><font face="宋体">……</font><font face="Times New Roman">%&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">注意：在<font face="Times New Roman">JSP</font><font face="宋体">内定义函数时，要放在</font><font face="Times New Roman">&lt;%!</font><font face="宋体">……</font><font face="Times New Roman">%&gt;</font><font face="宋体">内，否则可能会出错。</font></span></p> 
  <p><span style="font-size:12.0000pt;">JSP&nbsp;Scriptlets<font face="宋体">语法</font><font face="Times New Roman">&lt;%</font><font face="宋体">……</font><font face="Times New Roman">%&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">服务器端注释<font face="Times New Roman">&lt;%--</font><font face="宋体">……</font><font face="Times New Roman">--%&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">2<font face="宋体">、</font></span><span style="color:rgb(255,0,0);font-size:12.0000pt;">JSP<font face="宋体">指令元素</font></span><span style="font-size:12.0000pt;">&lt;%@<font face="宋体">……</font><font face="Times New Roman">%&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">1<font face="宋体">）</font><font face="Times New Roman">page</font><font face="宋体">指令</font></span></p> 
  <p><span style="font-size:12.0000pt;">常用属性<font face="Times New Roman">language,contenType,import,extends,session,info,isErrorPage</font><font face="宋体">等。</font></span></p> 
  <p><span style="font-size:12.0000pt;">例如<font face="Times New Roman">&lt;%@&nbsp;page&nbsp;language="java"&nbsp;contenType="text/html;charset=gb2312"&nbsp;%&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">2<font face="宋体">）</font><font face="Times New Roman">include</font><font face="宋体">指令</font></span></p> 
  <p><span style="font-size:12.0000pt;">语法格式为<font face="Times New Roman">&lt;%@&nbsp;include&nbsp;file="</font><font face="宋体">地址</font><font face="Times New Roman">"&nbsp;%&gt;</font><font face="宋体">，这种包含属于编译前包含。</font></span></p> 
  <p><span style="font-size:12.0000pt;">3<font face="宋体">）</font><font face="Times New Roman">taglib</font><font face="宋体">指令</font></span></p> 
  <p><span style="font-size:12.0000pt;">声明自定义标签，语法格式为<font face="Times New Roman">&lt;%@&nbsp;taglib&nbsp;uri="URI"&nbsp;prefix="tagPrefix"&nbsp;%&gt;</font><font face="宋体">例如</font></span></p> 
  <p><span style="font-size:12.0000pt;">&lt;%@&nbsp;taglib&nbsp;prefix="c"&nbsp;uri="http://java.sun.com/jsp/jstl/core"&nbsp;%&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">3<font face="宋体">、</font><font face="Times New Roman">JSP</font></span><span style="color:rgb(255,0,0);font-size:12.0000pt;">动作元素</span><span style="font-size:12.0000pt;">（单标签或者配对的标签）</span></p> 
  <p><span style="font-size:12.0000pt;">1<font face="宋体">）</font><font face="Times New Roman">&lt;jsp:include&gt;</font><font face="宋体">动作元素</font></span></p> 
  <p><span style="font-size:12.0000pt;">语法为：<font face="Times New Roman">&lt;jsp:include&nbsp;page="URL"&nbsp;flush="true|false"&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">可以包含<font face="Times New Roman">txt</font><font face="宋体">，</font><font face="Times New Roman">html</font><font face="宋体">和</font><font face="Times New Roman">jsp</font><font face="宋体">文件，与</font><font face="Times New Roman">include</font><font face="宋体">指令元素不同的是，对于静态文件它是编译后在包含，所以</font><font face="Times New Roman">txt</font><font face="宋体">文件中的</font><font face="Times New Roman">jsp</font><font face="宋体">代码执行不了。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">2<font face="宋体">）</font><font face="Times New Roman">&lt;jsp:forward&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">用法例如：<font face="Times New Roman">&lt;jsp:forward&nbsp;page="text.jsp"&gt;&lt;/jsp:forward&gt;</font><font face="宋体">属于服务器端跳转。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">3<font face="宋体">）</font><font face="Times New Roman">&lt;jsp:param&gt;</font></span></p> 
  <p><span style="font-size:12.0000pt;">用法为：<font face="Times New Roman">&lt;jsp:param&nbsp;name=""&nbsp;value=""/&gt;</font><font face="宋体">通常配合跳转的</font><font face="Times New Roman">jsp:forward</font><font face="宋体">和包含进文件的</font><font face="Times New Roman">jsp:include</font><font face="宋体">一起使用。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">4<font face="宋体">）</font><font face="Times New Roman">&lt;jsp:plugin&gt;&lt;jsp:params&gt;&lt;jsp:fallback&gt;&nbsp;</font></span></p> 
  <p><span style="font-size:12.0000pt;">配合使用。<font face="Times New Roman">plugin</font><font face="宋体">用于向</font><font face="Times New Roman">JSP</font><font face="宋体">中插入</font><font face="Times New Roman">Java</font><font face="宋体">插件，比如</font><font face="Times New Roman">Applet</font><font face="宋体">。相当于</font><font face="Times New Roman">HTML4.0</font><font face="宋体">版本中的</font><font face="Times New Roman">&lt;object&gt;</font><font face="宋体">标签。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="color:rgb(255,0,0);font-size:12.0000pt;">5.JSP<font face="宋体">内置对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">包括<font face="Times New Roman">out,&nbsp;response,&nbsp;pageContext,&nbsp;page,&nbsp;request,&nbsp;session,&nbsp;application,&nbsp;config,&nbsp;exception</font><font face="宋体">等。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">1<font face="宋体">）设置与读取属性，属性的范围</font></span></p> 
  <p><span style="font-size:12.0000pt;">范围分为：<font face="Times New Roman">page,&nbsp;request,&nbsp;session,&nbsp;application</font><font face="宋体">，分别是当前页面有效（任何跳转都无效），本次请求有效（服务器端跳转仍有效），本次登录有效（只要不关闭浏览器断开了连接），服务器端不重启永久有效。</font></span></p> 
  <p><span style="font-size:12.0000pt;">设置属性的方法为<font face="Times New Roman">pageContext.setAttribute("name","value")</font><font face="宋体">。</font><font face="Times New Roman">request,&nbsp;session,&nbsp;application</font><font face="宋体">类似。</font></span></p> 
  <p><span style="font-size:12.0000pt;">读取属性的方法类似。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">2<font face="宋体">）获取客户端传来的参数（用</font><font face="Times New Roman">request</font><font face="宋体">对象）</font></span></p> 
  <p><span style="font-size:12.0000pt;">例如</span></p> 
  <p><span style="font-size:12.0000pt;">request.getParameter(String&nbsp;name)&nbsp;//<font face="宋体">获取指定</font><font face="Times New Roman">name</font><font face="宋体">的值</font></span></p> 
  <p><span style="font-size:12.0000pt;">request.getParameterNames()&nbsp;//<font face="宋体">获取所有</font><font face="Times New Roman">name</font><font face="宋体">的名称</font></span></p> 
  <p><span style="font-size:12.0000pt;">request.getParameterValues(String&nbsp;name)&nbsp;//<font face="宋体">获取指定</font><font face="Times New Roman">name</font><font face="宋体">的多个值</font></span></p> 
  <p><span style="font-size:12.0000pt;">request.getParameterMap()&nbsp;//<font face="宋体">获得所有数据，封装在</font><font face="Times New Roman">Map</font><font face="宋体">对象中</font></span></p> 
  <p><span style="font-size:12.0000pt;">Map<font face="宋体">中存放了成对的</font><font face="Times New Roman">name-values</font><font face="宋体">值，例如</font></span></p> 
  <p><span style="font-size:12.0000pt;">&lt;%</span></p> 
  <p><span style="font-size:12.0000pt;">Map&nbsp;umap=&nbsp;request.getParameterMap();</span></p> 
  <p><span style="font-size:12.0000pt;">String[]&nbsp;strUsername=&nbsp;(String[])umap.get("username");</span></p> 
  <p><span style="font-size:12.0000pt;">%&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">此外，还有<font face="Times New Roman">getIntHeader(String&nbsp;name),&nbsp;getRequestedSessionId()</font><font face="宋体">等等。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">3<font face="宋体">）</font><font face="Times New Roman">response</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">用于给客户端传送信息。例如添加新的<font face="Times New Roman">Cookie</font><font face="宋体">或者跳转等。</font></span></p> 
  <p><span style="font-size:12.0000pt;">例如，实现页面跳转：<font face="Times New Roman">response.sendRedirect("DirectPage.jsp");</font></span></p> 
  <p><span style="font-size:12.0000pt;">实现自动刷新：<font face="Times New Roman">response.addIntHeader("</font><font face="宋体">自动刷新</font><font face="Times New Roman">",10);</font></span></p> 
  <p><span style="font-size:12.0000pt;">实现自动跳转刷新：<font face="Times New Roman">response.setHeader("</font><font face="宋体">自动刷新</font><font face="Times New Roman">","10;URL=http://www.");</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">4<font face="宋体">）</font><font face="Times New Roman">out</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">out<font face="宋体">对象常用的方法有</font><font face="Times New Roman">println(),&nbsp;close(),&nbsp;clear(),getBufferSize(),&nbsp;&nbsp;getRemaining()</font><font face="宋体">等。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">5<font face="宋体">）</font><font face="Times New Roman">session</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">用于设置与获得<font face="Times New Roman">session</font><font face="宋体">信息。例如：</font><font face="Times New Roman">getId(),&nbsp;setMaxInactiveInterval()</font><font face="宋体">设置生命周期</font><font face="Times New Roman">,&nbsp;isNew(),&nbsp;invalidate()</font><font face="宋体">清空。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">6<font face="宋体">）</font><font face="Times New Roman">application</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">用于获取与设置服务器端<font face="Times New Roman">Servlet</font><font face="宋体">的相关信息，例如</font><font face="Times New Roman">getSerInfo(),&nbsp;getRealPath()</font><font face="宋体">等。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">7<font face="宋体">）</font><font face="Times New Roman">pageContext</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">用法很多，<font face="Times New Roman">session,&nbsp;request,&nbsp;application</font><font face="宋体">的对象它都可以读，例如</font><font face="Times New Roman">getRequest()</font><font face="宋体">。</font></span></p> 
  <p><span style="font-size:12.0000pt;">例如，读取<font face="Times New Roman">session</font><font face="宋体">范围</font><font face="Times New Roman">name</font><font face="宋体">属性：</font><font face="Times New Roman">pageContext.getAttribute("name",&nbsp;pageContext.SESSION_SCOPE);</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">8<font face="宋体">）</font><font face="Times New Roman">page</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">通过<font face="Times New Roman">page</font><font face="宋体">对象可以调用</font><font face="Times New Roman">Servlet</font><font face="宋体">类中定义的方法，例如：</font></span></p> 
  <p><span style="font-size:12.0000pt;">String&nbsp;info=((javax.servlet.jsp.HttpJspPage)page).getServletInfo();</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">9<font face="宋体">）</font><font face="Times New Roman">config</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;">该对象允许访问<font face="Times New Roman">Servlet</font><font face="宋体">或</font><font face="Times New Roman">JSP</font><font face="宋体">引擎的初始化参数。例如</font><font face="Times New Roman">getServletMame()</font><font face="宋体">。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">10<font face="宋体">）</font><font face="Times New Roman">exception</font><font face="宋体">对象</font></span><span style="font-size:12.0000pt;">例如：</span><span style="font-size:12.0000pt;">exception.getMessage(),</span><span style="font-size:12.0000pt;">exception.printStackTrace(new&nbsp;java.io.PrintWriter(out))<font face="宋体">等</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">6<font face="宋体">、数据库操作</font></span><span style="font-size:12.0000pt;">1<font face="宋体">）将</font><font face="Times New Roman">mysql-connector-java-5.0.8-bin.jar</font><font face="宋体">文件拷贝到</font><font face="Times New Roman">WEB-INF/lib</font><font face="宋体">目录下；</font></span><span style="font-size:12.0000pt;">2<font face="宋体">）使用</font><font face="Times New Roman">Class.forName("com.mysql.jdbc.Driver");</font><font face="宋体">来加载</font><font face="Times New Roman">MySQL</font><font face="宋体">驱动；</font></span><span style="font-size:12.0000pt;">3<font face="宋体">）使用</font><font face="Times New Roman">Connection&nbsp;conn=DriverManager.getConnection(url,user,passwd);</font><font face="宋体">连接数据库，其中一般定义</font><font face="Times New Roman">String&nbsp;url="jdbc:mysql://localhost:3306/dbname";</font><font face="宋体">也可以直接把</font><font face="Times New Roman">user</font><font face="宋体">和</font><font face="Times New Roman">passwd</font><font face="宋体">写在</font><font face="Times New Roman">dbname</font><font face="宋体">后：</font><font face="Times New Roman">dbname?user=root&amp;password=admin</font><font face="宋体">；</font></span><span style="font-size:12.0000pt;">4<font face="宋体">）创建语句对象</font><font face="Times New Roman">Statement</font><font face="宋体">，以便执行</font><font face="Times New Roman">SQL</font><font face="宋体">，例如：</font></span><span style="font-size:12.0000pt;">Statement&nbsp;stmt&nbsp;=&nbsp;conn.createStatement();</span><span style="font-size:12.0000pt;">String&nbsp;addUser="INSERT&nbsp;INTO&nbsp;user(userid,username,passwd)&nbsp;VALUES(null,</span><span style="font-size:12.0000pt;">'Zollty','1234')";</span><span style="font-size:12.0000pt;">stmt.executeUpdate(adduser);</span><span style="font-size:12.0000pt;">以下是连接<font face="Times New Roman">mysql</font><font face="宋体">数据库的示范</font><font face="Times New Roman">java</font><font face="宋体">文件：</font></span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">package</span><span style="font-family: Consolas;">&nbsp;csai.db;</span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">import</span><span style="font-family: Consolas;">&nbsp;java.sql.*;</span></p> 
  <p><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">public</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">class</span><span style="font-family: Consolas;">&nbsp;DBConn&nbsp;{</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;">//<font face="MS Mincho">得到数据</font></span><span style="color:rgb(63,127,95);">库连</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;">接</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">public</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">static</span><span style="font-family: Consolas;">&nbsp;Connection&nbsp;createDBConn(){</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">try</span><span style="font-family: Consolas;">{</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">Class.</span><span style="font-family: Consolas; font-style: italic;">forName</span><span style="font-family: Consolas;">(</span><span style="color:rgb(42,0,255);font-family:Consolas;">"com.mysql.jdbc.Driver"</span><span style="font-family: Consolas;">);</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">Connection&nbsp;conn=DriverManager.</span><span style="font-family: Consolas; font-style: italic;">getConnection</span><span style="font-family: Consolas;">(</span><span style="color:rgb(42,0,255);font-family:Consolas;">"jdbc:mysql://localhost:3306/root"</span><span style="font-family: Consolas;">,</span><span style="color:rgb(42,0,255);font-family:Consolas;">"root"</span><span style="font-family: Consolas;">,</span><span style="color:rgb(42,0,255);font-family:Consolas;">"admin"</span><span style="font-family: Consolas;">);</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">return</span><span style="font-family: Consolas;">&nbsp;conn;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">catch</span><span style="font-family: Consolas;">(Exception&nbsp;e){</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">e.printStackTrace();</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">return</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">null</span><span style="font-family: Consolas;">;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;">//<font face="MS Mincho">关</font></span><span style="color:rgb(63,127,95);">闭</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;">数据</span><span style="color:rgb(63,127,95);">库连</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;">接</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">public</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">static</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">void</span><span style="font-family: Consolas;">&nbsp;closeConn(Connection&nbsp;conn){</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">try</span><span style="font-family: Consolas;">{</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">conn.close();</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">catch</span><span style="font-family: Consolas;">(Exception&nbsp;e){</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">e.printStackTrace();</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span><span style="font-family: Consolas;"> </span></p> 
  <p><span style="font-family: Consolas;">}</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">5)&nbsp;<font face="宋体">更新</font><font face="Times New Roman">executeUpdate</font><font face="宋体">，查询</font><font face="Times New Roman">executeQuery</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">6<font face="宋体">）</font><font face="Times New Roman">ResultSet</font><font face="宋体">结果集，将查询到的结果赋值给</font><font face="Times New Roman">ResultSet</font><font face="宋体">，用</font><font face="Times New Roman">getXXX(n)</font><font face="宋体">取出具体的字段，例如</font></span><span style="font-size:12.0000pt;">ResultSet&nbsp;rs&nbsp;=&nbsp;stmt.executeQuery("SELECT&nbsp;*&nbsp;FROM&nbsp;user");</span><span style="font-size:12.0000pt;">while(rs.next()){</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">int&nbsp;userid=&nbsp;rs.getInt(1);&nbsp;//<font face="宋体">取出第一个字段</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">String&nbsp;username=&nbsp;rs.getString(2);&nbsp;//<font face="宋体">第二个字段</font></span><span style="font-size:12.0000pt;">}</span><span style="font-size:12.0000pt;">SQL<font face="宋体">技巧：</font><font face="Times New Roman">SELECT&nbsp;userid,username&nbsp;FROM&nbsp;user&nbsp;limit&nbsp;1,3</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">7<font face="宋体">）关闭数据库</font></span><span style="font-size:12.0000pt;">通常如下：</span><span style="font-size:12.0000pt;">try{</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">if(rs&nbsp;!=&nbsp;null){&nbsp;rs.close();&nbsp;rs=null;&nbsp;}//<font face="宋体">注意顺序</font><font face="Times New Roman">rs</font><font face="宋体">、</font><font face="Times New Roman">stmt</font><font face="宋体">、</font><font face="Times New Roman">conn</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">if(stmt&nbsp;!=&nbsp;null){&nbsp;stmt.close();&nbsp;stmt=null;&nbsp;}</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">if(conn&nbsp;!=&nbsp;null){&nbsp;conn.close();&nbsp;conn=null;&nbsp;}</span><span style="font-size:12.0000pt;">}catch(Exception&nbsp;e){</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">out.println("<font face="宋体">数据库关闭异常</font><font face="Times New Roman">");</font></span><span style="font-size:12.0000pt;">}</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">8<font face="宋体">）预处理语句对象</font><font face="Times New Roman">PreparedStatement</font></span><span style="font-size:12.0000pt;">和<font face="Times New Roman">Statement</font><font face="宋体">差不多，最大的区别在于可以在</font><font face="Times New Roman">SQL</font><font face="宋体">语句中用</font><font face="Times New Roman">?</font><font face="宋体">代替实际值，在后面才调用对象的</font><font face="Times New Roman">setXXX(n,xx)</font><font face="宋体">方法为第</font><font face="Times New Roman">n</font><font face="宋体">个</font><font face="Times New Roman">?</font><font face="宋体">赋</font><font face="Times New Roman">XXX</font><font face="宋体">类型的值，例如</font></span><span style="font-size:12.0000pt;">String&nbsp;addUser&nbsp;="INSERT&nbsp;INTO&nbsp;user(userid,username,passwd)&nbsp;VALUES(null,?,?)";</span><span style="font-size:12.0000pt;">PreparedStatement&nbsp;pstmt=&nbsp;conn.prepareStatement(addUser);</span><span style="font-size:12.0000pt;">pstmt=&nbsp;conn.setString(1,"Zollty");</span><span style="font-size:12.0000pt;">pstmt=&nbsp;conn.setString(2,"123456");&nbsp;//<font face="宋体">设置参数</font></span><span style="font-size:12.0000pt;">pstmt.exetuteUpdate();&nbsp;//<font face="宋体">直接执行</font><font face="Times New Roman">Update</font><font face="宋体">，此时无需参数。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">7<font face="宋体">、</font><font face="Times New Roman">JSP</font><font face="宋体">中调用</font></span><span style="color:rgb(255,0,0);font-size:12.0000pt;">JavaBean</span><span style="font-size:12.0000pt;">&lt;jsp:useBean&nbsp;id=""&nbsp;scope=""&nbsp;class=""&gt;&lt;/jsp:useBean&gt;</span><span style="font-size:12.0000pt;">例如一个<font face="Times New Roman">JavaBean</font><font face="宋体">内容如下：</font></span><span style="font-size:12.0000pt;">package&nbsp;com.zollty.ch07;</span><span style="font-size:12.0000pt;">public&nbsp;class&nbsp;UserBean&nbsp;{</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">private&nbsp;String&nbsp;username;</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">public&nbsp;String&nbsp;getUsername()&nbsp;{&nbsp;return&nbsp;username;&nbsp;}</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">public&nbsp;void&nbsp;setUsername(String&nbsp;username)&nbsp;{&nbsp;//<font face="宋体">自定义的</font><font face="Times New Roman">get</font><font face="宋体">方法</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">this.username=&nbsp;username;</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">}</span><span style="font-size:12.0000pt;">}</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">在<font face="Times New Roman">JSP</font><font face="宋体">中调用的方法为</font></span><span style="font-size:12.0000pt;">&lt;jsp:useBean&nbsp;id="user"&nbsp;scope="page"&nbsp;class="com.zollty.ch07.UserBean"&gt;</span><span style="font-size:12.0000pt;">&lt;/jsp:useBean&gt;&nbsp;//user<font face="宋体">相当于</font><font face="Times New Roman">new</font><font face="宋体">的一个</font><font face="Times New Roman">UserBean</font><font face="宋体">类实例</font></span><span style="font-size:12.0000pt;">&lt;%</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">user.setUsername("Zollty");&nbsp;//<font face="宋体">用自定义的方法设置参数值</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">out.println(user.getUsername());</span><span style="font-size:12.0000pt;">%&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">也可以用动作元素标签来设置数据的值，达到和自定义函数<font face="Times New Roman">setUsername("Zollt</font></span><span style="font-size:12.0000pt;">y")<font face="宋体">一样的效果（范围都要受到</font><font face="Times New Roman">&lt;jsp:useBean&gt;</font><font face="宋体">的影响），例如有一个表单，里面有</font><font face="Times New Roman">uname</font><font face="宋体">这一项：</font></span><span style="font-size:12.0000pt;">&lt;form&nbsp;action="Test3.jsp"&nbsp;method="post"&gt;</span><span style="font-size:12.0000pt;">&lt;input&nbsp;type="text"&nbsp;name="uname"&gt;&lt;br&gt;</span><span style="font-size:12.0000pt;">&lt;input&nbsp;type="submit"&nbsp;value="<font face="宋体">提交</font><font face="Times New Roman">"&gt;</font></span><span style="font-size:12.0000pt;">&lt;/form&gt;</span><span style="font-size:12.0000pt;">在<font face="Times New Roman">Test3.jsp</font><font face="宋体">里面通过</font></span><span style="font-size:12.0000pt;">&lt;jsp:setProperty&nbsp;name="user"&nbsp;property="*"&nbsp;/&gt;</span><span style="font-size:12.0000pt;">就可以将<font face="Times New Roman">user</font><font face="宋体">实例中的所有数据元素值自动匹配</font><font face="Times New Roman">form</font><font face="宋体">表单中的属性值。再通过</font><font face="Times New Roman">user.getUsername()</font><font face="宋体">或者</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&lt;jsp:getProperty&nbsp;name="user"&nbsp;property="username"&nbsp;/&gt;</span><span style="font-size:12.0000pt;">就可以获取了。</span><span style="font-size:12.0000pt;">上面的<font face="Times New Roman">property="*"</font><font face="宋体">是特例，一般写作：</font></span><span style="font-size:12.0000pt;">&lt;jsp:setProperty&nbsp;name="user"&nbsp;property="username"&nbsp;param="uname"&nbsp;/&gt;</span><span style="font-size:12.0000pt;">其中<font face="Times New Roman">property</font><font face="宋体">对应的是</font><font face="Times New Roman">UserBean</font><font face="宋体">类中的数据，而</font><font face="Times New Roman">param</font><font face="宋体">指的是</font><font face="Times New Roman">form</font><font face="宋体">表单中的参数（此处是</font><font face="Times New Roman">input</font><font face="宋体">标签中</font><font face="Times New Roman">name</font><font face="宋体">的值）。相当于把</font><font face="Times New Roman">param</font><font face="宋体">的值赋给</font><font face="Times New Roman">property</font><font face="宋体">，而且这个赋值只在</font><font face="Times New Roman">page</font><font face="宋体">范围内有效，也就是说仅本页内可以取得这个值，任何跳转了页面这个值就不存在了。其实</font><font face="Times New Roman">page</font><font face="宋体">、</font><font face="Times New Roman">request</font><font face="宋体">等四个范围的值是独立存在的，要访问也必须指定范围。</font></span><span style="font-size:12.0000pt;">PS<font face="宋体">：这里</font><font face="Times New Roman">form</font><font face="宋体">表单中提交的数据类型要和</font><font face="Times New Roman">Bean</font><font face="宋体">中的数据的类型一样。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">移除<font face="Times New Roman">JavaBean</font><font face="宋体">，例如要移除</font><font face="Times New Roman">page</font><font face="宋体">范围内的</font><font face="Times New Roman">JavaBean</font><font face="宋体">，则在</font><font face="Times New Roman">JavaScripts</font><font face="宋体">里面写</font></span><span style="font-size:12.0000pt;">&lt;%</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">pageContext.removeAttribute("user");</span><span style="font-size:12.0000pt;">%&gt;</span><span style="font-size:12.0000pt;">注意到虽然是调用“移除属性”的方法，但是<font face="Times New Roman">"user"</font><font face="宋体">并不是属性，它与</font><font face="Times New Roman">JSP</font><font face="宋体">内置对象的</font><font face="Times New Roman">pageContext.setAttribute("name","value")</font><font face="宋体">有些区别：</font><font face="Times New Roman">"user"</font><font face="宋体">是自定义的类</font><font face="Times New Roman">UserBean</font><font face="宋体">的实例，而</font><font face="Times New Roman">"name"</font><font face="宋体">只是一个普通的名字，是一个字符串。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">PS<font face="宋体">：英文</font><font face="Times New Roman">A</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ttribute</span><span style="font-size:12.0000pt;">和<font face="Times New Roman">Property</font><font face="宋体">都是属性的意思，但在</font><font face="Times New Roman">JSP</font><font face="宋体">中</font><font face="Times New Roman">A</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ttribute</span><span style="font-size:12.0000pt;">可以是一个类或普通变量，而<font face="Times New Roman">Property</font><font face="宋体">是指一个类的数据成员。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(255,0,0);font-size:12.0000pt;">注意：</span><span style="font-size:12.0000pt;">JSP<font face="宋体">是放在</font><font face="Times New Roman">Web</font><font face="宋体">工程</font><font face="Times New Roman">ch01</font><font face="宋体">下的</font><font face="Times New Roman">WebRoot</font><font face="宋体">目录下，和</font><font face="Times New Roman">META-INF</font><font face="宋体">、</font><font face="Times New Roman">WEB-INF</font><font face="宋体">在同一级目录，而</font><font face="Times New Roman">JavaBean</font><font face="宋体">是放在</font><font face="Times New Roman">ch01</font><font face="宋体">下的</font><font face="Times New Roman">src</font><font face="宋体">文件夹下的</font><font face="Times New Roman">com.zollty</font><font face="宋体">包中，在其他地方中引用只需要引入</font><font face="Times New Roman">class="com.zollty.UserBean"</font><font face="宋体">即可。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">8<font face="宋体">、</font></span><span style="color:rgb(255,0,0);font-size:12.0000pt;">EL<font face="宋体">表达式</font></span><span style="font-size:12.0000pt;">EL<font face="宋体">运算符：有</font><font face="Times New Roman">()</font><font face="宋体">、</font><font face="Times New Roman">[]</font><font face="宋体">、！</font><font face="Times New Roman">(not)</font><font face="宋体">、</font><font face="Times New Roman">*</font><font face="宋体">、</font><font face="Times New Roman">/</font><font face="宋体">、</font><font face="Times New Roman">+</font><font face="宋体">、</font><font face="Times New Roman">-</font><font face="宋体">、</font><font face="Times New Roman">&lt;</font><font face="宋体">、</font><font face="Times New Roman">&lt;=</font><font face="宋体">、</font><font face="Times New Roman">==</font><font face="宋体">、</font><font face="Times New Roman">&amp;&amp;</font><font face="宋体">、</font><font face="Times New Roman">||</font><font face="宋体">、</font><font face="Times New Roman">${A?B:C}</font><font face="宋体">等</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">EL<font face="宋体">内置对象（</font><font face="Times New Roman">EL</font><font face="宋体">存取器（也称为导航）），用于获取某些值。例如</font></span><span style="font-size:12.0000pt;">${pageScope.user.username}<font face="宋体">，等价于</font><font face="Times New Roman">${pageScope.user["username"]}</font></span><span style="font-size:12.0000pt;">接收用户参数（从表单<font face="Times New Roman">post</font><font face="宋体">过来的），例如：</font></span><span style="font-size:12.0000pt;">${param.username}</span><span style="font-size:12.0000pt;">${paramValues.interest[0]}&nbsp;${param.interest[1]}</span><span style="font-size:12.0000pt;">这个<font face="Times New Roman">param</font><font face="宋体">和</font><font face="Times New Roman">paramValues</font><font face="宋体">相当于前面讲的</font>request.getParameter()和<font face="Times New Roman">request.getParameterValues()</font><font face="宋体">。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">同理<font face="Times New Roman">EL</font><font face="宋体">存取器还可以获得</font><font face="Times New Roman">JavaBean</font><font face="宋体">、</font><font face="Times New Roman">Map</font><font face="宋体">、数组、对象中的值。复杂对象的写法类似于：</font><font face="Times New Roman">${sessionScope.shoppingCart[0].price}</font><font face="宋体">，例如</font></span><span style="font-size:12.0000pt;">&lt;%</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">HashMap&nbsp;userInfo=&nbsp;new&nbsp;HashMap();</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">userInfo.put("username","zollty");</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">session.setAttribute("userInfo",userInfo);</span><span style="font-size:12.0000pt;">%&gt;<font face="宋体">然后就可以调用</font><font face="Times New Roman">${userInfo.username}</font></span><span style="font-size:12.0000pt;">再例如：</span><span style="font-size:12.0000pt;">&lt;%</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">//<font face="宋体">下面定义一个对象数组</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">ArrayList&lt;Person&gt;&nbsp;persons=&nbsp;new&nbsp;ArrayList&lt;Person&gt;();</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">//<font face="宋体">实例化两个</font><font face="Times New Roman">Person</font><font face="宋体">对象</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">Person&nbsp;p1=new&nbsp;Person("Zollty",23,"<font face="宋体">男</font><font face="Times New Roman">");</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">Person&nbsp;p2=new&nbsp;Person("Duby2",20,"<font face="宋体">女</font><font face="Times New Roman">");</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">//<font face="宋体">将</font><font face="Times New Roman">p1</font><font face="宋体">和</font><font face="Times New Roman">p2</font><font face="宋体">装入对象数组中</font></span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">persons.add(p1);</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">perssons.add(p2);</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">session.setAttribute("persons",persons);</span><span style="font-size:12.0000pt;">%&gt;<font face="宋体">然后就可以访问</font><font face="Times New Roman">${sessionScope.persons[0].name}</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">PS:<font face="宋体">设置</font><font face="Times New Roman">Cookie</font></span><span style="font-size:12.0000pt;">&lt;%</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">Cookie&nbsp;c=new&nbsp;Cookie("username","zollty");</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">response.addCookie(c);</span><span style="font-size:12.0000pt;">%&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">其他</span><span style="font-size:12.0000pt;">${cookie.username.value}</span><span style="font-size:12.0000pt;">${header["host"]}<font face="宋体">将显示</font><font face="Times New Roman">localhost:8080</font></span><span style="font-size:12.0000pt;">${initParam.username}<font face="宋体">，其中</font><font face="Times New Roman">username</font><font face="宋体">在</font><font face="Times New Roman">web.xml</font><font face="宋体">中设置：</font></span><span style="font-size:12.0000pt;">&lt;context-param&gt;</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">&lt;param-name&gt;username&lt;/param-name&gt;</span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">&lt;param-value&gt;Zollty&lt;/param-value&gt;</span><span style="font-size:12.0000pt;">&lt;/contextparam&gt;</span><span style="font-size:12.0000pt;">利用下面等方法获取<font face="Times New Roman">get</font><font face="宋体">或</font><font face="Times New Roman">post</font><font face="宋体">方式传递的信息：</font></span><span style="font-size:12.0000pt;">${pageContent.request.queryString}</span><span style="font-size:12.0000pt;">${pageContent.request.requestURL}</span><span style="font-size:12.0000pt;">${pageContent.request.contextPath}</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">9<font face="宋体">、</font></span><span style="color:rgb(255,0,0);font-size:12.0000pt;">JSTL</span><span style="font-size:12.0000pt;">1.&nbsp;JSTL<font face="宋体">核心标签</font></span><span style="font-size:12.0000pt;">&lt;c:set&gt;<font face="宋体">设置变量</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:set&nbsp;var=”varName”&nbsp;value=”varValue”&nbsp;[scope=”page|request|session|application”]&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"><br></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">default&nbsp;value</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"><br></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:set&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:remove&gt;<font face="宋体">移除变量</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:remove&nbsp;var=”varName”&nbsp;[scope=”page|request|session|application”]&nbsp;/&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:out&gt;<font face="宋体">输出</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:&nbsp;out&nbsp;value=”object”&nbsp;[escapeXml=”true|false”]&nbsp;&gt;defalut&nbsp;value&lt;/c:out&gt;</span><span style="font-size:12.0000pt;">escapeXml<font face="宋体">默认为</font><font face="Times New Roman">ture</font><font face="宋体">，是将</font><font face="Times New Roman">&lt;</font><font face="宋体">、</font><font face="Times New Roman">&gt;</font><font face="宋体">、</font><font face="Times New Roman">'</font><font face="宋体">、</font><font face="Times New Roman">"</font><font face="宋体">、</font><font face="Times New Roman">&amp;</font><font face="宋体">转换成</font><font face="Times New Roman">(&lt;)&lt;</font><font face="宋体">、</font><font face="Times New Roman">(&gt;)&gt;</font><font face="宋体">、</font></span><span style="font-size:12.0000pt;">(')'<font face="宋体">、</font><font face="Times New Roman">(")"</font><font face="宋体">、</font><font face="Times New Roman">(&amp;)&amp;</font><font face="宋体">输出。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:if&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:if&nbsp;test=”checkCondition”&nbsp;var=”varName”&nbsp;scope=”page|request|session|application”&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"><br></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">body&nbsp;content</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"><br></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:if&gt;</span><span style="font-size:12.0000pt;">当<font face="Times New Roman">test</font><font face="宋体">的表达式为</font><font face="Times New Roman">ture</font><font face="宋体">时会执行</font><font face="Times New Roman">body&nbsp;content</font><font face="宋体">。判断结果</font><font face="Times New Roman">ture</font><font face="宋体">或</font><font face="Times New Roman">false</font><font face="宋体">存放到</font><font face="Times New Roman">var</font><font face="宋体">中。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:choose&gt;<font face="宋体">、</font><font face="Times New Roman">&lt;c:when&gt;</font><font face="宋体">、</font><font face="Times New Roman">&lt;c:otherwise&gt;</font><font face="宋体">相当于</font><font face="Times New Roman">if&nbsp;else</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:set&nbsp;var=”num”&nbsp;scope=”page”&nbsp;value=”admin”/&gt;</span><span style="color:rgb(51,153,102);font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;</span><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">c:choose</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:</span><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">when&nbsp;test=”${num==’guest’}”</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:out&nbsp;value=”guest”/&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:when&gt;</span><span style="color:rgb(51,153,102);font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(51,153,102);font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:</span><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">when&nbsp;test=”${num==’admin’}”</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:out&nbsp;value=”admin”/&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:when&gt;</span><span style="color:rgb(51,153,102);font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:</span><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">otherwise</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:out&nbsp;value=”other”/&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:otherwise&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;</span><span style="color:rgb(255,0,0);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">/c:choose</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:forEach&gt;<font face="宋体">遍历或循环</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:forEach&nbsp;items=”collection”&nbsp;var=”varName”&nbsp;[varstatue=”varStatusName”]&nbsp;[begin=”begin”]&nbsp;[end=”end”]&nbsp;[step=”step”]&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">Body&nbsp;content</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:forEach&gt;</span><span style="font-size:12.0000pt;">items<font face="宋体">指被迭代的对象成员，</font><font face="Times New Roman">var</font><font face="宋体">指当前指到的成员，</font><font face="Times New Roman">begin/end</font><font face="宋体">设定起始和结束的位置，</font><font face="Times New Roman">step</font><font face="宋体">为步长，</font><font face="Times New Roman">varstatue</font><font face="宋体">存储迭代的状态信息，含</font><font face="Times New Roman">index</font><font face="宋体">，</font><font face="Times New Roman">count</font><font face="宋体">，</font><font face="Times New Roman">first</font><font face="宋体">，</font><font face="Times New Roman">last</font><font face="宋体">四个方法，例如</font></span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:forEach&nbsp;var=”ItemName”&nbsp;items=”${Items}”&nbsp;begin=”3”&nbsp;end=”4”&nbsp;step=”1”&nbsp;varStatus=”s”&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&nbsp;&lt;c:out&nbsp;value=”${ItemName}”&nbsp;/&gt;</span><span style="color:rgb(128,128,128);font-size:9.0000pt;">的四种属性</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">:&lt;br&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(128,128,128);font-size:9.0000pt;">所在位置即索引</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">:&nbsp;&lt;c:out&nbsp;value=”${s.index}”&nbsp;/&gt;&nbsp;&lt;br&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(128,128,128);font-size:9.0000pt;">总共已迭代的次数</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">:&nbsp;&lt;c:out&nbsp;value=”${s.count}”/&gt;&lt;br&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(128,128,128);font-size:9.0000pt;">是否为第一个位置</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">:&nbsp;&lt;c:out&nbsp;value=”${s.first}”&nbsp;/&gt;&lt;br&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(128,128,128);font-size:9.0000pt;">是否为最后一个位置</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">:&nbsp;&lt;c:out&nbsp;value=”${s.last}”/&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:forEach&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:forTokens&gt;<font face="宋体">分割字符串</font></span><span style="font-size:12.0000pt;">例如：</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:forTokens&nbsp;var=”token”&nbsp;items=”bleu,rouge|vert,jaune|blanc,rouge”&nbsp;delims=”|,”&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&nbsp;&nbsp;&lt;c:out&nbsp;value=”${token}”/&gt;</span><span style="color:rgb(128,128,128);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:forTokens&gt;</span><span style="font-size:12.0000pt;">delims<font face="宋体">属性是自定义的分隔符，</font><font face="Times New Roman">items</font><font face="宋体">为要分割的字符串，还有其他熟悉和</font><font face="Times New Roman">forEach</font><font face="宋体">差不多。</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:import&gt;<font face="宋体">引入静态文件，比</font><font face="Times New Roman">&lt;jsp:import&gt;</font><font face="宋体">功能更强</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:import&nbsp;url=”url”&nbsp;[context=”context”]&nbsp;[var=”varName”]&nbsp;[scope=”page|request|session|application”]&nbsp;[varReader=”varReader”]&nbsp;[charEncodion=”charEncoding”]&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">Body&nbsp;content</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:import&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:redirect&gt;<font face="宋体">跳转页面，和</font><font face="Times New Roman">&lt;jsp:redirect&gt;</font><font face="宋体">一样</font></span><span style="font-size:12.0000pt;">&lt;c:param&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:redirect&nbsp;url=”url”&nbsp;[context=”context”]&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:param&nbsp;name=”paramName”&nbsp;value=”value”/&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:redirect&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;c:url&gt;<font face="宋体">将</font><font face="Times New Roman">URL</font><font face="宋体">赋值给一个变量，便于重复调用</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:url&nbsp;value=”value”&nbsp;[context=”context”]&nbsp;[var=”varName”]&nbsp;[scope=”page|request|session|application”]&nbsp;&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;"> </span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;c:param&nbsp;name=”paramName”&nbsp;value=”value”&nbsp;/&gt;</span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;/c:url&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">2.<font face="宋体">数据库标签</font></span><span style="font-size:12.0000pt;">&lt;sql:setDataSource&gt;</span><span style="font-size:12.0000pt;">&lt;sql:update&gt;</span><span style="font-size:12.0000pt;">&lt;sql:query&gt;</span><span style="font-size:12.0000pt;">&lt;sql:param&gt;</span><span style="font-size:12.0000pt;">&lt;sql:dateParam&gt;</span><span style="font-size:12.0000pt;">&lt;sql:transaction&gt;</span><span style="font-size:12.0000pt;">3.I18N<font face="宋体">格式化标签库</font></span><span style="font-size:12.0000pt;">&lt;fmt:formatNumber&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:parseNumber&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:formatDate&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:parseDate&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:setTimeZone&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:timeZone&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;fmt:setLocale&gt;<font face="宋体">设置本地化环境（语言</font><font face="Times New Roman">+</font><font face="宋体">地区）</font></span><span style="color:rgb(51,153,102);font-family:&#39;Times New Roman&#39;;font-size:9.0000pt;">&lt;fmt:setLocale&nbsp;value=”…locale&nbsp;value…”&nbsp;[variant=”…variant&nbsp;value…”]&nbsp;[scope=”page|request|session|application”]&nbsp;/&gt;</span><span style="font-size:12.0000pt;">例如<font face="Times New Roman">&lt;fmt:setLocal&nbsp;value="zh_CN"&gt;</font></span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">&lt;fmt:requestEncoding&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:setBundle&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:message&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:param&gt;</span><span style="font-size:12.0000pt;">&lt;fmt:bundle&gt;</span><span style="font-size:12.0000pt;">4.XML<font face="宋体">标签库</font></span><span style="font-size:12.0000pt;">首先导入<font face="Times New Roman">xalan.jar</font><font face="宋体">和</font><font face="Times New Roman">serializer.jar</font><font face="宋体">到</font><font face="Times New Roman">Web</font><font face="宋体">站点中的</font><font face="Times New Roman">WEB-INF/lib</font><font face="宋体">目录下，如果在多个站点中都要使用就放到</font><font face="Times New Roman">TOMCAT</font><font face="宋体">安装目录下的</font><font face="Times New Roman">lib</font><font face="宋体">中。</font></span><span style="font-size:12.0000pt;">&lt;x:parse&gt;</span><span style="font-size:12.0000pt;">&lt;x:out&gt;</span><span style="font-size:12.0000pt;">&lt;x:set&gt;</span><span style="font-size:12.0000pt;">&lt;x:if&gt;</span><span style="font-size:12.0000pt;">&lt;x:choose&gt;</span><span style="font-size:12.0000pt;">&lt;x:forEach&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">10<font face="宋体">、网页中访问</font><font face="Times New Roman">Servlet</font><font face="宋体">（须在</font><font face="Times New Roman">web.xml</font><font face="宋体">中配置）</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"><br></span><span style="font-size:12.0000pt;">在<font face="Times New Roman">src</font><font face="宋体">文件夹下新建一个</font><font face="Times New Roman">com.zollty</font><font face="宋体">包，然后新建</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ServletDemo0</span><span style="font-size:12.0000pt;">类，在<font face="Times New Roman">WEB-INF</font><font face="宋体">文件夹下的</font><font face="Times New Roman">web.xml</font><font face="宋体">中配置这个类：在</font><font face="Times New Roman">&lt;web-app&gt;</font><font face="宋体">标签对之间添加</font></span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-name</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;">ServletDemo01</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;/</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-name</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-class</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;">com.zollty.ServletDemo01</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;/</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-class</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;/</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-mapping</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-name</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;">ServletDemo01</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;/</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-name</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">url-pattern</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;">/ServletDemo01</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;/</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">url-pattern</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-family: &#39;Times New Roman&#39;;"> </span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&lt;/</span><span style="color:rgb(63,127,127);font-family:&#39;Times New Roman&#39;;">servlet-mapping</span><span style="color:rgb(0,128,128);font-family:&#39;Times New Roman&#39;;">&gt;</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">11、Servlet之</span><span style="color:rgb(255,0,0);font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">和</span><span style="color:rgb(255,0,0);font-size:12.0000pt;">Listener</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">开发分为二个步骤：</span></p> 
  <p><span style="font-size:12.0000pt;">1.</span><span style="font-size:12.0000pt;">编写</span><span style="font-size:12.0000pt;">java</span><span style="font-size:12.0000pt;">类实现</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">接口，并实现其</span><span style="font-size:12.0000pt;">doFilter</span><span style="font-size:12.0000pt;">方法。</span></p> 
  <p><span style="font-size:12.0000pt;">2.</span><span style="font-size:12.0000pt;">在</span><span style="font-size:12.0000pt;">&nbsp;web.xml&nbsp;</span><span style="font-size:12.0000pt;">文件中使用</span><span style="font-size:12.0000pt;">&lt;filter&gt;</span><span style="font-size:12.0000pt;">和</span><span style="font-size:12.0000pt;">&lt;filter-mapping&gt;</span><span style="font-size:12.0000pt;">元素对编写的</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">类进行注册，并设置它所能拦截的资源。</span></p> 
  <p><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">链</span></p> 
  <p><span style="font-size:12.0000pt;">在一个</span><span style="font-size:12.0000pt;">web</span><span style="font-size:12.0000pt;">应用中，可以开发编写多个</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">，这些</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">组合起来称之为一个</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">链。</span></p> 
  <p><span style="font-size:12.0000pt;">web</span><span style="font-size:12.0000pt;">服务器根据</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">在</span><span style="font-size:12.0000pt;">web.xml</span><span style="font-size:12.0000pt;">文件中的注册顺序，决定先调用哪个</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">，当第一个</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">的</span><span style="font-size:12.0000pt;">doFilter</span><span style="font-size:12.0000pt;">方法被调用时，</span><span style="font-size:12.0000pt;">web</span><span style="font-size:12.0000pt;">服务器会创建一个代表</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">链的</span><span style="font-size:12.0000pt;">FilterChain</span><span style="font-size:12.0000pt;">对象传递给该方法。在</span><span style="font-size:12.0000pt;">doFilter</span><span style="font-size:12.0000pt;">方法中，开发人员如果调用了</span><span style="font-size:12.0000pt;">FilterChain</span><span style="font-size:12.0000pt;">对象的</span><span style="font-size:12.0000pt;">doFilter</span><span style="font-size:12.0000pt;">方法，则</span><span style="font-size:12.0000pt;">web</span><span style="font-size:12.0000pt;">服务器会检查</span><span style="font-size:12.0000pt;">FilterChain</span><span style="font-size:12.0000pt;">对象中是否还有</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">，如果有，则调用第</span><span style="font-size:12.0000pt;">2</span><span style="font-size:12.0000pt;">个</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">，如果没有，则调用目标资源。</span></p> 
  <p><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">链实验（查看</span><span style="font-size:12.0000pt;">filterChain&nbsp;API</span><span style="font-size:12.0000pt;">文档）</span></p> 
  <p><span style="font-size:12.0000pt;">Filter的部署-注册Filter</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;filter&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;filter-name&gt;testFitler&lt;/filter-name&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;filter-class&gt;org.test.TestFiter&lt;/filter-class&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;init-param&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;param-name&gt;word_file&lt;/param-name&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;param-value&gt;/WEB-INF/word.txt&lt;/param-value&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/init-param&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;/filter&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">1.&lt;filter-name&gt;</span><span style="font-size:12.0000pt;">用于为过滤器指定一个名字，该元素的内容不能为空。</span></p> 
  <p><span style="font-size:12.0000pt;">2.&lt;filter-class&gt;</span><span style="font-size:12.0000pt;">元素用于指定过滤器的完整的限定类名。</span></p> 
  <p><span style="font-size:12.0000pt;">3.&lt;init-param&gt;</span><span style="font-size:12.0000pt;">元素用于为过滤器指定初始化参数，它的子元素</span><span style="font-size:12.0000pt;">&lt;param-name&gt;</span><span style="font-size:12.0000pt;">指定参数的名字，</span><span style="font-size:12.0000pt;">&lt;param-value&gt;</span><span style="font-size:12.0000pt;">指定参数的值。在过滤器中，可以使用</span><span style="font-size:12.0000pt;">FilterConfig</span><span style="font-size:12.0000pt;">接口对象来访问初始化参数。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;filter-mapping&gt;</span><span style="font-size:12.0000pt;">元素用于设置一个</span><span style="font-size:12.0000pt;">&nbsp;Filter&nbsp;</span><span style="font-size:12.0000pt;">所负责拦截的资源。一个</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">拦截的资源可通过两种方式来指定：</span><span style="font-size:12.0000pt;">Servlet&nbsp;</span><span style="font-size:12.0000pt;">名称和资源访问的请求路径</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;filter-name&gt;</span><span style="font-size:12.0000pt;">子元素用于设置</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">的注册名称。该值必须是在</span><span style="font-size:12.0000pt;">&lt;filter&gt;</span><span style="font-size:12.0000pt;">元素中声明过的过滤器的名字</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;url-pattern&gt;</span><span style="font-size:12.0000pt;">设置</span><span style="font-size:12.0000pt;">&nbsp;filter&nbsp;</span><span style="font-size:12.0000pt;">所拦截的请求路径</span><span style="font-size:12.0000pt;">(</span><span style="font-size:12.0000pt;">过滤器关联的</span><span style="font-size:12.0000pt;">URL</span><span style="font-size:12.0000pt;">样式</span><span style="font-size:12.0000pt;">)</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;servlet-name&gt;</span><span style="font-size:12.0000pt;">指定过滤器所拦截的</span><span style="font-size:12.0000pt;">Servlet</span><span style="font-size:12.0000pt;">名称。</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;dispatcher&gt;</span><span style="font-size:12.0000pt;">指定过滤器所拦截的资源被</span><span style="font-size:12.0000pt;">&nbsp;Servlet&nbsp;</span><span style="font-size:12.0000pt;">容器调用的方式，可以是</span><span style="font-size:12.0000pt;">REQUEST,INCLUDE,FORWARD</span><span style="font-size:12.0000pt;">和</span><span style="font-size:12.0000pt;">ERROR</span><span style="font-size:12.0000pt;">之一，默认</span><span style="font-size:12.0000pt;">REQUEST</span><span style="font-size:12.0000pt;">。用户可以设置多个</span><span style="font-size:12.0000pt;">&lt;dispatcher&gt;&nbsp;</span><span style="font-size:12.0000pt;">子元素用来指定</span><span style="font-size:12.0000pt;">&nbsp;Filter&nbsp;</span><span style="font-size:12.0000pt;">对资源的多种调用方式进行拦截。</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;dispatcher&gt;&nbsp;</span><span style="font-size:12.0000pt;">子元素可以设置的值及其意义：</span></p> 
  <p><span style="font-size:12.0000pt;">REQUEST</span><span style="font-size:12.0000pt;">：当用户直接访问页面时，</span><span style="font-size:12.0000pt;">Web</span><span style="font-size:12.0000pt;">容器将会调用过滤器。如果目标资源是通过</span><span style="font-size:12.0000pt;">RequestDispatcher</span><span style="font-size:12.0000pt;">的</span><span style="font-size:12.0000pt;">include()</span><span style="font-size:12.0000pt;">或</span><span style="font-size:12.0000pt;">forward()</span><span style="font-size:12.0000pt;">方法访问时，那么该过滤器就不会被调用。</span></p> 
  <p><span style="font-size:12.0000pt;">INCLUDE</span><span style="font-size:12.0000pt;">：如果目标资源是通过</span><span style="font-size:12.0000pt;">RequestDispatcher</span><span style="font-size:12.0000pt;">的</span><span style="font-size:12.0000pt;">include()</span><span style="font-size:12.0000pt;">方法访问时，那么该过滤器将被调用。除此之外，该过滤器不会被调用。</span></p> 
  <p><span style="font-size:12.0000pt;">FORWARD</span><span style="font-size:12.0000pt;">：如果目标资源是通过</span><span style="font-size:12.0000pt;">RequestDispatcher</span><span style="font-size:12.0000pt;">的</span><span style="font-size:12.0000pt;">forward()</span><span style="font-size:12.0000pt;">方法访问时，那么该过滤器将被调用，除此之外，该过滤器不会被调用。</span></p> 
  <p><span style="font-size:12.0000pt;">ERROR</span><span style="font-size:12.0000pt;">：如果目标资源是通过声明式异常处理机制调用时，那么该过滤器将被调用。除此之外，过滤器不会被调用。</span></p> 
  <p><span style="font-size:12.0000pt;">Tip：Filter的部署—映射Filter示例：</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;filter-mapping&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;filter-name&gt;testFilter&lt;/filter-name&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;url-pattern&gt;/test.jsp&lt;/url-pattern&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;/filter-mapping&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;filter-mapping&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;filter-name&gt;testFilter&lt;/filter-name&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;url-pattern&gt;/index.jsp&lt;/url-pattern&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&lt;/filter-mapping&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">FilterConfig接口:</span></p> 
  <p><span style="font-size:12.0000pt;">用户在配置</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">时，可以使用</span><span style="font-size:12.0000pt;">&lt;init-param&gt;</span><span style="font-size:12.0000pt;">为</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">配置一些初始化参数，当</span><span style="font-size:12.0000pt;">web</span><span style="font-size:12.0000pt;">容器实例化</span><span style="font-size:12.0000pt;">Filter</span><span style="font-size:12.0000pt;">对象，调用其</span><span style="font-size:12.0000pt;">init</span><span style="font-size:12.0000pt;">方法时，会把封装了</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">初始化参数的</span><span style="font-size:12.0000pt;">filterConfig</span><span style="font-size:12.0000pt;">对象传递进来。因此开发人员在编写</span><span style="font-size:12.0000pt;">filter</span><span style="font-size:12.0000pt;">时，通过</span><span style="font-size:12.0000pt;">filterConfig</span><span style="font-size:12.0000pt;">对象的方法，就可获得：</span></p> 
  <p><span style="font-size:12.0000pt;">String&nbsp;getFilterName()：得到filter的名称。</span></p> 
  <p><span style="font-size:12.0000pt;">String&nbsp;getInitParameter(String&nbsp;name)</span><span style="font-size:12.0000pt;">：返回在部署描述中指定名称的初始化参数的值。如果不存在返回</span><span style="font-size:12.0000pt;">null.</span></p> 
  <p><span style="font-size:12.0000pt;">Enumeration&nbsp;getInitParameterNames()</span><span style="font-size:12.0000pt;">：返回过滤器的所有初始化参数的名字的枚举集合。</span></p> 
  <p><span style="font-size:12.0000pt;">public&nbsp;ServletContext&nbsp;getServletContext()</span><span style="font-size:12.0000pt;">：返回</span><span style="font-size:12.0000pt;">Servlet</span><span style="font-size:12.0000pt;">上下文对象的引用。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">12、</span><span style="color:rgb(255,0,0);font-size:12.0000pt;">AJAX基础</span><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">知识补充：日期和时间</span></p> 
  <p><span style="font-size:12.0000pt;">通常要：将自定义的日期和系统时间连接起来，形成一个</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Date</span><span style="font-size:12.0000pt;">字符串。如果还需要格式化时间，则利用</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">parse</span><span style="font-size:12.0000pt;">函数将标准的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Date</span><span style="font-size:12.0000pt;">字符串转换成</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Date</span><span style="font-size:12.0000pt;">对象，然后就可以交给</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">format</span><span style="font-size:12.0000pt;">来格式化了。方法如下：</span></p> 
  <p><span style="font-family: Consolas; font-size: 11pt;">DateFormat&nbsp;</span><span style="color:rgb(0,0,192);font-size:11.0000pt;">t</span><span style="font-family: Consolas; font-size: 11pt;">=DateFormat.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">getTimeInstance</span><span style="font-family: Consolas; font-size: 11pt;">();</span></p> 
  <p><span style="font-family: 宋体; font-size: 11pt;">String&nbsp;time=</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:11.0000pt;">&nbsp;</span><span style="color:rgb(0,0,192);font-size:11.0000pt;">t</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">.format(</span><span style="color:rgb(0,0,192);font-family:&#39;MS Mincho&#39;;font-size:11.0000pt;">new</span><span style="font-family: 宋体; font-size: 11pt; font-style: italic;">&nbsp;java.util.Date());//<font face="宋体">当前时间</font></span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:11.0000pt;">HH:mm:ss</span><span style="font-family: 宋体; font-size: 11pt; font-style: italic;">样式的，没有毫秒</span></p> 
  <p><span style="font-family: 宋体; font-size: 11pt;">String&nbsp;sDate="</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">2020-11-11</span><span style="font-family: 宋体; font-size: 11pt;">"+"&nbsp;"+time;//<font face="宋体">完整的日期</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 11pt;">DateFormat&nbsp;</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:11.0000pt;">d</span><span style="color:rgb(0,0,192);font-size:11.0000pt;">t</span><span style="font-family: Consolas; font-size: 11pt;">=DateFormat.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">getDateTimeInstance</span><span style="font-family: Consolas; font-size: 11pt;">();</span><span style="font-family: 宋体; font-size: 11pt;">//<font face="宋体">按默认的完整的</font><font face="Consolas">Date</font><font face="宋体">样式来格式化</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 11pt;">SimpleDateFormat&nbsp;</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:11.0000pt;">sdf</span><span style="font-family: Consolas; font-size: 11pt;">=</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:11.0000pt;font-weight:bold;">new</span><span style="font-family: Consolas; font-size: 11pt;">&nbsp;SimpleDateFormat(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:11.0000pt;">"</span><span style="color:rgb(42,0,255);font-size:11.0000pt;">yyyy<font face="宋体">年</font><font face="Consolas">MM</font><font face="宋体">月</font><font face="Consolas">dd</font><font face="宋体">日&nbsp;</font></span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:11.0000pt;">HH:mm:ss.S"</span><span style="font-family: Consolas; font-size: 11pt;">);</span><span style="font-family: 宋体; font-size: 11pt;">//</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:11.0000pt;">S</span><span style="font-family: 宋体; font-size: 11pt;">为毫秒</span></p> 
  <p><span style="color:rgb(0,0,192);font-family:Consolas;font-size:11.0000pt;">sdf</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">.format(</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:11.0000pt;">d</span><span style="color:rgb(0,0,192);font-size:11.0000pt;">t</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">.parse(</span><span style="font-family: 宋体; font-size: 11pt;">sDate</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">))</span><span style="font-family: Consolas; font-size: 11pt;">;</span><span style="font-family: 宋体; font-size: 11pt;">//<font face="宋体">通过</font></span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:11.0000pt;">df</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">.parse(</span><span style="font-family: 宋体; font-size: 11pt;">sDate</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic;">)</span><span style="font-family: 宋体; font-size: 11pt; font-style: italic;">将得到一个<font face="Consolas">Date</font><font face="宋体">实例</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">二、设计模式基础<font face="Times New Roman">(</font><font face="宋体">略</font><font face="Times New Roman">)</font></span><span style="font-size:12.0000pt;">1<font face="宋体">、</font><font face="Times New Roman">DAO</font></span><span style="font-size:12.0000pt;">2<font face="宋体">、</font><font face="Times New Roman">MVC</font><font face="宋体">简介之</font><font face="Times New Roman">Model&nbsp;1</font><font face="宋体">和</font><font face="Times New Roman">Model&nbsp;2</font></span><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">==========<font face="宋体">知识补充</font><font face="Times New Roman">============</font></span></p> 
  <p><span style="font-size:12.0000pt;">连接数据库的基本步骤：</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">1.&nbsp;<font face="宋体">加载数据库驱动（</font><font face="Times New Roman">D</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">river</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">），例如</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">com.mysql.jdbc.Driver</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">2.&nbsp;<font face="宋体">连接数据库的</font><font face="Times New Roman">url</font><font face="宋体">，例如</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">jdbc:mysql://localhost</span><span style="font-size:12.0000pt;">:3306</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">/javaweb</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">把返回的对象赋值给一个<font face="Times New Roman">Connection</font><font face="宋体">对象（通常命名为</font><font face="Times New Roman">conn</font><font face="宋体">）</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">连接后就可以使用数据库了，使用的基本步骤为</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">1.&nbsp;<font face="宋体">创建语句对象（</font><font face="Times New Roman">Statement</font><font face="宋体">），例如</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">Statement&nbsp;stmt&nbsp;=&nbsp;conn.createStatement();</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">注意右边的<font face="Times New Roman">conn</font><font face="宋体">就是连接</font><font face="Times New Roman">url</font><font face="宋体">时返回的</font><font face="Times New Roman">Connection</font><font face="宋体">对象</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">2.&nbsp;<font face="宋体">调用语句对象的方法来对数据库进行操作，例如</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">stmt.exeuteUpdate("SQL<font face="宋体">语句</font><font face="Times New Roman">");</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">==============================</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">三、<font face="Times New Roman">Struts&nbsp;2</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">1.<font face="宋体">上面已经介绍了</font><font face="Times New Roman">Struts</font><font face="宋体">，它主要是充当控制器（</font><font face="Times New Roman">Controller</font><font face="宋体">）的作用，同时也给</font><font face="Times New Roman">V</font><font face="宋体">端提供了许多标签，这些标签能够和</font><font face="Times New Roman">AJAX</font><font face="宋体">结合起来。</font></span></p> 
  <p><span style="font-size:12.0000pt;">2.<font face="宋体">要使用</font><font face="Times New Roman">Struts&nbsp;2</font><font face="宋体">，需要把相关的</font><font face="Times New Roman">jar</font><font face="宋体">文件拷贝到</font><font face="Times New Roman">WEB-INF/lib</font><font face="宋体">目录下，并在</font><font face="Times New Roman">web.xml</font><font face="宋体">配置文件中配置</font><font face="Times New Roman">Filter</font><font face="宋体">（过滤器）。</font></span></p> 
  <p><span style="font-size:12.0000pt;">3.&nbsp;Filter<font face="宋体">配置好后，就可以使用</font><font face="Times New Roman">Struts&nbsp;2</font><font face="宋体">了，为控制层配置</font><font face="Times New Roman">Action&nbsp;</font><font face="宋体">处理结果和视图文件之间的映射，配置文件为</font><font face="Times New Roman">src/struts.xml</font><font face="宋体">。示例如下：</font></span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;?</span><span style="color:rgb(63,127,127);font-family:Consolas;">xml</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">version</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"1.0"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">encoding</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"UTF-8"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;">?&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;!</span><span style="color:rgb(63,127,127);font-family:Consolas;">DOCTYPE</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;">struts</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(128,128,128);font-family:Consolas;">PUBLIC</span></p> 
  <p><span style="font-family:Consolas;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;">"-//Apache&nbsp;Software&nbsp;Foundation//DTD&nbsp;Struts&nbsp;Configuration&nbsp;2.0//EN"</span></p> 
  <p><span style="font-family:Consolas;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(63,127,95);font-family:Consolas;">"http://struts.apache.org/dtds/struts-2.0.dtd"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;struts</span><span style="color:rgb(63,95,191);">为</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">配置文件根元素</span><span style="color:rgb(63,95,191);font-family:Consolas;">--&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">struts</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">constant</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"struts.i18n.encoding"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">value</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"gb2312"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">constant</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="">&nbsp;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;Action<font face="MS Mincho">必</font></span><span style="color:rgb(63,95,191);">须</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">放在指定的包名空</span><span style="color:rgb(63,95,191);">间</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">中</span><span style="color:rgb(63,95,191);font-family:Consolas;">--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">package</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"struts2"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">extends</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"struts-default"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">action</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"showAll"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">class</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"showAllAction"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义处</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">理</span><span style="color:rgb(63,95,191);">结</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">果与</span><span style="color:rgb(63,95,191);">视图资</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">源之</span><span style="color:rgb(63,95,191);">间</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">的关系</span><span style="color:rgb(63,95,191);font-family:Consolas;">--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"success"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">/showAll.jsp</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">action</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">action</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"delete"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">class</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"deleteAction"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义处</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">理</span><span style="color:rgb(63,95,191);">结</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">果与</span><span style="color:rgb(63,95,191);">视图资</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">源之</span><span style="color:rgb(63,95,191);">间</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">的关系</span><span style="color:rgb(63,95,191);font-family:Consolas;">--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"success"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">type</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"redirect"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">/showAll.action</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">action</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">action</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"add"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">class</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"addAction"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义处</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">理</span><span style="color:rgb(63,95,191);">结</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">果与</span><span style="color:rgb(63,95,191);">视图资</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">源之</span><span style="color:rgb(63,95,191);">间</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">的关系</span><span style="color:rgb(63,95,191);font-family:Consolas;">--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"success"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">type</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"redirect"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">/showAll.action</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"input"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">/add.jsp</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"error"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">/add.jsp</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">result</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">action</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">package</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">struts</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Struts&nbsp;2<font face="宋体">的高级功能</font></span></p> 
  <p><span style="font-size:12.0000pt;">1.<font face="宋体">国际化</font></span></p> 
  <p><span style="font-size:12.0000pt;">新建<font face="Times New Roman">src\</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">myMessage_zh_CN.properties</span><span style="font-size:12.0000pt;">文件，内容示例如下：</span></p> 
  <p><span style="color:rgb(63,95,191);">#Generated&nbsp;by&nbsp;ResourceBundle&nbsp;Editor&nbsp;(http://eclipse-rbe.sourceforge.net)</span></p> 
  <p><span style="color:rgb(63,127,127);font-family:Consolas;">age.rule</span><span style="font-size:12.0000pt;">&nbsp;=&nbsp;\u5E74\u9F84\u5FC5\u987B\u5728${min}\u81F3${max}\u4E4B\u95F4</span></p> 
  <p><span style="color:rgb(63,127,127);font-family:Consolas;">password.required</span><span style="font-size:12.0000pt;">&nbsp;=&nbsp;\u5FC5\u987B\u8F93\u5165\u5BC6\u7801</span></p> 
  <p><span style="font-size:12.0000pt;">可以用<font face="Times New Roman">Eclipse</font><font face="宋体">来生成该文件。名字的前面部分</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">myMessage</span><span style="font-size:12.0000pt;">由自己随便取。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">然后在<font face="Times New Roman">src\</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">struts.xml</span><span style="font-size:12.0000pt;">中添加如下一行即可：</span></p> 
  <p><span style="color:rgb(63,127,127);font-family:Consolas;">&lt;constant</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"struts.custom.i18n.resources"</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">value</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"myMessage"</span><span style="color:rgb(63,127,127);font-family:Consolas;">&gt;&lt;/constant&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">2.<font face="宋体">服务器端校验</font></span></p> 
  <p><span style="font-size:12.0000pt;">只需要在<font face="Times New Roman">ActionName.java</font><font face="宋体">文件目录下，加入</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Action</span><span style="font-size:12.0000pt;">Name</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">-validation.xml</span><span style="font-size:12.0000pt;">文件，<font face="Times New Roman">xml</font><font face="宋体">文件的</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Action</span><span style="font-size:12.0000pt;">Name<font face="宋体">必须和</font><font face="Times New Roman">java</font><font face="宋体">文件的</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Action</span><span style="font-size:12.0000pt;">Name<font face="宋体">相同。例如注册页面的校验，有如下几个文件：</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">WebRoot</span><span style="font-size:12.0000pt;">\register.jsp<font face="宋体">，其中的提交表单</font><font face="Times New Roman">action="register"</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">src\</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">struts.xml</span><span style="font-size:12.0000pt;">，在里面把表单的<font face="Times New Roman">action="register"</font><font face="宋体">定向到</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">RegisterAction.java</span><span style="font-size:12.0000pt;">文件</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">src\com\javaweb\</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">RegisterAction.java</span><span style="font-size:12.0000pt;">，里面定义了<font face="Times New Roman">name</font><font face="宋体">、</font><font face="Times New Roman">age</font><font face="宋体">等属性及</font><font face="Times New Roman">get/set</font><font face="宋体">方法</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">src\com\javaweb\</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;RegisterAction-validation.xml</span><span style="font-size:12.0000pt;">校验对应<font face="Times New Roman">java</font><font face="宋体">文件中的属性</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">四、<font face="Times New Roman">Hibernate</font><font face="宋体">及</font><font face="Times New Roman">Hibernate</font><font face="宋体">与&nbsp;</font><font face="Times New Roman">Struts&nbsp;2&nbsp;</font><font face="宋体">的整合</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Hibernate<font face="宋体">的主要作用是操作数据库的，一方面方便建立数据库的连接，另一方面把关系数据映射成面向对象的数据，通过</font><font face="Times New Roman">HQL</font><font face="宋体">来操作数据库的增删查改。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">首先把<font face="Times New Roman">Hibernate</font><font face="宋体">需要的</font><font face="Times New Roman">jar</font><font face="宋体">文件</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">hibernate3.jar</span><span style="font-size:12.0000pt;">拷贝到<font face="Times New Roman">WEB-INF/lib</font><font face="宋体">目录下。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">然后配置<font face="Times New Roman">Hibernate</font><font face="宋体">，使其能够连接数据库。在没有使用</font><font face="Times New Roman">Spring</font><font face="宋体">框架时，</font><font face="Times New Roman">Hibernate</font><font face="宋体">的配置文件就放在</font><font face="Times New Roman">/src</font><font face="宋体">文件夹下，命名为</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">hibernate.cfg.xml</span><span style="font-size:12.0000pt;">，内容示例如下：</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;!</span><span style="color:rgb(63,127,127);font-family:Consolas;">DOCTYPE</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;">hibernate-configuration</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(128,128,128);font-family:Consolas;">PUBLIC</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">"-//Hibernate/Hibernate&nbsp;Configuration&nbsp;DTD&nbsp;3.0//EN"</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">hibernate-configuration</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">session-factory</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">数据</font></span><span style="color:rgb(63,95,191);">库连</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">接</span><span style="color:rgb(63,95,191);font-family:Consolas;">URL&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"connection.url"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">jdbc:mysql://localhost/javaweb</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">数据</font></span><span style="color:rgb(63,95,191);">库连</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">接</span><span style="color:rgb(63,95,191);">驱动</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"connection.driver_class"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">com.mysql.jdbc.Driver</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">数据</font></span><span style="color:rgb(63,95,191);">库</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">用</span><span style="color:rgb(63,95,191);">户</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">名</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"connection.username"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">root</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">数据</font></span><span style="color:rgb(63,95,191);">库</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">用</span><span style="color:rgb(63,95,191);">户</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">密</span><span style="color:rgb(63,95,191);">码</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"connection.password"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">admin</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">数据</font></span><span style="color:rgb(63,95,191);">库</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">方言</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"dialect"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">org.hibernate.dialect.MySQLDialect</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">指定映射文件&nbsp;</font><font face="Consolas">--&gt;</font></span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">mapping</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">resource</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"com/javaweb/po/Product.hbm.xml"</span><span style="color:rgb(0,128,128);font-family:Consolas;">/&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">session-factory</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">hibernate-configuration</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">如果使用了<font face="Times New Roman">Spring</font><font face="宋体">框架，则不需要这个文件，直接交由</font><font face="Times New Roman">Spring</font><font face="宋体">托管，在</font><font face="Times New Roman">Spring</font><font face="宋体">的配置文件</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">\WebRoot\WEB-INF</span><span style="font-size:12.0000pt;">\</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">applicationContext.xml</span><span style="font-size:12.0000pt;">中配置类似的内容。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">配置好后，就可以使用了。假如有一个数据文件<font face="Times New Roman">User.java</font><font face="宋体">，里面定义</font><font face="Times New Roman">id</font><font face="宋体">，</font><font face="Times New Roman">name</font><font face="宋体">等数据，这时要把这些数据映射成面向对象的，只需要在</font><font face="Times New Roman">User.java</font><font face="宋体">的同级目录下建立一个</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">User.hbm.xml</span><span style="font-size:12.0000pt;">文件，内容示例如下：</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;?</span><span style="color:rgb(63,127,127);font-family:Consolas;">xml</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">version</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"1.0"</span><span style="color:rgb(0,128,128);font-family:Consolas;">?&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;!</span><span style="color:rgb(63,127,127);font-family:Consolas;">DOCTYPE</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;">hibernate-mapping</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(128,128,128);font-family:Consolas;">PUBLIC</span><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">"-//Hibernate/Hibernate&nbsp;Mapping&nbsp;DTD&nbsp;3.0//EN"</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">hibernate-mapping</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">每个</font><font face="Consolas">class</font></span><span style="color:rgb(63,95,191);">对应</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">一个持久化</span><span style="color:rgb(63,95,191);">对</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">象</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">class</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"com.javaweb.po.User"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;id<font face="MS Mincho">元素用来定</font></span><span style="color:rgb(63,95,191);">义</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">主</span><span style="color:rgb(63,95,191);">键标识</span><span style="color:rgb(63,95,191);font-family:Consolas;">,<font face="MS Mincho">并指定主</font></span><span style="color:rgb(63,95,191);">键</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">自</span><span style="color:rgb(63,95,191);">动递</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">增</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">id</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"id"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">generator</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">class</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"identity"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">generator</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">id</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">其他属性</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"username"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"password"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"age"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">type</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"int"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"birth"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">type</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"date"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">name</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"email"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">class</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">hibernate-mapping</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">此时配置便完成了，在其他<font face="Times New Roman">java</font><font face="宋体">文件中引入相应的</font><font face="Times New Roman">H</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ibernate</span><span style="font-size:12.0000pt;">类文件，就可以以面向对象的方式使用数据了。例如，通常引用到的为</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;org.hibernate.Session;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;org.hibernate.SessionFactory;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;org.hibernate.cfg.Configuration;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;org.hibernate.Query;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;org.hibernate.Session;</span></p> 
  <p><span style="font-size:12.0000pt;">等等，非常多，而如果每个<font face="Times New Roman">java</font><font face="宋体">文件都要引用的话就显得非常累赘，所以通常把一些基础数据库操作封装在</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">HibernateUtil.java</span><span style="font-size:12.0000pt;">文件中。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">如果使用了<font face="Times New Roman">Spring</font><font face="宋体">框架，则不需要引入这么多文件，在</font><font face="Times New Roman">Spring</font><font face="宋体">框架中，直接使用</font><font face="Times New Roman">dao</font><font face="宋体">文件就可以了，在</font><font face="Times New Roman">dao</font><font face="宋体">文件中引入如下</font><font face="Times New Roman">S</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">pring</span><span style="font-size:12.0000pt;">的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">hibernate3.suppor</span><span style="font-size:12.0000pt;">.</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">HibernateDaoSupport</span><span style="font-size:12.0000pt;">即可：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;org.springframework.orm.hibernate3.support.HibernateDaoSupport;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Hibernate<font face="宋体">与&nbsp;</font><font face="Times New Roman">Struts&nbsp;2&nbsp;</font><font face="宋体">的整合其实没什么可讲的，就是简单的把两个的功能叠加在一起，类似于</font><font face="Times New Roman">1+1=2</font><font face="宋体">。</font><font face="Times New Roman">Hibernate</font><font face="宋体">负责</font><font face="Times New Roman">DAO</font><font face="宋体">操作，</font><font face="Times New Roman">DAO</font><font face="宋体">通常分为</font><font face="Times New Roman">3</font><font face="宋体">个部分，</font><font face="Times New Roman">DAO</font><font face="宋体">接口，</font><font face="Times New Roman">DAO</font><font face="宋体">实现类，</font><font face="Times New Roman">DAO</font><font face="宋体">工厂类，接口就是声明一些方法，例如</font><font face="Times New Roman">delete</font><font face="宋体">，实现类利用</font><font face="Times New Roman">Hibernate</font><font face="宋体">的方式去实现这个方法，而工厂类就是简单的</font><font face="Times New Roman">new</font><font face="宋体">一个实现类再返回，工厂类示例如下：</font></span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">package</span><span style="font-family: Consolas;">&nbsp;com.javaweb.factory;</span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">import</span><span style="font-family: Consolas;">&nbsp;com.javaweb.dao.ProductDao;</span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">import</span><span style="font-family: Consolas;">&nbsp;com.javaweb.dao.ProductDaoImpl;</span></p> 
  <p><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">public</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">class</span><span style="font-family: Consolas;">&nbsp;DaoFactory&nbsp;{</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">public</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">static</span><span style="font-family: Consolas;">&nbsp;ProductDao&nbsp;getDaoInstance(){</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">return</span><span style="font-family: Consolas;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-weight:bold;">new</span><span style="font-family: Consolas;">&nbsp;ProductDaoImpl();</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">}</span></p> 
  <p><span style="font-family: Consolas;">}</span></p> 
  <p><span style="font-size:12.0000pt;">仅在有很多个<font face="Times New Roman">DAO</font><font face="宋体">的实现类时才能体现工厂类的作用，因为工厂类把这些实现类都封装在了一个</font><font face="Times New Roman">DaoFactory</font><font face="宋体">类里面，只需要调用不同的方法即可</font><font face="Times New Roman">new</font><font face="宋体">一个不同的实现类。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">五、<font face="Times New Roman">Spring</font><font face="宋体">及</font><font face="Times New Roman">Spring</font><font face="宋体">与&nbsp;</font><font face="Times New Roman">Struts&nbsp;2&nbsp;</font><font face="宋体">的整合</font><font face="Times New Roman">(</font><font face="宋体">略</font><font face="Times New Roman">)</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Spring<font face="宋体">可以用来管理前端的业务控制器，中间的业务逻辑组件，以及底层的</font><font face="Times New Roman">DAO</font><font face="宋体">组件，方便集成各组件，而且可以大大的降低各组件之间的耦合度。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Spring<font face="宋体">有如下几个流行的应用：</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Ioc(Inversion&nbsp;of&nbsp;Control<font face="宋体">，控制反转</font><font face="Times New Roman">)</font><font face="宋体">，又称为</font><font face="Times New Roman">DI</font><font face="宋体">（依赖注入），值的依赖注入和自动装配；</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">AOP<font face="宋体">（面向切面编程），例如前置通知、后置通知；</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">持久层的封装和事务管理，包括对<font face="Times New Roman">JDBC</font><font face="宋体">的使用加以封装以及对各种</font><font face="Times New Roman">O/R</font><font face="宋体">映射工具的整合；</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">首先要理解这几个术语，什么是<font face="Times New Roman">IoC</font><font face="宋体">、</font><font face="Times New Roman">DI</font><font face="宋体">？</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">IoC<font face="宋体">又称为</font><font face="Times New Roman">DI</font><font face="宋体">，因为实质是一样的。比如在</font><font face="Times New Roman">A</font><font face="宋体">类的某个方法中新建了一个</font><font face="Times New Roman">B</font><font face="宋体">类的实例，并调用</font><font face="Times New Roman">B</font><font face="宋体">类的方法，则称</font><font face="Times New Roman">A</font><font face="宋体">类依赖于</font><font face="Times New Roman">B</font><font face="宋体">类，当</font><font face="Times New Roman">B</font><font face="宋体">类中的方法修改时，</font><font face="Times New Roman">A</font><font face="宋体">类中的调用代码也需要修改。如果要让两者之间低耦合度，可以将在</font><font face="Times New Roman">A</font><font face="宋体">类中生成</font><font face="Times New Roman">B</font><font face="宋体">类的实例的工作由第三方来完成，比如</font><font face="Times New Roman">Spring</font><font face="宋体">的</font><font face="Times New Roman">Bean</font><font face="宋体">容器。</font><font face="Times New Roman">Spring</font><font face="宋体">通过配置文件，生成</font><font face="Times New Roman">B</font><font face="宋体">类的实例，然后再注入到</font><font face="Times New Roman">A</font><font face="宋体">类中，这样</font><font face="Times New Roman">A</font><font face="宋体">类就可以使用了，因此称为依赖注入，然而本来这种信赖关系是</font><font face="Times New Roman">A</font><font face="宋体">类来建立的，现在却由</font><font face="Times New Roman">Spring</font><font face="宋体">的</font><font face="Times New Roman">bean</font><font face="宋体">来管理了，因此又称为控制反转。</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">例如有<font face="Times New Roman">Person</font><font face="宋体">接口和</font><font face="Times New Roman">Student</font><font face="宋体">类，使用</font><font face="Times New Roman">Student</font><font face="宋体">类时我们可以每次都</font><font face="Times New Roman">new</font><font face="宋体">一个</font><font face="Times New Roman">Student</font><font face="宋体">，或者我们把</font><font face="Times New Roman">new&nbsp;Student()</font><font face="宋体">放到工厂类中，调用工厂类的方法</font><font face="Times New Roman">Factory.getStudent()</font><font face="宋体">如果修改了</font><font face="Times New Roman">Person</font><font face="宋体">接口中的方法，那就得修改</font><font face="Times New Roman">Student</font><font face="宋体">类的方法，、工厂类</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">每次调用<font face="Times New Roman">Student</font><font face="宋体">类时都要继承</font><font face="Times New Roman">Person</font><font face="宋体">接口，</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:16.0000pt;font-weight:bold;">六、Spring&nbsp;+&nbsp;Struts&nbsp;2&nbsp;+&nbsp;Hibernate整合开发</span></p> 
  <p><span style="font-size:12.0000pt;">1.<font face="宋体">搭建</font><font face="Times New Roman">S2SH</font><font face="宋体">环境</font></span></p> 
  <p><span style="font-size:12.0000pt;">首先</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">1.<font face="宋体">把</font><font face="Times New Roman">Struts&nbsp;2</font><font face="宋体">的</font><font face="Times New Roman">5</font><font face="宋体">个核心</font><font face="Times New Roman">jar</font><font face="宋体">文件加入到</font><font face="Times New Roman">WEB-INF/lib</font><font face="宋体">目录下，分别是</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">commons-logging-<font face="宋体">版本号</font><font face="Times New Roman">.jar</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">freemarker-<font face="宋体">版本号</font><font face="Times New Roman">.jar</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">ognl-<font face="宋体">版本号</font><font face="Times New Roman">.jar</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">struts2-core-<font face="宋体">版本号</font><font face="Times New Roman">.jar</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">xwork-<font face="宋体">版本号</font><font face="Times New Roman">.jar</font><font face="宋体">（有可能是</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">xwork-core-</span><span style="font-size:12.0000pt;">版本号</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">.jar</span><span style="font-size:12.0000pt;">）</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">另外，再加入<font face="Times New Roman">Struts&nbsp;2</font><font face="宋体">的</font><font face="Times New Roman">Spring</font><font face="宋体">插件，如下</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">struts2-spring-plugin-</span><span style="font-size:12.0000pt;">版本号</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">.jar</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">2.<font face="宋体">把</font><font face="Times New Roman">Spring</font><font face="宋体">的核心</font><font face="Times New Roman">jar</font><font face="宋体">文件加入到</font><font face="Times New Roman">WEB-INF&nbsp;/lib</font><font face="宋体">目录下，只有一个</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">spring.jar</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">3.&nbsp;<font face="宋体">把</font><font face="Times New Roman">Hibernate</font><font face="宋体">的核心</font><font face="Times New Roman">jar</font><font face="宋体">文件加入到</font><font face="Times New Roman">WEB-INF&nbsp;/lib</font><font face="宋体">目录下，只有一个</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">hibernate3.jar<font face="宋体">（</font><font face="Times New Roman">3</font><font face="宋体">是版本号）</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">4.<font face="宋体">数据库驱动</font><font face="Times New Roman">jar</font><font face="宋体">文件，如果是用</font><font face="Times New Roman">MySQL</font><font face="宋体">数据库，则为</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">mysql-connector-java-</span><span style="font-size:12.0000pt;">版本号</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">-bin.jar</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">5.&nbsp;<font face="宋体">其他，根据需要，加入其他</font><font face="Times New Roman">jar</font><font face="宋体">文件</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">其次</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">配置<font face="Times New Roman">WEB-INF&nbsp;/web.xml</font><font face="宋体">文件，使</font><font face="Times New Roman">S</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">truts</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">2</span><span style="font-size:12.0000pt;">和<font face="Times New Roman">Spring</font><font face="宋体">生效</font></span></p> 
  <p><span style="font-size:12.0000pt;">配置文件，示例如下</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;?</span><span style="color:rgb(63,127,127);font-family:Consolas;">xml</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">version</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"1.0"</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">encoding</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"UTF-8"</span><span style="color:rgb(0,128,128);font-family:Consolas;">?&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">web-app</span><span style="font-family:Consolas;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;">version</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"3.0"</span><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(127,0,127);font-family:Consolas;">xmlns</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"http://java.sun.com/xml/ns/javaee"</span><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(127,0,127);font-family:Consolas;">xmlns:xsi</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"http://www.w3.org/2001/XMLSchema-instance"</span><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="font-family:Consolas;"> </span><span style="color:rgb(127,0,127);font-family:Consolas;">xsi:schemaLocation</span><span style="font-family: Consolas;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">"http://java.sun.com/xml/ns/javaee&nbsp;</span></p> 
  <p><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;"> </span><span style="color:rgb(42,0,255);font-family:Consolas;font-style:italic;">http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">核心</span><span style="color:rgb(63,95,191);font-family:Consolas;">Filter&nbsp;FilterDispatcher&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">核心</span><span style="color:rgb(63,95,191);font-family:Consolas;">Filter<font face="MS Mincho">的名称&nbsp;</font><font face="Consolas">--&gt;</font></span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-name</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">struts2</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-name</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--<font face="MS Mincho">定</font></span><span style="color:rgb(63,95,191);">义</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">核心</span><span style="color:rgb(63,95,191);font-family:Consolas;">Filter<font face="MS Mincho">的</font></span><span style="color:rgb(63,95,191);">实现类</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-class</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">org.apache.struts2.dispatcher.FilterDispatcher</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-class</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family:Consolas;">&nbsp;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-mapping</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--<font face="MS Mincho">核心</font><font face="Consolas">Filter</font><font face="MS Mincho">的名称&nbsp;</font><font face="Consolas">--&gt;</font></span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-name</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">struts2</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-name</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--<font face="MS Mincho">使用</font></span><span style="color:rgb(63,95,191);">该</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">核心</span><span style="color:rgb(63,95,191);font-family:Consolas;">Filter<font face="MS Mincho">来接受所有的</font><font face="Consolas">Web</font></span><span style="color:rgb(63,95,191);">请</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;">求</span><span style="color:rgb(63,95,191);font-family:Consolas;">&nbsp;--&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">url-pattern</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span><span style="font-family: Consolas;">/*</span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">url-pattern</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">filter-mapping</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(63,95,191);font-family:Consolas;">&lt;!--&nbsp;<font face="MS Mincho">初始化</font><font face="Consolas">Spring</font><font face="MS Mincho">容器&nbsp;</font><font face="Consolas">--&gt;</font></span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">listener</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;">listener-class</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;">org.springframework.web.context.ContextLoaderListener</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">listener-class</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-family: Consolas;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">listener</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;">web-app</span><span style="color:rgb(0,128,128);font-family:Consolas;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">跳转到<font face="Times New Roman">action</font><font face="宋体">的方法：</font></span></p> 
  <p><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">result</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">type</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"redirectAction"</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">param</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">name</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"actionName"</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span><span style="font-family: 黑体; font-size: 14pt;">showpicsya</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">param</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="font-family: 黑体; font-size: 14pt;"> </span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">result</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:15.0000pt;font-weight:bold;">Tomcat配置</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">会话超时时间：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">\conf</span><span style="font-size:12.0000pt;">\web.xml</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;session-config&gt;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;session-timeout&gt;-1&lt;/session-timeout&gt;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/session-config&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">URL<font face="宋体">中文支持</font><font face="Times New Roman">:</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">\conf</span><span style="font-size:12.0000pt;">\server.xml</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;Connector&nbsp;port="8080"&nbsp;protocol="HTTP/1.1"</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectionTimeout="20000"</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirectPort="8443"&nbsp;/&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">加入：</span><span style="color:rgb(255,0,0);font-size:12.0000pt;">URIEncoding="utf-8"</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:16.0000pt;font-weight:bold;">CKFinder破解</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">CKEditor<font face="宋体">图片预览文字</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">\ckeditor\plugins\image\dialogs</span><span style="font-size:12.0000pt;">\</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">image.js</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">初始化：</span></p> 
  <p><span style="color:rgb(191,95,63);font-family:黑体;font-size:14.0000pt;">&lt;%@</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">taglib</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">uri</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"http://ckeditor.com"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">prefix</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"ckeditor"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(191,95,63);font-family:黑体;font-size:14.0000pt;">%&gt;</span></p> 
  <p><span style="color:rgb(191,95,63);font-family:黑体;font-size:14.0000pt;">&lt;%@</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">taglib</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">uri</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"http://ckfinder.com"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">prefix</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"ckfinder"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(191,95,63);font-family:黑体;font-size:14.0000pt;">%&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">&lt;!--&nbsp;</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">整合</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">CKFinder</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">和</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">CKEditor&nbsp;--&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">ckfinder:setupCKEditor</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">basePath</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"/zollty/CKFinderJava/userfiles/"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">editor</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"editor1"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">ckeditor:replace</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">replace</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"editor1"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">basePath</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"/zollty/CKFinderJava/userfiles/"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">方法二：</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="background-color:rgb(192,192,192);color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">script</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">type</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"text/javascript"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">src</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"/zollty/ckeditor/ckeditor.js"</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;&lt;/</span><span style="background-color:rgb(192,192,192);color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">script</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">script</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">type</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"text/javascript"</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">src</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"/zollty/ckfinder/ckfinder.js"</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">script</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">&lt;!--&nbsp;</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">整合</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">CKFinder</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">和</span><span style="color:rgb(63,95,191);font-family:黑体;font-size:14.0000pt;">CKEditor&nbsp;--&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">script</span><span style="font-family:黑体;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:黑体;font-size:14.0000pt;">type</span><span style="font-family: 黑体; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:黑体;font-size:14.0000pt;font-style:italic;">"text/javascript"</span><span style="color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="background-color:rgb(255,255,255);color:rgb(127,0,85);font-family:黑体;font-size:14.0000pt;font-weight:bold;"> </span><span style="background-color:rgb(255,255,255);color:rgb(127,0,85);font-family:黑体;font-size:14.0000pt;font-weight:bold;">var&nbsp;</span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">editor&nbsp;=&nbsp;CKEDITOR.replace(&nbsp;</span><span style="background-color:rgb(255,255,255);font-family:黑体;font-size:14.0000pt;">'editor1'</span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">,</span></p> 
  <p><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;"> </span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">{</span></p> 
  <p><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;"> </span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;"> </span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">toolbar&nbsp;:&nbsp;</span><span style="background-color:rgb(255,255,255);font-family:黑体;font-size:14.0000pt;">'Basic'</span></p> 
  <p><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;"> </span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">});</span></p> 
  <p><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;"> </span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">CKFinder.SetupCKEditor(&nbsp;editor,&nbsp;</span><span style="background-color:rgb(255,255,255);font-family:黑体;font-size:14.0000pt;">'/zollty/CKFinderJava/userfiles/'</span><span style="background-color: rgb(255, 255, 255); font-family: 黑体; font-size: 14pt;">&nbsp;);</span></p> 
  <p><span style="background-color:rgb(255,255,255);color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&lt;/</span><span style="background-color:rgb(255,255,255);color:rgb(63,127,127);font-family:黑体;font-size:14.0000pt;">script</span><span style="background-color:rgb(255,255,255);color:rgb(0,128,128);font-family:黑体;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">DateUtil.DateToString(user.getBirthday(),"yyyy-MM-dd");</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;java.text.DateFormat;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;java.text.SimpleDateFormat;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">import&nbsp;java.util.Date;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">public&nbsp;class&nbsp;DateUtil&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">public&nbsp;static&nbsp;Date&nbsp;StringToDate(String&nbsp;dateString,String&nbsp;formatString){</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">try&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">DateFormat&nbsp;fm&nbsp;=&nbsp;new&nbsp;SimpleDateFormat(formatString);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Date&nbsp;date&nbsp;=&nbsp;null;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">try&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">date&nbsp;=&nbsp;fm.parse(dateString);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}&nbsp;catch&nbsp;(java.text.ParseException&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">//&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">//e.printStackTrace();</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">return&nbsp;null;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}&nbsp;//&nbsp;Thu&nbsp;Jan&nbsp;18&nbsp;00:00:00&nbsp;CST&nbsp;2007</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">return&nbsp;date;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">//&nbsp;TODO:&nbsp;handle&nbsp;exception</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">return&nbsp;null;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">public&nbsp;static&nbsp;String&nbsp;DateToString(Date&nbsp;date,String&nbsp;formatString){</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">try&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">DateFormat&nbsp;fm&nbsp;=&nbsp;new&nbsp;SimpleDateFormat(formatString);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">String&nbsp;str&nbsp;=&nbsp;new&nbsp;String();</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">str&nbsp;=&nbsp;fm.format(date);&nbsp;&nbsp;&nbsp;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">return&nbsp;str;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">//&nbsp;TODO:&nbsp;handle&nbsp;exception</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">return&nbsp;null;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">}</span></p> 
  <p><span style="font-size:12.0000pt;">}</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:15.0000pt;font-weight:bold;">JSP国际化</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">在<font face="Times New Roman">src</font><font face="宋体">目录下建立</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ApplicationResources.properties</span><span style="font-size:12.0000pt;">文件，内容如下：</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">title=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;">\u7528\u6237\u6CE8\u518C</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">welcome=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;">\u6B22\u8FCE\u767B\u5F55\uFF01</span></p> 
  <p><span style="font-size:12.0000pt;">再建一些形如</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ApplicationResources_cn.properties</span><span style="font-size:12.0000pt;">的文件<font face="Times New Roman">,cn</font><font face="宋体">代表中国，例如</font><font face="Times New Roman">de</font><font face="宋体">则代表德国</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">在<font face="Times New Roman">jsp</font><font face="宋体">中引入：</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&lt;%@&nbsp;taglib&nbsp;prefix="fmt"&nbsp;uri="http://java.sun.com/jsp/jstl/fmt"&nbsp;%&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">再设置：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&lt;fmt:setBundle&nbsp;basename="ApplicationResources"&nbsp;scope="session"/&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">就可实现本地化了，例如打印上面文件中的<font face="Times New Roman">title</font><font face="宋体">的内容：</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&lt;fmt:message&nbsp;key="title"&gt;&lt;/fmt:message&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">改变浏览器的语言环境即可显示不同国家的效果。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:15.0000pt;font-weight:bold;">JDBC用配置文件连接数据库</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">配置文件为：<font face="Times New Roman">s</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">rc/db.properties</span><span style="font-size:12.0000pt;">，其内容如下</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">driver_class=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">com.mysql.jdbc.Driver</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">url=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">jdbc\:mysql\://localhost\:3306/user</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">username=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">root</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">password=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">a123456</span></p> 
  <p><span style="">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">下面是连接数据库的程序：</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">public</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">static</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;Connection&nbsp;getConnection(){</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">Connection&nbsp;connection&nbsp;=&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">null</span><span style="font-family: Consolas; font-size: 10.5pt;">;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">try</span><span style="font-family: Consolas; font-size: 10.5pt;">{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">Properties&nbsp;properties&nbsp;=&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt; font-style: italic;">getProperties</span><span style="font-family: Consolas; font-size: 10.5pt;">();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">driver_class</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;=&nbsp;properties.getProperty(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">"driver_class"</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">url</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;=&nbsp;properties.getProperty(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">"url"</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">username</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;=&nbsp;properties.getProperty(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">"username"</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">password</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;=&nbsp;properties.getProperty(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">"password"</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">Class.</span><span style="font-family: Consolas; font-size: 10.5pt; font-style: italic;">forName</span><span style="font-family: Consolas; font-size: 10.5pt;">(</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">driver_class</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">connection&nbsp;=&nbsp;DriverManager.</span><span style="font-family: Consolas; font-size: 10.5pt; font-style: italic;">getConnection</span><span style="font-family: Consolas; font-size: 10.5pt;">(</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">url</span><span style="font-family: Consolas; font-size: 10.5pt;">,</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">username</span><span style="font-family: Consolas; font-size: 10.5pt;">,</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">password</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">catch</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(Exception&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">e.printStackTrace();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">return</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;connection;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">public</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">static</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;Properties&nbsp;getProperties(){</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">Properties&nbsp;properties&nbsp;=&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">new</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;Properties();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">try</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">FileInputStream&nbsp;fileInputStream&nbsp;=&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:9.0000pt;font-weight:bold;">new</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;FileInputStream(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;">"src/db.properties"</span><span style="font-family: Consolas; font-size: 9pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">properties.load(fileInputStream);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">String&nbsp;driver_class&nbsp;=&nbsp;properties.getProperty(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;">"driver_class"</span><span style="font-family: Consolas; font-size: 10.5pt;">);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">System.</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">out</span><span style="font-family: Consolas; font-size: 10.5pt;">.println(driver_class);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">catch</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(FileNotFoundException&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">e.printStackTrace();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">catch</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(IOException&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">e.printStackTrace();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">return</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;properties;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-size:10.5000pt;">&nbsp;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">public</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">static</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">void</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;closeConn(Connection&nbsp;conn)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">try</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">if</span><span style="font-family: Consolas; font-size: 10.5pt;">(conn!=</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">null</span><span style="font-family: Consolas; font-size: 10.5pt;">)</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">conn.close();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">catch</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(Exception&nbsp;e)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">e.</span><span style="background-color: rgb(192, 192, 192); font-family: Consolas; font-size: 10.5pt;">printStackTrace</span><span style="font-family: Consolas; font-size: 10.5pt;">();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Hibernate<font face="宋体">的配置之</font><font face="Times New Roman">Configuration</font><font face="宋体">对象和</font><font face="Times New Roman">SessionFactory</font><font face="宋体">对象：</font></span></p> 
  <p><span style="font-size:12.0000pt;">通常写在</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">HibernateSessionFactory</span><span style="font-size:12.0000pt;">.java<font face="宋体">中：</font></span></p> 
  <p><span style="font-size:12.0000pt;">private&nbsp;static&nbsp;</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">org.hibernate.cfg.</span><span style="font-size:12.0000pt;">Configuration&nbsp;configuration&nbsp;=&nbsp;new&nbsp;Configuration();</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">private&nbsp;static&nbsp;org.hibernate.SessionFactory&nbsp;sessionFactory;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">private&nbsp;static&nbsp;String&nbsp;configFile&nbsp;=&nbsp;"/hibernate.cfg.xml;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">configuration.configure(configFile);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">sessionFactory&nbsp;=&nbsp;configuration.buildSessionFactory();</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">创建<font face="Times New Roman">Session:</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Session&nbsp;session1&nbsp;=&nbsp;sessionFactory.openSession()&nbsp;;&nbsp;</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;"> </span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">//</span><span style="font-size:12.0000pt;">&nbsp;&nbsp;</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Session&nbsp;session2&nbsp;=&nbsp;sessionFactory.getCurrentSession()&nbsp;;</span></p> 
  <p><span style="font-size:12.0000pt;">官方的写法<font face="Times New Roman">:</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">public</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">static</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;Session&nbsp;getSession()&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">throws</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;HibernateException&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Session&nbsp;session&nbsp;=&nbsp;(Session)&nbsp;</span><span style="background-color:rgb(192,192,192);color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">threadLocal</span><span style="font-family: Consolas; font-size: 10.5pt;">.get();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">if</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(session&nbsp;==&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">null</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;||&nbsp;!session.isOpen())&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">if</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">sessionFactory</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;==&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">null</span><span style="font-family: Consolas; font-size: 10.5pt;">)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt; font-style: italic;">rebuildSessionFactory</span><span style="font-family: Consolas; font-size: 10.5pt;">();</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">session&nbsp;=&nbsp;(</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">sessionFactory</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;!=&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">null</span><span style="font-family: Consolas; font-size: 10.5pt;">)&nbsp;?&nbsp;</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">sessionFactory</span><span style="font-family: Consolas; font-size: 10.5pt;">.openSession()</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">:&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">null</span><span style="font-family: Consolas; font-size: 10.5pt;">;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="background-color:rgb(192,192,192);color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">threadLocal</span><span style="font-family: Consolas; font-size: 10.5pt;">.set(session);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">return</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;session;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Transaction<font face="宋体">的用法：</font></span></p> 
  <p><span style="font-size:12.0000pt;">Transaction&nbsp;trans&nbsp;=&nbsp;session1.beginTransaction();</span></p> 
  <p><span style="font-size:12.0000pt;">trans.begin();</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">trans.commit();</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">遇到异常：</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">trans.rollback();</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">持久化状态：</span></p> 
  <p><span style="font-size:12.0000pt;">session1.save(obj);<font face="宋体">可使对象由临时状态，转换成持久化状态。</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">session1.delete();<font face="宋体">同上相反，把对象欢迎成临时状态</font></span></p> 
  <p><span style="font-size:12.0000pt;">session1.close();<font face="宋体">可使持久化状态称为游离状态。</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">session1.update();<font face="宋体">同上相反，可使游离状态变成持久化状态。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:16.0000pt;font-weight:bold;">Hibernate缓存</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">一级缓存是<font face="Times New Roman">session</font><font face="宋体">类的缓存，是自动缓存的，无需配置。</font></span></p> 
  <p><span style="font-size:12.0000pt;">对于一级缓存：</span></p> 
  <p><span style="font-size:12.0000pt;">（<font face="Times New Roman">1</font><font face="宋体">）</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">save</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">update</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">saveOrupdate</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">load</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">get</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">list</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">iterate</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">lock</span><span style="font-size:12.0000pt;">方法都会向缓存中存对象</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">.&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">（<font face="Times New Roman">2</font><font face="宋体">）可以从缓存中读数据的只有：</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;get</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">load</span><span style="font-size:12.0000pt;">、</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">iterate&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">（<font face="Times New Roman">3</font><font face="宋体">）</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Query</span><span style="font-size:12.0000pt;">对象默认情况下不读缓存，如果要使其支持缓存（也就是<font face="Times New Roman">new</font><font face="宋体">两个相同的</font><font face="Times New Roman">Query</font><font face="宋体">时，第二次不再去执行</font><font face="Times New Roman">sql</font><font face="宋体">语句），则要通过语法：</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">query.setCacheable(true)<font face="宋体">；（并且要在</font><font face="Times New Roman">hibernate.cfg.xml</font><font face="宋体">中配置：</font></span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:12.0000pt;">&lt;</span><span style="background-color:rgb(192,192,192);color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">property</span><span style="font-family:Consolas;font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:12.0000pt;">name</span><span style="font-family: Consolas; font-size: 12pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"hibernate.cache.use_query_cache"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:12.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 12pt;">true</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:12.0000pt;">&lt;/</span><span style="background-color:rgb(192,192,192);color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:12.0000pt;">&gt;</span><span style="font-size:12.0000pt;">）</span></p> 
  <p><span style="font-size:12.0000pt;">PS<font face="宋体">：</font><font face="Times New Roman">list</font><font face="宋体">方法好像有点怪，其存入缓存中的数据无法</font><font face="Times New Roman">clear</font><font face="宋体">？</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">注意事项：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">1.Session&nbsp;</span><span style="font-size:12.0000pt;">级别的缓存，它同</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">session</span><span style="font-size:12.0000pt;">邦定。它的生命周期和</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">session</span><span style="font-size:12.0000pt;">相同。</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Session</span><span style="font-size:12.0000pt;">消毁，它也同时消毁；管理一级缓存，一级缓存无法取消，用两个方法管理，</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">clear(),evict()</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">2.</span><span style="font-size:12.0000pt;">两个</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">session&nbsp;</span><span style="font-size:12.0000pt;">不能共享一级缓存，因它会伴随</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">session</span><span style="font-size:12.0000pt;">的生命周期的创建和消毁；</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">3.Session</span><span style="font-size:12.0000pt;">缓存是实体级别的缓存</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">，就是只有在查询对象级别的时候才使用</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">，如果使用</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">HQL</span><span style="font-size:12.0000pt;">和</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">SQL</span><span style="font-size:12.0000pt;">是查询属性级别</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">的，是不使用一级缓存的！切记！！！！</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">查询单个对象的两种方法：</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">User&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt;">user1</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;=&nbsp;(User)&nbsp;session.load(User.</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">class</span><span style="font-family: Consolas; font-size: 10.5pt;">,&nbsp;1);</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">User&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt;">user2</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;=&nbsp;(User)&nbsp;session.</span><span style="background-color: rgb(192, 192, 192); font-family: Consolas; font-size: 10.5pt;">get</span><span style="font-family: Consolas; font-size: 10.5pt;">(User.</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">class</span><span style="font-family: Consolas; font-size: 10.5pt;">,&nbsp;53);</span></p> 
  <p><span style="font-size:12.0000pt;">前一种<font face="Times New Roman">load</font><font face="宋体">的时候不会执行</font><font face="Times New Roman">sql</font><font face="宋体">语句，</font><font face="Times New Roman">user1</font><font face="宋体">是空对象，只有用到</font><font face="Times New Roman">user1</font><font face="宋体">时才会去查询，第二种</font><font face="Times New Roman">get</font><font face="宋体">方法，就是直接查询，把结果赋值给</font><font face="Times New Roman">user2</font><font face="宋体">。两种方式都会一级缓存。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">查询多个对象时，有两种方法：</span></p> 
  <p><span style="font-size:12.0000pt;">第一种（<font face="Times New Roman">List</font><font face="宋体">方法）：</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">List&lt;User&gt;&nbsp;list&nbsp;=&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt;">query.list()</span><span style="font-family: Consolas; font-size: 10.5pt;">;</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">//</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">第</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">一次</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">查询</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">list&nbsp;=&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt;">query.list()</span><span style="font-family: Consolas; font-size: 10.5pt;">;&nbsp;</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">//</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">还</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">会去</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">查询</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">一次，但是将</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">结</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">果全部</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">缓</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">存到</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">list<font face="MS Mincho">中</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">for</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(User&nbsp;user&nbsp;:&nbsp;list)&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">System.</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">out</span><span style="font-family: Consolas; font-size: 10.5pt;">.</span><span style="background-color: rgb(192, 192, 192); font-family: Consolas; font-size: 10.5pt;">println</span><span style="font-family: Consolas; font-size: 10.5pt;">(user);</span><span style="font-family: 宋体; font-size: 10.5pt;">&nbsp;</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">//</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">直接从缓存中取</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-size:12.0000pt;">第二种（<font face="Times New Roman">Iterate</font><font face="宋体">方法）</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">Iterator</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;list&nbsp;=&nbsp;query.iterate();&nbsp;</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">//<font face="MS Mincho">只</font></span><span style="color:rgb(63,127,95);font-size:10.5000pt;">查询</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">id<font face="MS Mincho">，而不是把所有</font></span><span style="color:rgb(63,127,95);font-size:10.5000pt;">值</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">都</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">查</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">出</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">list&nbsp;=&nbsp;query.iterate();&nbsp;</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">//</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">还</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">会去</span><span style="color:rgb(63,127,95);font-size:10.5000pt;">查询</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">一次</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">id</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:10.5000pt;font-weight:bold;">while</span><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;(list.hasNext())&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">System.</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:10.5000pt;font-style:italic;">out</span><span style="font-family: Consolas; font-size: 10.5pt;">.println(list.next());&nbsp;</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">//<font face="MS Mincho">每次都要用</font><font face="Consolas">sql</font><font face="MS Mincho">去</font></span><span style="color:rgb(63,127,95);font-size:10.5000pt;">查询</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:10.5000pt;">指定</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:10.5000pt;">id<font face="MS Mincho">的</font></span><span style="color:rgb(63,127,95);font-size:10.5000pt;">记录</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="font-family: Consolas; font-size: 10.5pt;">}</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">可以看出，其实</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">iterate</span><span style="font-size:12.0000pt;">的效率很低，但是</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">list</span><span style="font-size:12.0000pt;">占用内存较大。所以一般用</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">list</span><span style="font-size:12.0000pt;">，并且数据量大时一定要配合用分页查询（否则不能用</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">list</span><span style="font-size:12.0000pt;">）。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">另外注意，在增删改时涉及到事务<font face="Times New Roman">(Transaction)</font><font face="宋体">，当事务没有</font><font face="Times New Roman">commit</font><font face="宋体">时，所有的增删改的数据都是存在代理那里的，实际上这也是一种缓存。例如要</font><font face="Times New Roman">save</font><font face="宋体">一千万个对象，那么肯定会塞满缓存，一般是每</font><font face="Times New Roman">save</font><font face="宋体">二十个对象就</font><font face="Times New Roman">flush+clear</font><font face="宋体">，然后再继续。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">二级缓存是<font face="Times New Roman">sessionFactory</font><font face="宋体">下的缓存，各个</font><font face="Times New Roman">session</font><font face="宋体">都共享缓存，需要配置插件。一般用</font><font face="Times New Roman">hibernate</font><font face="宋体">自带的这个</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ehcache</span><span style="font-size:12.0000pt;">，需要引入下面这个包：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ehcache-1.2.3.jar</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">首先在hibernate.cfg.xml<font face="宋体">中配置</font>：</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;</span><span style="background-color:rgb(192,192,192);color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="font-family:Consolas;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:9.0000pt;">name</span><span style="font-family: Consolas; font-size: 9pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;font-style:italic;">"hibernate.cache.provider_class"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 9pt;">org.hibernate.cache.EhCacheProvider</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;/</span><span style="background-color:rgb(192,192,192);color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="font-family:Consolas;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:9.0000pt;">name</span><span style="font-family: Consolas; font-size: 9pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;font-style:italic;">"hibernate.cache.use_second_level_cache"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 9pt;">true</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="font-family:Consolas;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:9.0000pt;">name</span><span style="font-family: Consolas; font-size: 9pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;font-style:italic;">"hibernate.cache.use_query_cache"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 9pt;">true</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="font-family:Consolas;font-size:9.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:9.0000pt;">name</span><span style="font-family: Consolas; font-size: 9pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;font-style:italic;">"current_session_context_class"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 9pt;">thread</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:9.0000pt;">property</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:9.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">在<font face="Times New Roman">src</font><font face="宋体">目录下新建</font></span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ehcache</span><span style="font-size:12.0000pt;">.xml<font face="宋体">，这个是可选的，在这个文件中可以自定义</font><font face="Times New Roman">cache</font><font face="宋体">的参数，例如下面的文件中自定义了一个</font><font face="Times New Roman">name</font><font face="宋体">为</font><font face="Times New Roman">userCache</font><font face="宋体">的配置：</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;?</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">xml</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">version</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"1.0"</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">encoding</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"UTF-8"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">?&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">ehcache</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">diskStore</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">path</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"java.io.tmdir"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">/&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">defaultCache</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">maxElementsInMemory</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"10000"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">eternal</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"false"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">overflowToDisk</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"true"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">timeToIdleSeconds</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"300"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">timeToLiveSeconds</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"600"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">diskPersistent</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"false"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">memoryStoreEvictionPolicy</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"LRU"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">/&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">cache</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">name</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"userCache"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">maxElementsInMemory</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"5000"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">eternal</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"false"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">overflowToDisk</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"true"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">timeToIdleSeconds</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"300"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">timeToLiveSeconds</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"600"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">diskPersistent</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"false"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">memoryStoreEvictionPolicy</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"LRU"</span></p> 
  <p><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">/&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">ehcache</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">可以为每个<font face="Times New Roman">entity</font><font face="宋体">配置二级缓存：</font></span></p> 
  <p><span style="font-size:12.0000pt;">比如在<font face="Times New Roman">User.hbm.xml</font><font face="宋体">中，做如下设置：</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">class</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">name</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"User"</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">table</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"t_user"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(63,95,191);font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(63,95,191);font-family:Consolas;font-size:10.5000pt;">&lt;cache&nbsp;usage="nonstrict-read-write"&nbsp;region="userCache"/&gt;</span></p> 
  <p><span style="color:rgb(63,95,191);font-family:Consolas;font-size:10.5000pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">id</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">name</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"id"</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">type</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"java.lang.Integer"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">column</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">name</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"id"</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">/&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">generator</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">class</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"sequence"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; font-size: 10.5pt;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">param</span><span style="font-family:Consolas;font-size:10.5000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:10.5000pt;">name</span><span style="font-family: Consolas; font-size: 10.5pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:10.5000pt;font-style:italic;">"sequence"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span><span style="font-family: Consolas; font-size: 10.5pt;">SEQ_ID_ALL</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">param</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">generator</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:10.5000pt;">id</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:10.5000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">那个<font face="Times New Roman">cache</font><font face="宋体">标签即给</font><font face="Times New Roman">User</font><font face="宋体">设置缓存，必须放在首位（紧跟</font><font face="Times New Roman">class</font><font face="宋体">标签）</font><font face="Times New Roman">,</font><font face="宋体">其属性</font><font face="Times New Roman">region</font><font face="宋体">指定了缓存的配置，这里其值是</font><font face="Times New Roman">userCache</font><font face="宋体">，对应</font><font face="Times New Roman">ehcache</font><font face="宋体">中的配置。也可以在</font><font face="Times New Roman">hibernate.cfg.xml</font><font face="宋体">中配置：</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:12.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">class-cache</span><span style="font-family:Consolas;font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:12.0000pt;">usage</span><span style="font-family: Consolas; font-size: 12pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"nonstrict-read-write"</span><span style="font-family:Consolas;font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-size:12.0000pt;">region</span><span style="font-family: Consolas; font-size: 12pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"</span><span style="color:rgb(42,0,255);font-size:12.0000pt;font-style:italic;">userCache</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"</span><span style="font-family:Consolas;font-size:12.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:12.0000pt;">class</span><span style="font-family: Consolas; font-size: 12pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"com.travelsky.hibc.entity.User"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:12.0000pt;">/&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">对于以上配置中的<font face="Times New Roman">usage</font><font face="宋体">，有</font><font face="Times New Roman">nonstrict-read-write</font><font face="宋体">，</font><font face="Times New Roman">read-write</font><font face="宋体">，</font><font face="Times New Roman">read-only</font><font face="宋体">和</font><font face="Times New Roman">transactional</font><font face="宋体">四种，关于这四种事务隔离级别的描述如下：</font></span></p> 
  <p><span style="font-size:12.0000pt;">　　事务型：仅仅在托管环境中适用。它提供了</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Repeatable&nbsp;Read</span><span style="font-size:12.0000pt;">事务隔离级别。对于经常被读但很少修改的数据，可以采用这种隔离类型，因为它可以防止脏读和不可重复读这类的并发问题。</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">　　读写型：提供了</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Read&nbsp;Committed</span><span style="font-size:12.0000pt;">事务隔离级别。仅仅在非集群的环境中适用。对于经常被读但很少修改的数据，可以采用这种隔离类型，因为它可以防止脏读这类的并发问题。</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">　　非严格读写型：不保证缓存与数据库中数据的一致性。如果存在两个事务同时访问缓存中相同数据的可能，必须为该数据配置一个很短的数据过期时间，从而尽量避免脏读。对于极少被修改，并且允许偶尔脏读的数据，可以采用这种并发访问策略。</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">　　只读型：对于从来不会修改的数据，如参考数据，可以使用这种并发访问策略。</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span><span style="font-size:12.0000pt;">　　事务型并发访问策略是事务隔离级别最高，只读型的隔离级别最低。事务隔离级别越高，并发性能就越低。（一般用“非严格读写型”甚至“只读型”）</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">使用方法（调用<font face="Times New Roman">Query</font><font face="宋体">的</font><font face="Times New Roman">setCacheable(true)</font><font face="宋体">方法），例如：</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:9.0000pt;font-weight:bold;">public</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:9.0000pt;font-weight:bold;">void</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;QueryCache()&nbsp;{</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">Session&nbsp;session1&nbsp;=&nbsp;HibernateSessionFactory.</span><span style="font-family: Consolas; font-size: 9pt; font-style: italic;">getSession</span><span style="font-family: Consolas; font-size: 9pt;">();</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">List</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;</span><span style="font-family: Consolas; font-size: 9pt;">list2</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;=&nbsp;session1.createQuery(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;">"from&nbsp;User"</span><span style="font-family: Consolas; font-size: 9pt;">).setCacheable(</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:9.0000pt;font-weight:bold;">true</span><span style="font-family: Consolas; font-size: 9pt;">).list();</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">session1.close();</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">Session&nbsp;</span><span style="background-color: rgb(255, 255, 0); font-family: Consolas; font-size: 9pt;">session2</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;=&nbsp;HibernateSessionFactory.</span><span style="font-family: Consolas; font-size: 9pt; font-style: italic;">getSession</span><span style="font-family: Consolas; font-size: 9pt;">();</span></p> 
  <p><span style="color:rgb(63,127,95);font-family:Consolas;font-size:9.0000pt;">//</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:9.0000pt;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:9.0000pt;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:9.0000pt;">User&nbsp;user2&nbsp;=&nbsp;(User)&nbsp;session2.load(User.class,&nbsp;22);&nbsp;//<font face="MS Mincho">不会</font></span><span style="color:rgb(63,127,95);font-size:9.0000pt;">查询</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:9.0000pt;">，直接用</span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:9.0000pt;">session1<font face="MS Mincho">的</font></span><span style="color:rgb(63,127,95);font-size:9.0000pt;">缓</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:9.0000pt;">存</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">List</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;</span><span style="font-family: Consolas; font-size: 9pt;">list3</span><span style="font-family: Consolas; font-size: 9pt;">&nbsp;=&nbsp;</span><span style="background-color: rgb(192, 192, 192); font-family: Consolas; font-size: 9pt;">session2</span><span style="font-family: Consolas; font-size: 9pt;">.createQuery(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:9.0000pt;">"from&nbsp;User"</span><span style="font-family: Consolas; font-size: 9pt;">).setCacheable(</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:9.0000pt;font-weight:bold;">true</span><span style="font-family: Consolas; font-size: 9pt;">).list();&nbsp;</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="background-color: rgb(192, 192, 192); font-family: Consolas; font-size: 9pt;">session2</span><span style="font-family: Consolas; font-size: 9pt;">.close();</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="color:rgb(63,127,95);font-family:Consolas;font-size:9.0000pt;">//<font face="MS Mincho">只</font></span><span style="color:rgb(63,127,95);font-size:9.0000pt;">查询</span><span style="color:rgb(63,127,95);font-family:&#39;MS Mincho&#39;;font-size:9.0000pt;">一遍</span></p> 
  <p><span style="font-family: Consolas; font-size: 9pt;"> </span><span style="font-family: Consolas; font-size: 9pt;">}</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">在配置中的<font face="Times New Roman">region</font><font face="宋体">属性可以不写，可以到程序中再指定：</font></span></p> 
  <p><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">List&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:12.0000pt;">list2</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">&nbsp;=&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:12.0000pt;">session1</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">.createQuery(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"from&nbsp;User"</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">)</span></p> 
  <p><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">.setCacheable(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">true</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">).setCacheRegion(</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:12.0000pt;font-style:italic;">"userCache"</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:12.0000pt;">).list();</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:16.0000pt;font-weight:bold;">Hibernate锁，悲观锁（</span><span style="font-size:16.0000pt;font-weight:bold;">Pessimistic</span><span style="font-size:16.0000pt;font-weight:bold;">），乐观锁（</span><span style="font-size:16.0000pt;font-weight:bold;">Optimistic</span><span style="font-size:16.0000pt;font-weight:bold;">）</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">悲观锁：本次事务提交之前（事务提交时会释放事务过程中的锁），外界无法修改这些记录。</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">其实现方法是转换成数据库的锁来实现的，例如：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">select&nbsp;*&nbsp;from&nbsp;account&nbsp;where&nbsp;name=</span><span style="font-size:12.0000pt;">'zollty'</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;for&nbsp;update</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Hibernate<font face="宋体">的加锁模式有多种，我们常用的是：</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">LockMode.UPGRADE</span><span style="font-size:12.0000pt;">：利用数据库的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">for&nbsp;update</span><span style="font-size:12.0000pt;">子句加锁。</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">LockMode.UPGRADE_NOWAIT</span><span style="font-size:12.0000pt;">：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Oracle</span><span style="font-size:12.0000pt;">的特定实现，利用</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Oracle</span><span style="font-size:12.0000pt;">的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">for</span><span style="font-size:12.0000pt;">&nbsp;</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">update&nbsp;nowait</span><span style="font-size:12.0000pt;">子句实现加锁。</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">加锁一般通过以下方法实现：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Criteria.setLockMode</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Query.setLockMode</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Session.lock</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">悲观锁的实现（<font face="Times New Roman">for&nbsp;update</font><font face="宋体">）：</font></span></p> 
  <p><span style="color:rgb(63,127,95);font-size:12.0000pt;"> </span><span style="color:rgb(63,127,95);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">//<font face="宋体">也就是在</font></span><span style="color:rgb(63,127,95);font-size:12.0000pt;">执</span><span style="color:rgb(63,127,95);font-size:12.0000pt;">行数据</span><span style="color:rgb(63,127,95);font-size:12.0000pt;">库</span><span style="color:rgb(63,127,95);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">select</span><span style="color:rgb(63,127,95);font-size:12.0000pt;">语</span><span style="color:rgb(63,127,95);font-size:12.0000pt;">句</span><span style="color:rgb(63,127,95);font-size:12.0000pt;">时</span><span style="color:rgb(63,127,95);font-size:12.0000pt;">跟上</span><span style="color:rgb(63,127,95);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">for&nbsp;update</span></p> 
  <p><span style="font-family: &#39;Times New Roman&#39;; font-size: 12pt;"> </span><span style="font-family: &#39;Times New Roman&#39;; font-size: 12pt;">query.setLockMode(</span><span style="color:rgb(42,0,255);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">"user"</span><span style="font-family: &#39;Times New Roman&#39;; font-size: 12pt;">,&nbsp;LockMode.</span><span style="color:rgb(0,0,192);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;font-style:italic;">UPGRADE</span><span style="font-family: &#39;Times New Roman&#39;; font-size: 12pt;">);</span></p> 
  <p><span style="font-family: 宋体; font-size: 12pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">/**&nbsp;</span></p> 
  <p><span style="color:rgb(63,95,191);font-size:10.5000pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">*&nbsp;<font face="宋体">当有</font><font face="Times New Roman">LOCK</font><font face="宋体">冲突</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">时</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">会提示</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">错误</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">并</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">结</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">束</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">STATEMENT<font face="宋体">而不是在那里等待</font><font face="Times New Roman">(</font><font face="宋体">比如</font><font face="Times New Roman">:</font><font face="宋体">要</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">查</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">的行已</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">经</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">被其它事</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">务锁</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">了</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">,</span></p> 
  <p><span style="color:rgb(63,95,191);font-size:10.5000pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">*&nbsp;<font face="宋体">当前的</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">锁</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">事</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">务</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">与之冲突</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">,<font face="宋体">加上</font><font face="Times New Roman">nowait,</font><font face="宋体">当前的事</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">务</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">会</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">结</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">束会提示</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">错误</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">并立即</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">结</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">束</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">&nbsp;STATEMENT<font face="宋体">而不再等待</font><font face="Times New Roman">).</font></span></p> 
  <p><span style="color:rgb(63,95,191);font-size:10.5000pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">*&nbsp;<font face="宋体">关于</font><font face="Times New Roman">NOWAIT(</font><font face="宋体">如果一定要用</font><font face="Times New Roman">FOR&nbsp;UPDATE</font><font face="宋体">，我更建</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">议</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">加上</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">NOWAIT)</span></p> 
  <p><span style="color:rgb(63,95,191);font-size:10.5000pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">*&nbsp;<font face="宋体">如果加了</font><font face="Times New Roman">for&nbsp;update</font><font face="宋体">后&nbsp;</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">该语</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">句用来</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">锁</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">定特定的行（如果有</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">where<font face="宋体">子句，就是</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">满</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">足</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">where<font face="宋体">条件的那些行）。</font></span></p> 
  <p><span style="color:rgb(63,95,191);font-size:10.5000pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">*&nbsp;<font face="宋体">当</font></span><span style="color:rgb(63,95,191);font-size:10.5000pt;">这</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">些行被</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">锁</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">定后，其他会</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">话</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">可以</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">选择这</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">些行，但不能更改或</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">删</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">除</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">这</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">些行，直到</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">该语</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">句的事</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">务</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">被</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">commit</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">语</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">句或</span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;">rollback</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">语</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">句</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">结</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">束</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">为</span><span style="color:rgb(63,95,191);font-size:10.5000pt;">止。</span></p> 
  <p><span style="color:rgb(63,95,191);font-size:12.0000pt;"> </span><span style="color:rgb(63,95,191);font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">*/</span></p> 
  <p><span style="font-size:12.0000pt;">乐观锁的实现（<font face="Times New Roman">Version</font><font face="宋体">）：</font></span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">class</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"xx"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">table</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"t_user"</span></p> 
  <p><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">dynamic-update</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"true"</span></p> 
  <p><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">dynamic-insert</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"true"</span></p> 
  <p><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="font-family:Consolas;font-size:14.0000pt;"> </span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">optimistic-lock</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"version"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">id</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 14pt;">...</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">id</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(63,95,191);font-family:Consolas;font-size:14.0000pt;">&lt;!--&nbsp;version<font face="MS Mincho">必</font></span><span style="color:rgb(63,95,191);font-size:14.0000pt;">须紧</span><span style="color:rgb(63,95,191);font-family:&#39;MS Mincho&#39;;font-size:14.0000pt;">跟</span><span style="color:rgb(63,95,191);font-family:Consolas;font-size:14.0000pt;">id<font face="MS Mincho">之后&nbsp;</font><font face="Consolas">--&gt;</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">version</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"version"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">type</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"java.lang.Integer"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">Hibernate<font face="宋体">实体配置高级篇：</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">sequence<font face="宋体">的写法</font></span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">id</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"id"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">type</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"java.lang.Integer"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">column</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"ID"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">precision</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"22"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">scale</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"0"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">generator</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">class</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"sequence"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; font-size: 14pt;"> </span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">param</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"sequence"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span><span style="font-family: Consolas; font-size: 14pt;">SEQ_DEPT_ID</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">param</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">generator</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">id</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">员工和部门的关系配置：</span></p> 
  <p><span style="font-size:12.0000pt;">员工<font face="Times New Roman">deptInfo</font><font face="宋体">对象属性：</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:14.0000pt;font-weight:bold;">private</span><span style="font-family: Consolas; font-size: 14pt;">&nbsp;DeptInfo&nbsp;</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:14.0000pt;">deptInfo</span><span style="font-family: Consolas; font-size: 14pt;">;</span></p> 
  <p><span style="font-size:12.0000pt;">对应：</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">many-to-one</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"deptInfo"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">class</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"DeptInfo"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">fetch</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"select"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">column</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"DEPT_ID"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">precision</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"22"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">scale</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"0"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">many-to-one</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">而部门中员工是以<font face="Times New Roman">set</font><font face="宋体">来存放的：</font></span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;"> </span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:14.0000pt;font-weight:bold;">private</span><span style="font-family: Consolas; font-size: 14pt;">&nbsp;Set&lt;EmpInfo&gt;&nbsp;</span><span style="color:rgb(0,0,192);font-family:Consolas;font-size:14.0000pt;">empInfos</span><span style="font-family: Consolas; font-size: 14pt;">&nbsp;=&nbsp;</span><span style="color:rgb(127,0,85);font-family:Consolas;font-size:14.0000pt;font-weight:bold;">new</span><span style="font-family: Consolas; font-size: 14pt;">&nbsp;HashSet&lt;EmpInfo&gt;(0);</span></p> 
  <p><span style="font-size:12.0000pt;">对应：</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">set</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"empInfos"&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">inverse</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"true"</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">key</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">column</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">name</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"DEPT_ID"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">precision</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"22"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">scale</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"0"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">key</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">one-to-many</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(127,0,127);font-family:Consolas;font-size:14.0000pt;">class</span><span style="font-family: Consolas; font-size: 14pt;">=</span><span style="color:rgb(42,0,255);font-family:Consolas;font-size:14.0000pt;font-style:italic;">"EmpInfo"</span><span style="font-family:Consolas;font-size:14.0000pt;">&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">/&gt;</span></p> 
  <p><span style="font-family: Consolas; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&lt;/</span><span style="color:rgb(63,127,127);font-family:Consolas;font-size:14.0000pt;">set</span><span style="color:rgb(0,128,128);font-family:Consolas;font-size:14.0000pt;">&gt;</span></p> 
  <p><span style="font-size:12.0000pt;">这个<font face="Times New Roman">inverse</font><font face="宋体">是做什么的？答：通常放在一对多的一方并设置为</font><font face="Times New Roman">true</font><font face="宋体">，代表“主外键的关系由对方来维护”，打个比方：在一个公司中，是老板认识所有的员工容易，还是所有员工认识老板容易？</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">员工配置里面是<font face="Times New Roman">&lt;many-to-one&gt;</font><font face="宋体">多个员工对应一个部门</font></span></p> 
  <p><span style="font-size:12.0000pt;">而部门配置里面是<font face="Times New Roman">&lt;one-to-many&gt;</font><font face="宋体">是一个部门对应多个员工。这个标签有一个</font><font face="Times New Roman">class</font><font face="宋体">属性放对方的类名。</font></span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">关于<font face="Times New Roman">inverse</font><font face="宋体">的详细解释：</font></span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">设</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">STUDENT</span><span style="font-size:12.0000pt;">表中存在一个名为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS_ID</span><span style="font-size:12.0000pt;">的字段，它和</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS</span><span style="font-size:12.0000pt;">表中的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">ID</span><span style="font-size:12.0000pt;">字段是主外键关系。那个</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">inverse</span><span style="font-size:12.0000pt;">属性就是用来规定是由谁（</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Student</span><span style="font-size:12.0000pt;">或</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">）来维护这个主外键关系的。</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">inverse</span><span style="font-size:12.0000pt;">的默认值为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">false</span><span style="font-size:12.0000pt;">。</span></p> 
  <p><span style="font-size:12.0000pt;">在处理逻辑代码中，如下：</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class&nbsp;c1&nbsp;=&nbsp;new&nbsp;Class();</span></p> 
  <p><span style="font-size:12.0000pt;">c1.setName("<font face="宋体">一班</font><font face="Times New Roman">");</font></span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Student&nbsp;s1&nbsp;=&nbsp;new&nbsp;Student();</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Student&nbsp;s2&nbsp;=&nbsp;new&nbsp;Student();</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s1.setName("Jason");</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s2.setName("Tom");</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">c1.getStudents().add(s1);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">c2.getStudents().add(s2);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s1.setClass(c1);</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s2.setClass(c1);&nbsp;&nbsp;&nbsp;//</span><span style="font-size:12.0000pt;">注释</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">1</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">session.save(c1);</span></p> 
  <p><span style="font-size:12.0000pt;"> </span><span style="font-size:12.0000pt;">上面的代码会使</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Hibernate</span><span style="font-size:12.0000pt;">执行五条</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">SQL</span><span style="font-size:12.0000pt;">语句，其中前三条是</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">insert</span><span style="font-size:12.0000pt;">插入语句，后两条是</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">update</span><span style="font-size:12.0000pt;">更新语句。插入就不用说了，那么为什么还要有更新语句呢？这是因为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">类映射文件的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&lt;set&gt;</span><span style="font-size:12.0000pt;">元素中指定了</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">inverse="false"</span><span style="font-size:12.0000pt;">，这就告之</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Hibernate</span><span style="font-size:12.0000pt;">：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">STUDENT</span><span style="font-size:12.0000pt;">表与</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS</span><span style="font-size:12.0000pt;">表的主外键关系是由</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">类来维护的。当执行</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">save</span><span style="font-size:12.0000pt;">后，执行了三条</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">insert</span><span style="font-size:12.0000pt;">语句，这三条语句中的后两条是插入到</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">STUDENT</span><span style="font-size:12.0000pt;">表的，它们的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS_ID</span><span style="font-size:12.0000pt;">字段是通过</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s1.getClass().getID()</span><span style="font-size:12.0000pt;">取出的，假如我将上面“注释</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">1”</span><span style="font-size:12.0000pt;">处修改为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s2.setClass(c2);</span><span style="font-size:12.0000pt;">（</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">c2</span><span style="font-size:12.0000pt;">是另一个</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">对象，可能是持久化对象），这样，主外键关系不就乱了吗。为了保证主外键关系，</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Hibernate</span><span style="font-size:12.0000pt;">在这种情况下会再执行两条</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">update</span><span style="font-size:12.0000pt;">语句来更改</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">STUDENT</span><span style="font-size:12.0000pt;">表中两个新插入记录的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS_ID</span><span style="font-size:12.0000pt;">字段，当然，这时</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS_ID</span><span style="font-size:12.0000pt;">字段的取值是从</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">c1</span><span style="font-size:12.0000pt;">对象中直接取得，而不再是</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s1.getClass().getID()</span><span style="font-size:12.0000pt;">方式了。</span></p> 
  <p><span style="font-size:12.0000pt;">如果我们将</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">类映射文件的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&lt;set&gt;</span><span style="font-size:12.0000pt;">元素中的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">inverse</span><span style="font-size:12.0000pt;">属性修改为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">true</span><span style="font-size:12.0000pt;">，这就是告诉</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Hibernate</span><span style="font-size:12.0000pt;">：</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Class</span><span style="font-size:12.0000pt;">类不维护主外键关系了，这个任务就交给了</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Student</span><span style="font-size:12.0000pt;">类。于是，我们再执行上面的代码，</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Hibernate</span><span style="font-size:12.0000pt;">就会只执行三条</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">insert</span><span style="font-size:12.0000pt;">语句，而不会执行任何</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">update</span><span style="font-size:12.0000pt;">语句。因为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Hibernate</span><span style="font-size:12.0000pt;">会通过</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">Student</span><span style="font-size:12.0000pt;">类的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s1.getClass().getID()</span><span style="font-size:12.0000pt;">和</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">s2.getClass().getID()</span><span style="font-size:12.0000pt;">来确定</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">CLASS_ID</span><span style="font-size:12.0000pt;">字段的值。</span></p> 
  <p><span style="font-size:12.0000pt;">故，为了节省数据库资源，省却不必要的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">update</span><span style="font-size:12.0000pt;">语句，我们一般建议在一对多双向关联关系中，将一方的</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">inverse</span><span style="font-size:12.0000pt;">属性设置为</span><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">true</span><span style="font-size:12.0000pt;">，即将主外键的关系交由多方来维护。</span></p> 
  <p><span style="font-size:12.0000pt;">打个比方：在一个公司中，是老板认识所有的员工容易，还是所有员工认识老板容易？</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-size:12.0000pt;">&nbsp;</span></p> 
  <p><span style="font-family:&#39;Times New Roman&#39;;font-size:12.0000pt;">&nbsp;</span></p> 
 </div> 
</div></div></div></div></div>
</div></div>
